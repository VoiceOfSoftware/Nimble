const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../chunks/2aiywt-_.js","../chunks/BsCcfVCh.js","../chunks/BouYdsdf.js","../chunks/Cex1gn7C.js","../chunks/BdtGcvC5.js","../chunks/CROL48nE.js","../chunks/DminihEk.js","../chunks/CRFJBxfj.js","../chunks/7qqrmH_q.js","../chunks/Bz0RU7rj.js","../chunks/O5vdvBJg.js","../chunks/TXKh3AVt.js","../assets/ThrelteCanvas.BSCmHfZt.css"])))=>i.map(i=>d[i]);
import{_ as wp}from"../chunks/Bz0RU7rj.js";import"../chunks/O5vdvBJg.js";import{t as j,a as L,c as ve,d as la}from"../chunks/BouYdsdf.js";import{F as gp,ah as yp,aa as Cp,am as cn,x as xp,b as ri,aA as Pp,aB as _t,p as Ae,aC as X,aD as Ut,t as ne,a as Me,g as l,aE as he,z as R,h as N,c as H,r as q,aF as Zt,f as K,e as oe,s as I,d as Ct,v as ms,n as Mn,K as Pu,aG as le,k as Ep,aH as Ti,as as ca}from"../chunks/Cex1gn7C.js";import{l as kp,w as Sp,e as je,d as Ki,s as Te}from"../chunks/BdtGcvC5.js";import{l as Ue,a as y,s as wt,b as kt,d as pi,i as Y,p as Se,c as ti,e as Eu,f as Gt,g as Pl}from"../chunks/CROL48nE.js";import{s as Rt,l as Ts,m as Is,n as Tr,o as Re,p as Jt,q as Ke,t as Dt,u as Fi,v as Tt,w as Kt,x as ku,y as _r,z as Ii,E as Lp,F as Vp,G as Ap,H as Mp,J as Dp,K as no,O as $p,Q as ua,U as Ir,V as El,W as Tp,r as We,X as Ip,Y as Op,Z as zp,_ as Rp,$ as Bp,a0 as Np,L as kl,a1 as Sl,N as jp,T as Fp,B as Up,C as qp,a as Hp,b as Kp,c as Gp,D as Wp,I as Yp,d as Xp,e as Zp,f as Jp,M as Qp,P as em,R as tm,g as nm,S as im,h as rm,A as sm,i as om,j as am}from"../chunks/BsCcfVCh.js";import{s as Su}from"../chunks/TXKh3AVt.js";import{i as rt}from"../chunks/CRFJBxfj.js";import{a as mi,w as $t,d as br,g as re,o as On,c as Lu,b as lm}from"../chunks/DminihEk.js";const cm=[];function Hn(n,e=!1){return vs(n,new Map,"",cm)}function vs(n,e,t,i,r=null){if(typeof n=="object"&&n!==null){var s=e.get(n);if(s!==void 0)return s;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(gp(n)){var o=Array(n.length);e.set(n,o),r!==null&&e.set(r,o);for(var a=0;a<n.length;a+=1){var c=n[a];a in n&&(o[a]=vs(c,e,t,i))}return o}if(yp(n)===Cp){o={},e.set(n,o),r!==null&&e.set(r,o);for(var u in n)o[u]=vs(n[u],e,t,i);return o}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function")return vs(n.toJSON(),e,t,i,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}class da{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,t){var i=this.#e.get(e)||new Set;return i.add(t),this.#e.set(e,i),this.#i().observe(e,this.#n),()=>{var r=this.#e.get(e);r.delete(t),r.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#i(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var t of e){da.entries.set(t.target,t);for(var i of this.#e.get(t.target)||[])i(t)}}))}}var um=new da({box:"border-box"});function Ll(n,e,t){var i=um.observe(n,()=>t(n[e]));cn(()=>(xp(()=>t(n[e])),i))}function Vl(n,e){kp(window,["resize"],()=>Sp(()=>e(window[n])))}function Vu(n){try{mi(n)}catch{return n()}}function dm(n,e){let t=[];const i=a=>{t.push(a)},r=()=>{t.forEach(a=>a()),t=[]},s=br(n,a=>(r(),e(a,i)));return Vu(r),{...s,subscribe:(...a)=>{const c=s.subscribe(...a);return()=>{c(),r()}}}}function io(n,e){if(!Or)return()=>{};const t=dm(n,(i,r)=>({stores:i,onUnsubscribe:r})).subscribe(({stores:i,onUnsubscribe:r})=>{const s=e(i);s&&r(s)});return Vu(t),t}function hm(n){const e={};return Object.keys(n).forEach(t=>{const i=t,r=n[i];e[i]=$t(r)}),e}function pm(n){return function(e,t){if(t===void 0)return;const i=n[e];i&&i.set(t)}}function ha(n){return Object.keys(n).reduce((e,t)=>n[t]===void 0?e:e+`${t}:${n[t]};`,"")}let Fo=null,ni=null;function Au(n){switch(n){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function mm(){ni!==null&&(document.head.removeChild(ni),Fo=null,ni=null)}function ro(n){if(Fo===n)return;Fo=n;const e=Au(n);ni===null&&(ni=document.createElement("style"),document.head.appendChild(ni)),ni.innerHTML=`*{cursor: ${e}!important;}`}function vm({defaultSize:n,dragState:e,layout:t,paneData:i,paneIndex:r,precision:s=3}){const o=t[r];let a;return o==null?a=n??"1":i.length===1?a="1":a=o.toPrecision(s),ha({"flex-basis":0,"flex-grow":a,"flex-shrink":1,overflow:"hidden","pointer-events":e!==null?"none":void 0})}function fm({layout:n,panesArray:e,pivotIndices:t}){let i=0,r=100,s=0,o=0;const a=t[0];for(let h=0;h<e.length;h++){const{constraints:p}=e[h],{maxSize:m=100,minSize:v=0}=p;h===a?(i=v,r=m):(s+=v,o+=m)}const c=Math.min(r,100-s),u=Math.max(i,100-o),d=n[a];return{valueMax:c,valueMin:u,valueNow:d}}let bm="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",_m=(n=21)=>{let e="",t=n|0;for(;t--;)e+=bm[Math.random()*64|0];return e};function pa(n=null){return n??_m(10)}const wm=100,ma=10;function Al(n){try{if(typeof localStorage>"u")throw new Error("localStorage is not supported in this environment");n.getItem=e=>localStorage.getItem(e),n.setItem=(e,t)=>localStorage.setItem(e,t)}catch(e){console.error(e),n.getItem=()=>null,n.setItem=()=>{}}}function Mu(n){return`paneforge:${n}`}function Du(n){return n.map(t=>{const{constraints:i,id:r,idIsFromProps:s,order:o}=t;return s?r:o?`${o}:${JSON.stringify(i)}`:JSON.stringify(i)}).sort().join(",")}function $u(n,e){try{const t=Mu(n),i=e.getItem(t),r=JSON.parse(i||"");if(typeof r=="object"&&r!==null)return r}catch{}return null}function gm(n,e,t){const i=$u(n,t)||{},r=Du(e);return i[r]||null}function ym(n,e,t,i,r){const s=Mu(n),o=Du(e),a=$u(n,r)||{};a[o]={expandToSizes:Object.fromEntries(t.entries()),layout:i};try{r.setItem(s,JSON.stringify(a))}catch(c){console.error(c)}}const Ml={};function Cm(n,e=10){let t=null;return(...r)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{n(...r)},e)}}function xm({autoSaveId:n,layout:e,storage:t,paneDataArrayStore:i,paneSizeBeforeCollapseStore:r}){const s=re(i);if(e.length===0||e.length!==s.length)return;let o=Ml[n];o==null&&(o=Cm(ym,wm),Ml[n]=o);const a=[...s],c=re(r),u=new Map(c);o(n,a,u,e,t)}function Tu(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=i)}return e}function Pm(...n){return(...e)=>{for(const t of n)typeof t=="function"&&t(...e)}}function ei(n,e,t,i){const r=Array.isArray(e)?e:[e];return r.forEach(s=>n.addEventListener(s,t,i)),()=>{r.forEach(s=>n.removeEventListener(s,t,i))}}function xt(n,e,t=ma){return yr(n,e,t)===0}function yr(n,e,t=ma){const i=Dl(n,t),r=Dl(e,t);return Math.sign(i-r)}function ir(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Dl(n,e){return parseFloat(n.toFixed(e))}function ze(n,e="Assertion failed!"){if(!n)throw console.error(e),Error(e)}function Oi({paneConstraints:n,paneIndex:e,initialSize:t}){const i=n[e];ze(i!=null,"Pane constraints should not be null.");const{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;let c=t;return yr(c,a)<0&&(c=Em(c,s,r,a)),c=Math.min(o,c),parseFloat(c.toFixed(ma))}function Em(n,e,t,i){if(!e)return i;const r=(t+i)/2;return yr(n,r)<0?t:i}function rr({delta:n,layout:e,paneConstraints:t,pivotIndices:i,trigger:r}){if(xt(n,0))return e;const s=[...e],[o,a]=i;let c=0;if(r==="keyboard"){{const d=n<0?a:o,h=t[d];if(ze(h),h.collapsible){const p=e[d];ze(p!=null);const m=t[d];ze(m);const{collapsedSize:v=0,minSize:b=0}=m;if(xt(p,v)){const f=b-p;yr(f,Math.abs(n))>0&&(n=n<0?0-f:f)}}}{const d=n<0?o:a,h=t[d];ze(h);const{collapsible:p}=h;if(p){const m=e[d];ze(m!=null);const v=t[d];ze(v);const{collapsedSize:b=0,minSize:f=0}=v;if(xt(m,f)){const C=m-b;yr(C,Math.abs(n))>0&&(n=n<0?0-C:C)}}}}{const d=n<0?1:-1;let h=n<0?a:o,p=0;for(;;){const v=e[h];ze(v!=null);const f=Oi({paneConstraints:t,paneIndex:h,initialSize:100})-v;if(p+=f,h+=d,h<0||h>=t.length)break}const m=Math.min(Math.abs(n),Math.abs(p));n=n<0?0-m:m}{let h=n<0?o:a;for(;h>=0&&h<t.length;){const p=Math.abs(n)-Math.abs(c),m=e[h];ze(m!=null);const v=m-p,b=Oi({paneConstraints:t,paneIndex:h,initialSize:v});if(!xt(m,b)&&(c+=m-b,s[h]=b,c.toPrecision(3).localeCompare(Math.abs(n).toPrecision(3),void 0,{numeric:!0})>=0))break;n<0?h--:h++}}if(xt(c,0))return e;{const d=n<0?a:o,h=e[d];ze(h!=null);const p=h+c,m=Oi({paneConstraints:t,paneIndex:d,initialSize:p});if(s[d]=m,!xt(m,p)){let v=p-m,f=n<0?a:o;for(;f>=0&&f<t.length;){const C=s[f];ze(C!=null);const E=C+v,_=Oi({paneConstraints:t,paneIndex:f,initialSize:E});if(xt(C,_)||(v-=_-C,s[f]=_),xt(v,0))break;n>0?f--:f++}}}const u=s.reduce((d,h)=>h+d,0);return xt(u,100)?s:e}const Or=typeof document<"u";function km(n){return n instanceof HTMLElement}function Iu(n){return n.type==="keydown"}function Ou(n){return n.type.startsWith("mouse")}function zu(n){return n.type.startsWith("touch")}const zi={getItem:n=>(Al(zi),zi.getItem(n)),setItem:(n,e)=>{Al(zi),zi.setItem(n,e)}},Sm={id:null,onLayout:null,keyboardResizeBy:null,autoSaveId:null,direction:"horizontal",storage:zi};function Lm(n){const e={...Sm,...Tu(n)},t=hm(e),{autoSaveId:i,direction:r,keyboardResizeBy:s,storage:o,onLayout:a}=t,c=$t(pa()),u=$t(null),d=$t([]),h=$t([]),p=$t(!1),m=$t({}),v=$t(new Map),b=$t(0);io([c,d,h],([V,A,k])=>Vm({groupId:V,layout:A,paneDataArray:k})),On(()=>z()),io([i,d,o],([V,A,k])=>{V&&xm({autoSaveId:V,layout:A,storage:k,paneDataArrayStore:h,paneSizeBeforeCollapseStore:v})});function f(V){const A=re(d),k=re(h);if(!V.constraints.collapsible)return;const W=k.map(se=>se.constraints),{collapsedSize:Z=0,paneSize:ee,pivotIndices:ye}=gi(k,V,A);if(ze(ee!=null),ee===Z)return;v.update(se=>(se.set(V.id,ee),se));const pe=Di(k,V)===k.length-1?ee-Z:Z-ee,ae=rr({delta:pe,layout:A,paneConstraints:W,pivotIndices:ye,trigger:"imperative-api"});if(ir(A,ae))return;d.set(ae);const De=re(a);De&&De(ae),sr(k,ae,re(m))}function C(V){const A=re(d),k=re(h),{paneSize:W}=gi(k,V,A);return W}const E=br([h,d,u],([V,A,k])=>(W,Z)=>{const ee=Di(V,W);return vm({defaultSize:Z,dragState:k,layout:A,paneData:V,paneIndex:ee})});function _(V){const A=re(h),k=re(d),{collapsedSize:W=0,collapsible:Z,paneSize:ee}=gi(A,V,k);return!Z||ee>W}function T(V){h.update(A=>{const k=[...A,V];return k.sort((W,Z)=>{const ee=W.order,ye=Z.order;return ee==null&&ye==null?0:ee==null?-1:ye==null?1:ee-ye}),k}),p.set(!0)}io([p],([V])=>{if(!V)return;p.set(!1);const A=re(i),k=re(o),W=re(d),Z=re(h);let ee=null;if(A){const pe=gm(A,Z,k);pe&&(v.set(new Map(Object.entries(pe.expandToSizes))),ee=pe.layout)}ee==null&&(ee=Dm({paneDataArray:Z}));const ye=$m({layout:ee,paneConstraints:Z.map(pe=>pe.constraints)});if(ir(W,ye))return;d.set(ye);const Qe=re(a);Qe&&Qe(ye),sr(Z,ye,re(m))});function U(V){return function(k){k.preventDefault();const W=re(r),Z=re(u),ee=re(c),ye=re(s),Qe=re(d),pe=re(h),{initialLayout:ae}=Z??{},De=Tl(ee,V);let se=Tm(k,V,W,Z,ye);if(se===0)return;const Ce=W==="horizontal";document.dir==="rtl"&&Ce&&(se=-se);const Ee=pe.map(Be=>Be.constraints),ke=rr({delta:se,layout:ae??Qe,paneConstraints:Ee,pivotIndices:De,trigger:Iu(k)?"keyboard":"mouse-or-touch"}),me=!ir(Qe,ke);if((Ou(k)||zu(k))&&re(b)!=se&&(b.set(se),ro(me?Ce?"horizontal":"vertical":Ce?se<0?"horizontal-min":"horizontal-max":se<0?"vertical-min":"vertical-max")),me){d.set(ke);const Be=re(a);Be&&Be(ke),sr(pe,ke,re(m))}}}function D(V,A){const k=re(d),W=re(h),Z=W.map(se=>se.constraints),{paneSize:ee,pivotIndices:ye}=gi(W,V,k);ze(ee!=null);const pe=Di(W,V)===W.length-1?ee-A:A-ee,ae=rr({delta:pe,layout:k,paneConstraints:Z,pivotIndices:ye,trigger:"imperative-api"});if(ir(k,ae))return;d.set(ae),re(a)?.(ae),sr(W,ae,re(m))}function x(V,A){const k=re(r),W=re(d),Z=va(V);ze(Z);const ee=Bu(k,A);u.set({dragHandleId:V,dragHandleRect:Z.getBoundingClientRect(),initialCursorPosition:ee,initialLayout:W})}function g(){mm(),u.set(null)}function w(V){const A=re(h),k=Di(A,V);k<0||h.update(W=>(W.splice(k,1),m.update(Z=>(delete Z[V.id],Z)),p.set(!0),W))}function S(V){const A=re(h),k=re(d),{collapsedSize:W=0,collapsible:Z,paneSize:ee}=gi(A,V,k);return Z===!0&&ee===W}function $(V){const A=re(d),k=re(h);if(!V.constraints.collapsible)return;const W=k.map(ke=>ke.constraints),{collapsedSize:Z=0,paneSize:ee,minSize:ye=0,pivotIndices:Qe}=gi(k,V,A);if(ee!==Z)return;const pe=re(v).get(V.id),ae=pe!=null&&pe>=ye?pe:ye,se=Di(k,V)===k.length-1?ee-ae:ae-ee,Ce=rr({delta:se,layout:A,paneConstraints:W,pivotIndices:Qe,trigger:"imperative-api"});if(ir(A,Ce))return;d.set(Ce),re(a)?.(Ce),sr(k,Ce,re(m))}const M=br([r],([V])=>ha({display:"flex","flex-direction":V==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"})),P=br([r,c],([V,A])=>({"data-pane-group":"","data-direction":V,"data-pane-group-id":A})),O=br([M,P],([V,A])=>({style:V,...A}));function z(){const V=re(c),k=zr(V).map(W=>{const Z=W.getAttribute("data-pane-resizer-id");if(!Z)return $l;const[ee,ye]=Mm(V,Z,re(h));if(ee==null||ye==null)return $l;const pe=ei(W,"keydown",ae=>{if(ae.defaultPrevented||ae.key!=="Enter")return;ae.preventDefault();const De=re(h),se=De.findIndex(de=>de.id===ee);if(se<0)return;const Ce=De[se];ze(Ce);const Ee=re(d),ke=Ee[se],{collapsedSize:me=0,collapsible:Be,minSize:et=0}=Ce.constraints;if(!(ke!=null&&Be))return;const te=rr({delta:xt(ke,me)?et-ke:me-ke,layout:Ee,paneConstraints:De.map(de=>de.constraints),pivotIndices:Tl(V,Z),trigger:"keyboard"});Ee!==te&&d.set(te)});return()=>{pe()}});return()=>{k.forEach(W=>W())}}function B(V){d.set(V)}function ue(){return re(d)}return{methods:{collapsePane:f,expandPane:$,getSize:C,getPaneStyle:E,isCollapsed:S,isExpanded:_,registerPane:T,registerResizeHandle:U,resizePane:D,startDragging:x,stopDragging:g,unregisterPane:w,setLayout:B,getLayout:ue},states:{direction:r,dragState:u,groupId:c,paneGroupAttrs:O,paneGroupSelectors:P,paneGroupStyle:M,layout:d},options:t}}function Vm({groupId:n,layout:e,paneDataArray:t}){const i=zr(n);for(let r=0;r<t.length-1;r++){const{valueMax:s,valueMin:o,valueNow:a}=fm({layout:e,panesArray:t,pivotIndices:[r,r+1]}),c=i[r];if(km(c)){const u=t[r];c.setAttribute("aria-controls",u.id),c.setAttribute("aria-valuemax",""+Math.round(s)),c.setAttribute("aria-valuemin",""+Math.round(o)),c.setAttribute("aria-valuenow",a!=null?""+Math.round(a):"")}}return()=>{i.forEach(r=>{r.removeAttribute("aria-controls"),r.removeAttribute("aria-valuemax"),r.removeAttribute("aria-valuemin"),r.removeAttribute("aria-valuenow")})}}function zr(n){return Or?Array.from(document.querySelectorAll(`[data-pane-resizer-id][data-pane-group-id="${n}"]`)):[]}function Am(n){if(!Or)return null;const e=document.querySelector(`[data-pane-group][data-pane-group-id="${n}"]`);return e||null}function $l(){}function Mm(n,e,t){const i=va(e),r=zr(n),s=i?r.indexOf(i):-1,o=t[s]?.id??null,a=t[s+1]?.id??null;return[o,a]}function va(n){if(!Or)return null;const e=document.querySelector(`[data-pane-resizer-id="${n}"]`);return e||null}function Ru(n,e){return Or?zr(n).findIndex(r=>r.getAttribute("data-pane-resizer-id")===e)??null:null}function Tl(n,e){const t=Ru(n,e);return t!=null?[t,t+1]:[-1,-1]}function gi(n,e,t){const i=n.map(u=>u.constraints),r=Di(n,e),s=i[r],a=r===n.length-1?[r-1,r]:[r,r+1],c=t[r];return{...s,paneSize:c,pivotIndices:a}}function Di(n,e){return n.findIndex(t=>t.id===e.id)}function sr(n,e,t){e.forEach((i,r)=>{const s=n[r];ze(s);const{callbacks:o,constraints:a,id:c}=s,{collapsedSize:u=0,collapsible:d}=a,h=t[c];if(!(h==null||i!==h))return;t[c]=i;const{onCollapse:p,onExpand:m,onResize:v}=o;v?.(i,h),d&&(p||m)&&(m&&(h==null||h===u)&&i!==u&&m(),p&&(h==null||h!==u)&&i===u&&p())})}function Dm({paneDataArray:n}){const e=Array(n.length),t=n.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<n.length;s++){const o=t[s];ze(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<n.length;s++){const o=t[s];ze(o);const{defaultSize:a}=o;if(a!=null)continue;const c=n.length-i,u=r/c;i++,e[s]=u,r-=u}return e}function $m({layout:n,paneConstraints:e}){const t=[...n],i=t.reduce((s,o)=>s+o,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} pane layout: ${t.map(s=>`${s}%`).join(", ")}`);if(!xt(i,100))for(let s=0;s<e.length;s++){const o=t[s];ze(o!=null);const a=100/i*o;t[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=t[s];ze(o!=null);const a=Oi({paneConstraints:e,paneIndex:s,initialSize:o});o!=a&&(r+=o-a,t[s]=a)}if(!xt(r,0))for(let s=0;s<e.length;s++){const o=t[s];ze(o!=null);const a=o+r,c=Oi({paneConstraints:e,paneIndex:s,initialSize:a});if(o!==c&&(r-=c-o,t[s]=c,xt(r,0)))break}return t}function Tm(n,e,t,i,r){if(Iu(n)){const s=t==="horizontal";let o=0;n.shiftKey?o=100:r!=null?o=r:o=10;let a=0;switch(n.key){case"ArrowDown":a=s?0:o;break;case"ArrowLeft":a=s?-o:0;break;case"ArrowRight":a=s?o:0;break;case"ArrowUp":a=s?0:-o;break;case"End":a=100;break;case"Home":a=-100;break}return a}else return i==null?0:Im(n,e,t,i)}function Im(n,e,t,i){const r=t==="horizontal",s=va(e);ze(s);const o=s.getAttribute("data-pane-group-id");ze(o);const{initialCursorPosition:a}=i,c=Bu(t,n),u=Am(o);ze(u);const d=u.getBoundingClientRect(),h=r?d.width:d.height;return(c-a)/h*100}function Bu(n,e){const t=n==="horizontal";if(Ou(e))return t?e.clientX:e.clientY;if(zu(e)){const i=e.touches[0];return ze(i),t?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}const Uo=Symbol("PF_GROUP_CTX");function Om(n){const e=Lm(Tu(n)),t=pm(e.options),i={...e,updateOption:t};return ri(Uo,i),i}function Nu(n){if(!Pp(Uo))throw new Error(`${n} components must be rendered with a <PaneGroup> container`);return _t(Uo)}var zm=j("<div><!></div>");function Rm(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["autoSaveId","direction","id","keyboardResizeBy","onLayoutChange","storage","el","paneGroup","style"]);Ae(e,!1);const[r,s]=pi(),o=()=>wt(U,"$groupId",r),a=()=>wt(_,"$paneGroupStyle",r),c=()=>wt(T,"$paneGroupSelectors",r),u=he();let d=y(e,"autoSaveId",8,null),h=y(e,"direction",8),p=y(e,"id",8,null),m=y(e,"keyboardResizeBy",8,null),v=y(e,"onLayoutChange",8,null),b=y(e,"storage",8,zi),f=y(e,"el",28,()=>{}),C=y(e,"paneGroup",28,()=>{}),E=y(e,"style",24,()=>{});const{states:{paneGroupStyle:_,paneGroupSelectors:T,groupId:U},methods:{setLayout:D,getLayout:x},updateOption:g}=Om({autoSaveId:d(),direction:h(),id:p(),keyboardResizeBy:m(),onLayout:v(),storage:b()});C({getLayout:x,setLayout:D,getId:()=>o()}),X(()=>R(d()),()=>{g("autoSaveId",d())}),X(()=>R(h()),()=>{g("direction",h())}),X(()=>R(p()),()=>{g("id",p())}),X(()=>R(m()),()=>{g("keyboardResizeBy",m())}),X(()=>R(v()),()=>{g("onLayout",v())}),X(()=>R(b()),()=>{g("storage",b())}),X(()=>(a(),R(E())),()=>{N(u,a()+(E()??""))}),Ut(),rt();var w=zm();let S;var $=H(w);Rt($,e,"default",{},null),q(w),kt(w,M=>f(M),()=>f()),ne(()=>S=Ts(w,S,{id:o(),...c(),style:l(u),...i})),L(n,w),Me(),s()}var Bm=j("<div><!></div>");function so(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["collapsedSize","collapsible","defaultSize","maxSize","minSize","onCollapse","onExpand","onResize","order","el","pane","id","style"]);Ae(e,!1);const[r,s]=pi(),o=()=>wt(x,"$getPaneStyle",r),a=()=>wt(B,"$groupId",r),c=he(),u=he();let d=y(e,"collapsedSize",24,()=>{}),h=y(e,"collapsible",24,()=>{}),p=y(e,"defaultSize",24,()=>{}),m=y(e,"maxSize",24,()=>{}),v=y(e,"minSize",24,()=>{}),b=y(e,"onCollapse",24,()=>{}),f=y(e,"onExpand",24,()=>{}),C=y(e,"onResize",24,()=>{}),E=y(e,"order",24,()=>{}),_=y(e,"el",28,()=>{}),T=y(e,"pane",28,()=>{}),U=y(e,"id",24,()=>{}),D=y(e,"style",24,()=>{});const{methods:{getPaneStyle:x,registerPane:g,unregisterPane:w,collapsePane:S,expandPane:$,getSize:M,isCollapsed:P,isExpanded:O,resizePane:z},states:{groupId:B}}=Nu("Pane"),ue=pa(U());let V=he();T({collapse:()=>{S(l(V))},expand:()=>$(l(V)),getSize:()=>M(l(V)),isCollapsed:()=>P(l(V)),isExpanded:()=>O(l(V)),resize:Z=>z(l(V),Z),getId:()=>ue}),On(()=>(g(l(V)),()=>{w(l(V))})),X(()=>(R(b()),R(f()),R(C()),R(d()),R(h()),R(p()),R(m()),R(v()),R(U()),R(E())),()=>{N(V,{callbacks:{onCollapse:b(),onExpand:f(),onResize:C()},constraints:{collapsedSize:d(),collapsible:h(),defaultSize:p(),maxSize:m(),minSize:v()},id:ue,idIsFromProps:U()!==void 0,order:E()})}),X(()=>(o(),l(V),R(p()),R(D())),()=>{N(c,o()(l(V),p())+(D()??""))}),X(()=>a(),()=>{N(u,{"data-pane":"","data-pane-id":ue,"data-pane-group-id":a()})}),Ut(),rt();var A=Bm();let k;var W=H(A);Rt(W,e,"default",{},null),q(A),kt(A,Z=>_(Z),()=>_()),ne(()=>k=Ts(A,k,{style:l(c),...l(u),...i})),L(n,A),Me(),s()}function Nm(n,e){let t=()=>{};function i(r){t();const{disabled:s,resizeHandler:o,isDragging:a,stopDragging:c,onDragging:u=void 0}=r;if(s||o===null||!a)return;const d=m=>{o(m)},h=m=>{o(m)},p=()=>{n.blur(),c(),u&&u(!1)};t=Pm(ei(document.body,"contextmenu",p),ei(document.body,"mousemove",d),ei(document.body,"touchmove",d,{passive:!1}),ei(document.body,"mouseleave",h),ei(window,"mouseup",p),ei(window,"touchend",p))}return i(e),{update:i,onDestroy(){t()}}}var jm=j("<div><!></div>");function Il(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["disabled","onDraggingChange","tabIndex","el","id","style"]);Ae(e,!1);const[r,s]=pi(),o=()=>wt(D,"$dragState",r),a=()=>wt(x,"$groupId",r),c=()=>wt(U,"$direction",r),u=he(),d=he(),h=he();let p=y(e,"disabled",8,!1),m=y(e,"onDraggingChange",24,()=>{}),v=y(e,"tabIndex",8,0),b=y(e,"el",12,null),f=y(e,"id",24,()=>{}),C=y(e,"style",24,()=>{});const{methods:{registerResizeHandle:E,startDragging:_,stopDragging:T},states:{direction:U,dragState:D,groupId:x}}=Nu("PaneResizer"),g=pa(f());let w=he(!1),S=he(null);function $(){const B=b();B&&(B.blur(),T(),m()?.(!1))}On(()=>{p()?N(S,null):N(S,E(g))});function M(B){if(p()||!l(S)||B.defaultPrevented)return;if(["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home"].includes(B.key)){B.preventDefault(),l(S)(B);return}if(B.key!=="F6")return;B.preventDefault();const V=zr(a()),A=Ru(a(),g);if(A===null)return;const k=B.shiftKey?A>0?A-1:V.length-1:A+1<V.length?A+1:0;V[k].focus()}X(()=>o(),()=>{N(u,o()?.dragHandleId===g)}),X(()=>R(p()),()=>{p()?N(S,null):N(S,E(g))}),X(()=>(c(),R(C())),()=>{N(d,ha({cursor:Au(c()),"touch-action":"none","user-select":"none","-webkit-user-select":"none","-webkit-touch-callout":"none"})+C())}),X(()=>(c(),a(),l(u),l(w),R(p())),()=>{N(h,{"data-direction":c(),"data-pane-group-id":a(),"data-active":l(u)?"pointer":l(w)?"keyboard":void 0,"data-enabled":!p(),"data-pane-resizer-id":g,"data-pane-resizer":""})}),Ut(),rt();var P=jm();let O;var z=H(P);Rt(z,e,"default",{},null),q(P),kt(P,B=>b(B),()=>b()),Is(P,(B,ue)=>Nm?.(B,ue),()=>({disabled:p(),resizeHandler:l(S),stopDragging:T,isDragging:l(u),onDragging:m()})),cn(()=>je("keydown",P,M)),cn(()=>je("blur",P,()=>N(w,!1))),cn(()=>je("focus",P,()=>N(w,!0))),cn(()=>je("mousedown",P,B=>{B.preventDefault(),_(g,B),m()?.(!0)})),cn(()=>je("mouseup",P,$)),cn(()=>je("touchcancel",P,$)),cn(()=>je("touchend",P,$)),cn(()=>je("touchstart",P,B=>{B.preventDefault(),_(g,B),m()?.(!0)})),ne(()=>O=Ts(P,O,{role:"separator",style:l(d),tabindex:v(),...l(h),...i})),L(n,P),Me(),s()}var Fm={grad:.9,turn:360,rad:360/(2*Math.PI)},on=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},it=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},It=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},ju=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Ol=function(n){return{r:It(n.r,0,255),g:It(n.g,0,255),b:It(n.b,0,255),a:It(n.a)}},oo=function(n){return{r:it(n.r),g:it(n.g),b:it(n.b),a:it(n.a,3)}},Um=/^#([0-9a-f]{3,8})$/i,ss=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},Fu=function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=Math.max(e,t,i),o=s-Math.min(e,t,i),a=o?s===e?(t-i)/o:s===t?2+(i-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:r}},Uu=function(n){var e=n.h,t=n.s,i=n.v,r=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),o=i*(1-t),a=i*(1-(e-s)*t),c=i*(1-(1-e+s)*t),u=s%6;return{r:255*[i,a,o,o,c,i][u],g:255*[c,i,i,a,o,o][u],b:255*[o,o,c,i,i,a][u],a:r}},zl=function(n){return{h:ju(n.h),s:It(n.s,0,100),l:It(n.l,0,100),a:It(n.a)}},Rl=function(n){return{h:it(n.h),s:it(n.s),l:it(n.l),a:it(n.a,3)}},Bl=function(n){return Uu((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},wr=function(n){return{h:(e=Fu(n)).h,s:(r=(200-(t=e.s))*(i=e.v)/100)>0&&r<200?t*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,t,i,r},qm=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hm=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Km=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Gm=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Nl={string:[[function(n){var e=Um.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?it(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?it(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=Km.exec(n)||Gm.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Ol({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=qm.exec(n)||Hm.exec(n);if(!e)return null;var t,i,r=zl({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(Fm[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Bl(r)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,r=n.a,s=r===void 0?1:r;return on(e)&&on(t)&&on(i)?Ol({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,r=n.a,s=r===void 0?1:r;if(!on(e)||!on(t)||!on(i))return null;var o=zl({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return Bl(o)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,r=n.a,s=r===void 0?1:r;if(!on(e)||!on(t)||!on(i))return null;var o=function(a){return{h:ju(a.h),s:It(a.s,0,100),v:It(a.v,0,100),a:It(a.a)}}({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return Uu(o)},"hsv"]]},jl=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},Wm=function(n){return typeof n=="string"?jl(n.trim(),Nl.string):typeof n=="object"&&n!==null?jl(n,Nl.object):[null,void 0]},ao=function(n,e){var t=wr(n);return{h:t.h,s:It(t.s+100*e,0,100),l:t.l,a:t.a}},lo=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},Fl=function(n,e){var t=wr(n);return{h:t.h,s:t.s,l:It(t.l+100*e,0,100),a:t.a}},Ul=function(){function n(e){this.parsed=Wm(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return it(lo(this.rgba),2)},n.prototype.isDark=function(){return lo(this.rgba)<.5},n.prototype.isLight=function(){return lo(this.rgba)>=.5},n.prototype.toHex=function(){return e=oo(this.rgba),t=e.r,i=e.g,r=e.b,o=(s=e.a)<1?ss(it(255*s)):"","#"+ss(t)+ss(i)+ss(r)+o;var e,t,i,r,s,o},n.prototype.toRgb=function(){return oo(this.rgba)},n.prototype.toRgbString=function(){return e=oo(this.rgba),t=e.r,i=e.g,r=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+r+", "+s+")":"rgb("+t+", "+i+", "+r+")";var e,t,i,r,s},n.prototype.toHsl=function(){return Rl(wr(this.rgba))},n.prototype.toHslString=function(){return e=Rl(wr(this.rgba)),t=e.h,i=e.s,r=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+r+"%, "+s+")":"hsl("+t+", "+i+"%, "+r+"%)";var e,t,i,r,s},n.prototype.toHsv=function(){return e=Fu(this.rgba),{h:it(e.h),s:it(e.s),v:it(e.v),a:it(e.a,3)};var e},n.prototype.invert=function(){return Pt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Pt(ao(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Pt(ao(this.rgba,-e))},n.prototype.grayscale=function(){return Pt(ao(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Pt(Fl(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Pt(Fl(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Pt({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):it(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=wr(this.rgba);return typeof e=="number"?Pt({h:e,s:t.s,l:t.l,a:t.a}):it(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Pt(e).toHex()},n}(),Pt=function(n){return n instanceof Ul?n:new Ul(n)};function Ym(n,e,t,i,r,s,o){const a=n.shiftKey?l(e)*10:l(e);n.key==="ArrowUp"||n.key==="ArrowRight"?(t(t()+a),n.preventDefault()):n.key==="ArrowDown"||n.key==="ArrowLeft"?(t(t()-a),n.preventDefault()):n.key==="Home"?(t(l(i)),n.preventDefault()):n.key==="End"?(t(l(r)),n.preventDefault()):n.key==="PageUp"?(t(t()+l(e)*10),n.preventDefault()):n.key==="PageDown"&&(t(t()-l(e)*10),n.preventDefault()),t(s(t())),o.onInput?.(t())}var Xm=j('<input type="hidden">'),Zm=j('<div role="slider" tabindex="0"><div class="track svelte-lo47zs"></div> <div class="thumb svelte-lo47zs"></div></div> <!>',1);function xs(n,e){Ae(e,!0);let t=y(e,"min",3,0),i=y(e,"max",3,100),r=y(e,"step",3,1),s=y(e,"value",15,50),o=y(e,"ariaValueText",3,P=>P.toString()),a=y(e,"direction",3,"horizontal"),c=y(e,"reverse",3,!1),u=y(e,"keyboardOnly",3,!1),d=y(e,"slider",7),h=y(e,"isDragging",7,!1);const p=oe(()=>typeof t()=="string"?parseFloat(t()):t()),m=oe(()=>typeof i()=="string"?parseFloat(i()):i()),v=oe(()=>typeof r()=="string"?parseFloat(r()):r());function b(P){const O=1/l(v),z=Math.round(P*O)/O;return Math.max(l(p),Math.min(l(m),z))}const f={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function C(P){const O=d()?.[f[a()].clientSize]||120,z=d()?.getBoundingClientRect()[f[a()].offset]||0;let B=P[f[a()].client]-z;a()==="vertical"&&(B=-1*B+O),c()?s(l(m)-B/O*(l(m)-l(p))):s(B/O*(l(m)-l(p))+l(p)),s(b(s())),e.onInput?.(s())}function E(P){C(P),h(!0)}function _(P){h()&&C(P)}function T(){h(!1)}function U(P){P.preventDefault(),C({clientX:P.changedTouches[0].clientX,clientY:P.changedTouches[0].clientY})}const D=oe(()=>((s()-l(p))/(l(m)-l(p))*1).toFixed(4));var x=Zm();je("mousemove",Zt,_),je("mouseup",Zt,T);var g=K(x);let w;g.__keydown=[Ym,v,s,p,m,b,e],g.__mousedown=function(...P){(u()?void 0:E)?.apply(this,P)},g.__touchstart=function(...P){(u()?void 0:U)?.apply(this,P)},g.__touchmove=function(...P){(u()?void 0:U)?.apply(this,P)},g.__touchend=function(...P){(u()?void 0:U)?.apply(this,P)};let S;kt(g,P=>d(P),()=>d());var $=I(g,2);{var M=P=>{var O=Xm();Ke(O),ne(()=>{Re(O,"name",e.name),Dt(O,s())}),L(P,O)};Y($,P=>{e.name&&P(M)})}ne((P,O)=>{w=Tr(g,1,"slider svelte-lo47zs",null,w,P),Re(g,"aria-orientation",a()),Re(g,"aria-valuemax",l(m)),Re(g,"aria-valuemin",l(p)),Re(g,"aria-valuenow",s()),Re(g,"aria-valuetext",O),Re(g,"aria-label",e.ariaLabel),Re(g,"aria-labelledby",e.ariaLabelledBy),Re(g,"aria-controls",e.ariaControls),S=Jt(g,"",S,{"--position":l(D)})},[()=>({reverse:c()}),()=>o()(s())]),L(n,x),Me()}Ki(["keydown","mousedown","touchstart","touchmove","touchend"]);function co(n,e){n.preventDefault(),e(n.changedTouches[0])}var Jm=j('<div class="picker svelte-ckxa16"><!> <div class="s svelte-ckxa16"><!></div> <div class="v svelte-ckxa16"><!></div></div>');function Qm(n,e){Ae(e,!0);let t=y(e,"s",15),i=y(e,"v",15),r=Ct(void 0),s=!1,o=Ct(Se({x:100,y:0})),a=oe(()=>Pt({h:e.h,s:100,v:100,a:1}).toHex());function c(x,g,w){return Math.min(Math.max(g,x),w)}function u(x){if(!l(r))return;const{width:g,left:w,height:S,top:$}=l(r).getBoundingClientRect(),M={x:c(x.clientX-w,0,g),y:c(x.clientY-$,0,S)};t(c(M.x/g,0,1)*100),i(c((S-M.y)/S,0,1)*100),m()}function d(x){x.preventDefault(),x.button===0&&(s=!0,u(x))}function h(){s=!1}function p(x){s&&u(x)}ms(()=>{typeof t()=="number"&&typeof i()=="number"&&l(r)&&N(o,Se({x:t(),y:100-i()}))});function m(x={}){e.onInput({s:t(),v:i(),...x})}var v=Jm();je("mouseup",Zt,h),je("mousemove",Zt,p),v.__mousedown=d,v.__touchstart=[co,u],v.__touchmove=[co,u],v.__touchend=[co,u];let b;var f=H(v);ti(f,()=>e.components.pickerIndicator,(x,g)=>{g(x,{get pos(){return l(o)},get isDark(){return e.isDark}})});var C=I(f,2);let E;var _=H(C);xs(_,{get value(){return t()},onInput:x=>m({s:x}),keyboardOnly:!0,ariaValueText:x=>`${x}%`,get ariaLabel(){return e.texts.label.s}}),q(C);var T=I(C,2);let U;var D=H(T);xs(D,{get value(){return i()},onInput:x=>m({v:x}),keyboardOnly:!0,ariaValueText:x=>`${x}%`,direction:"vertical",get ariaLabel(){return e.texts.label.v}}),q(T),q(v),kt(v,x=>N(r,x),()=>l(r)),ne(()=>{b=Jt(v,"",b,{"--picker-color-bg":l(a)}),E=Jt(C,"",E,{"--pos-y":l(o).y}),U=Jt(T,"",U,{"--pos-x":l(o).x})}),L(n,v),Me()}Ki(["mousedown","touchstart","touchmove","touchend"]);var ev=j('<div class="picker-indicator svelte-1h8ycw8"></div>');function tv(n,e){Ae(e,!0);var t=ev();let i;ne(()=>i=Jt(t,"",i,{"--pos-x":e.pos.x,"--pos-y":e.pos.y})),L(n,t),Me()}function nv(n,e,t,i){const r=n.target;e.test(r.value)&&(t(r.value),i.onInput({hex:t()}))}var iv=j('<input class="svelte-qtukzs">'),rv=j('<input type="number" min="0" max="255" class="svelte-qtukzs"> <input type="number" min="0" max="255" class="svelte-qtukzs"> <input type="number" min="0" max="255" class="svelte-qtukzs">',1),sv=j('<input type="number" min="0" max="360" class="svelte-qtukzs"> <input type="number" min="0" max="100" class="svelte-qtukzs"> <input type="number" min="0" max="100" class="svelte-qtukzs">',1),ov=j('<input type="number" min="0" max="1" step="0.01" class="svelte-qtukzs">'),av=(n,e,t)=>N(e,Se(l(t))),lv=j('<button type="button" class="svelte-qtukzs"><span class="disappear svelte-qtukzs" aria-hidden="true"> </span> <span class="appear svelte-qtukzs"> </span></button>'),cv=j('<div class="button-like svelte-qtukzs"> </div>'),uv=j('<div class="text-input svelte-qtukzs"><div class="input-container svelte-qtukzs"><!> <!></div> <!></div>');function dv(n,e){Ae(e,!0);let t=y(e,"rgb",15),i=y(e,"hsv",15),r=y(e,"hex",15);const s=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;let o=Ct(Se(e.textInputModes[0]||"hex")),a=oe(()=>e.textInputModes[(e.textInputModes.indexOf(l(o))+1)%e.textInputModes.length]),c=oe(()=>Math.round(i().h)),u=oe(()=>Math.round(i().s)),d=oe(()=>Math.round(i().v)),h=oe(()=>i().a===void 0?1:Math.round(i().a*100)/100);function p(g){return function(w){t({...t(),[g]:parseFloat(w.target.value)}),e.onInput({rgb:t()})}}function m(g){return function(w){i({...i(),[g]:parseFloat(w.target.value)}),e.onInput({hsv:i()})}}var v=uv(),b=H(v),f=H(b);{var C=g=>{var w=iv();Ke(w),w.__input=[nv,s,r,e],Jt(w,"",{},{flex:3}),ne(()=>{Re(w,"aria-label",e.texts.label.hex),Dt(w,r())}),L(g,w)},E=(g,w)=>{{var S=M=>{var P=rv(),O=K(P);Ke(O);var z=oe(()=>p("r"));O.__input=function(...k){l(z)?.apply(this,k)};var B=I(O,2);Ke(B);var ue=oe(()=>p("g"));B.__input=function(...k){l(ue)?.apply(this,k)};var V=I(B,2);Ke(V);var A=oe(()=>p("b"));V.__input=function(...k){l(A)?.apply(this,k)},ne(()=>{Re(O,"aria-label",e.texts.label.r),Dt(O,t().r),Re(B,"aria-label",e.texts.label.g),Dt(B,t().g),Re(V,"aria-label",e.texts.label.b),Dt(V,t().b)}),L(M,P)},$=M=>{var P=sv(),O=K(P);Ke(O);var z=oe(()=>m("h"));O.__input=function(...k){l(z)?.apply(this,k)};var B=I(O,2);Ke(B);var ue=oe(()=>m("s"));B.__input=function(...k){l(ue)?.apply(this,k)};var V=I(B,2);Ke(V);var A=oe(()=>m("v"));V.__input=function(...k){l(A)?.apply(this,k)},ne(()=>{Re(O,"aria-label",e.texts.label.h),Dt(O,l(c)),Re(B,"aria-label",e.texts.label.s),Dt(B,l(u)),Re(V,"aria-label",e.texts.label.v),Dt(V,l(d))}),L(M,P)};Y(g,M=>{l(o)==="rgb"?M(S):M($,!1)},w)}};Y(f,g=>{l(o)==="hex"?g(C):g(E,!1)})}var _=I(f,2);{var T=g=>{var w=ov();Ke(w);var S=oe(()=>l(o)==="hsv"?m("a"):p("a"));w.__input=function(...$){l(S)?.apply(this,$)},ne(()=>{Re(w,"aria-label",e.texts.label.a),Dt(w,l(h))}),L(g,w)};Y(_,g=>{e.isAlpha&&g(T)})}q(b);var U=I(b,2);{var D=g=>{var w=lv();w.__click=[av,o,a];var S=H(w),$=H(S,!0);q(S);var M=I(S,2),P=H(M);q(M),q(w),ne(()=>{Te($,e.texts.color[l(o)]),Te(P,`${e.texts.changeTo??""} ${e.texts.color[l(a)]??""}`)}),L(g,w)},x=g=>{var w=cv(),S=H(w,!0);q(w),ne(()=>Te(S,e.texts.color[l(o)])),L(g,w)};Y(U,g=>{e.textInputModes.length>1?g(D):g(x,!1)})}q(v),L(n,v),Me()}Ki(["input","click"]);function os(n){n.preventDefault()}var hv=j('<label class="svelte-lemcb1"><div class="container svelte-lemcb1"><input type="color" aria-haspopup="dialog" class="svelte-lemcb1"> <div class="alpha svelte-lemcb1"></div> <div class="color svelte-lemcb1"></div></div> </label>');function pv(n,e){Ae(e,!0);let t=y(e,"labelElement",15),i=y(e,"name",3,void 0);var r=hv();r.__click=[os],r.__mousedown=[os];var s=H(r),o=H(s);Ke(o),o.__click=[os],o.__mousedown=[os];var a=I(o,4);let c;q(s);var u=I(s);q(r),kt(r,d=>t(d),()=>t()),ne(()=>{Re(r,"dir",e.dir),Re(o,"name",i()),Dt(o,e.hex),c=Jt(a,"",c,{background:e.hex}),Te(u,` ${e.label??""}`),r.dir=r.dir}),L(n,r),Me()}Ki(["click","mousedown"]);var mv=j('<div aria-label="color picker"><!></div>');function vv(n,e){Ae(e,!0);let t=y(e,"wrapper",15);var i=mv();let r;var s=H(i);Su(s,()=>e.children),q(i),kt(i,o=>t(o),()=>t()),ne(o=>{r=Tr(i,1,"wrapper svelte-h9ar9",null,r,o),Re(i,"role",e.isDialog?"dialog":void 0)},[()=>({"is-open":e.isOpen})]),L(n,i),Me()}const uo={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},qu="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function fv(n){return function(e){if(e.target===window)return;const t=e.target;if(!n.contains(t))return;const i=n.querySelectorAll(qu),r=i[0],s=i[i.length-1];function o(c){return c.code==="Tab"&&!c.shiftKey}function a(c){return c.code==="Tab"&&c.shiftKey}o(e)&&e.target===s?(e.preventDefault(),r.focus()):a(e)&&e.target===r&&(e.preventDefault(),s.focus())}}const bv=n=>{const e=n.querySelector(qu);e&&e.focus();const t=fv(n);return document.addEventListener("keydown",t),{destroy(){document.removeEventListener("keydown",t)}}};var _v=j('<label class="nullability-checkbox svelte-oskb5b"><div class="svelte-oskb5b"><input type="checkbox" class="svelte-oskb5b"> <span class="svelte-oskb5b"></span></div> </label>');function wv(n,e){Ae(e,!0);let t=y(e,"isUndefined",15);var i=_v(),r=H(i),s=H(r);Ke(s),Mn(2),q(r);var o=I(r);q(i),ne(()=>Te(o,` ${e.texts.label.withoutColor??""}`)),Fi(s,t),L(n,i),Me()}var gv=j('<input type="hidden">'),yv=j('<div class="a svelte-1y2jcbx"><!></div>'),Cv=j('<!> <!> <div class="h svelte-1y2jcbx"><!></div> <!> <!> <!>',1),xv=j("<span><!> <!></span>");function Pv(n,e){Ae(e,!0);let t=y(e,"components",19,()=>({})),i=y(e,"label",3,"Choose a color"),r=y(e,"name",3,void 0),s=y(e,"nullable",3,!1),o=y(e,"rgb",31,()=>Se(s()?null:{r:255,g:0,b:0,a:1})),a=y(e,"hsv",31,()=>Se(s()?null:{h:0,s:100,v:100,a:1})),c=y(e,"hex",31,()=>Se(s()?null:"#ff0000")),u=y(e,"color",15,null),d=y(e,"isDark",15,!1),h=y(e,"isAlpha",3,!0),p=y(e,"isDialog",3,!0),m=y(e,"isOpen",31,()=>!p()),v=y(e,"position",3,"responsive"),b=y(e,"dir",3,"ltr"),f=y(e,"isTextInput",3,!0),C=y(e,"textInputModes",19,()=>["hex","rgb","hsv"]),E=y(e,"sliderDirection",3,"vertical"),_=y(e,"disableCloseClickOutside",3,!1),T=y(e,"a11yColors",19,()=>[{bgHex:"#ffffff"}]),U=y(e,"a11yLevel",3,"AA"),D=y(e,"texts",3,void 0),x=y(e,"a11yTexts",3,void 0),g=Ct(Se({r:255,g:0,b:0,a:1})),w=Ct(Se({h:0,s:100,v:100,a:1})),S=Ct("#ff0000"),$=Ct(!1),M=Ct(Se(l($))),P=Ct(void 0),O=Ct(void 0),z=Ct(void 0),B,ue=Ct(1080),V=Ct(720);const A=12,k={pickerIndicator:tv,textInput:dv,input:pv,nullabilityCheckbox:wv,wrapper:vv};function W(){return{...k,...t()}}function Z(){return{label:{...uo.label,...D()?.label},color:{...uo.color,...D()?.color},changeTo:D()?.changeTo??uo.changeTo}}function ee({target:te}){p()&&(l(O)?.contains(te)||l(O)?.isSameNode(te)?m(!m()):m()&&!l(z)?.contains(te)&&!_()&&m(!1))}function ye({key:te,target:de}){!p()||!l(O)||!l(P)||(te==="Enter"&&l(O).contains(de)?(m(!m()),setTimeout(()=>{l(z)&&(B=bv(l(z)))})):te==="Escape"&&m()&&(m(!1),l(P).contains(de)&&(l(O)?.focus(),B?.destroy())))}function Qe(){return!(a()&&o()&&a().h===l(w).h&&a().s===l(w).s&&a().v===l(w).v&&a().a===l(w).a&&o().r===l(g).r&&o().g===l(g).g&&o().b===l(g).b&&o().a===l(g).a&&c()===l(S))}function pe(){if(l($)&&!l(M)){N(M,!0),a(null),o(null),c(null),e.onInput?.({color:u(),hsv:a(),rgb:o(),hex:c()});return}else if(l(M)&&!l($)){N(M,!1),a(Hn(l(w))),o(Hn(l(g))),c(Hn(l(S))),e.onInput?.({color:u(),hsv:a(),rgb:o(),hex:c()});return}else if(!a()&&!o()&&!c()){N($,Se(N(M,!0))),e.onInput?.({color:null,hsv:a(),rgb:o(),hex:c()});return}else if(!Qe())return;N($,!1),a()&&a().a===void 0&&a({...a(),a:1}),l(w).a===void 0&&N(w,Se({...l(w),a:1})),o()&&o().a===void 0&&o({...o(),a:1}),l(g).a===void 0&&N(g,Se({...l(g),a:1})),c()?.substring(7)==="ff"&&c(c().substring(0,7)),l(S)?.substring(7)==="ff"&&N(S,Se(l(S).substring(0,7))),a()&&(a().h!==l(w).h||a().s!==l(w).s||a().v!==l(w).v||a().a!==l(w).a||!o()&&!c())?(u(Pt(a())),o(u().toRgb()),c(u().toHex())):o()&&(o().r!==l(g).r||o().g!==l(g).g||o().b!==l(g).b||o().a!==l(g).a||!a()&&!c())?(u(Pt(o())),c(u().toHex()),a(u().toHsv())):c()&&(c()!==l(S)||!a()&&!o())&&(u(Pt(c())),o(u().toRgb()),a(u().toHsv())),u()&&d(u().isDark()),!(!c()||!a()||!o())&&(N(w,Se(Hn(a()))),N(g,Se(Hn(o()))),N(S,Se(c())),N(M,Se(l($))),e.onInput?.({color:u(),hsv:a(),rgb:o(),hex:c()}))}ms(()=>{(a()||o()||c())&&pe()}),ms(()=>{l($),pe()});function ae(te){return de=>{a()||(N($,!1),N(M,!1),a(Hn(l(w)))),a({...a(),[te]:de})}}function De(te){return de=>{a()||(N($,!1),N(M,!1),a(Hn(l(w)))),a({...a(),...Object.fromEntries(te.map(Oe=>[Oe,de[Oe]]))})}}async function se(){if(await Pu(),v()==="fixed"||!m()||!p()||!l(O)||!l(z))return;const te=l(z).getBoundingClientRect(),de=l(O).getBoundingClientRect();if((v()==="responsive"||v()==="responsive-y")&&(de.top+te.height+A>l(V)?l(z).style.top=`-${te.height+A}px`:l(z).style.top=`${de.height+A}px`),v()==="responsive"||v()==="responsive-x")if(b()==="rtl"){const Oe=de.left+de.width-te.width<0;console.log(Oe,de.left-te.width,de.left,te.width),Oe?l(z).style.left="0px":l(z).style.left=`${de.width-te.width}px`}else de.left+te.width>l(ue)?l(z).style.left=`${de.width-te.width}px`:l(z).style.left="0px"}ms(()=>{l(ue)&&l(V)&&m()&&se()});const Ce=oe(W);var Ee=xv();je("mousedown",Zt,ee),je("keyup",Zt,ye),je("scroll",Zt,se);var ke=H(Ee);{var me=te=>{var de=ve(),Oe=K(de);ti(Oe,()=>l(Ce).input,(qt,ft)=>{ft(qt,{get hex(){return c()},get label(){return i()},get name(){return r()},get dir(){return b()},get labelElement(){return l(O)},set labelElement(ct){N(O,Se(ct))}})}),L(te,de)},Be=(te,de)=>{{var Oe=qt=>{var ft=gv();Ke(ft),ne(()=>{Dt(ft,c()),Re(ft,"name",r())}),L(qt,ft)};Y(te,qt=>{r()&&qt(Oe)},de)}};Y(ke,te=>{p()?te(me):te(Be,!1)})}var et=I(ke,2);ti(et,()=>l(Ce).wrapper,(te,de)=>{de(te,{get isOpen(){return m()},get isDialog(){return p()},get wrapper(){return l(z)},set wrapper(Oe){N(z,Se(Oe))},children:(Oe,qt)=>{var ft=Cv(),ct=K(ft);{var rs=ut=>{var yt=ve(),bn=K(yt);const jn=oe(Z);ti(bn,()=>l(Ce).nullabilityCheckbox,(Fn,Un)=>{Un(Fn,{get texts(){return l(jn)},get isUndefined(){return l($)},set isUndefined(qn){N($,Se(qn))}})}),L(ut,yt)};Y(ct,ut=>{s()&&ut(rs)})}var tr=I(ct,2);const Js=oe(W),Qs=oe(()=>a()?.h??l(w).h),F=oe(()=>a()?.s??l(w).s),st=oe(()=>a()?.v??l(w).v),ot=oe(()=>De(["s","v"])),sn=oe(Z);Qm(tr,{get components(){return l(Js)},get h(){return l(Qs)},get s(){return l(F)},get v(){return l(st)},get onInput(){return l(ot)},get isDark(){return d()},get texts(){return l(sn)}});var nr=I(tr,2),eo=H(nr);const dp=oe(()=>a()?.h??l(w).h),hp=oe(()=>ae("h")),pp=oe(()=>E()==="vertical");xs(eo,{min:0,max:360,step:1,get value(){return l(dp)},get onInput(){return l(hp)},get direction(){return E()},get reverse(){return l(pp)},get ariaLabel(){return Z().label.h}}),q(nr);var Cl=I(nr,2);{var mp=ut=>{var yt=yv();let bn;var jn=H(yt);const Fn=oe(()=>a()?.a??l(w).a),Un=oe(()=>ae("a")),qn=oe(()=>E()==="vertical");xs(jn,{min:0,max:1,step:.01,get value(){return l(Fn)},get onInput(){return l(Un)},get direction(){return E()},get reverse(){return l(qn)},get ariaLabel(){return Z().label.a}}),q(yt),ne(to=>bn=Jt(yt,"",bn,{"--alphaless-color":to}),[()=>(c()?c():l(S)).substring(0,7)]),L(ut,yt)};Y(Cl,ut=>{h()&&ut(mp)})}var xl=I(Cl,2);{var vp=ut=>{var yt=ve(),bn=K(yt);const jn=oe(()=>c()??l(S)),Fn=oe(()=>o()??l(g)),Un=oe(()=>a()??l(w)),qn=oe(Z);ti(bn,()=>l(Ce).textInput,(to,_p)=>{_p(to,{get hex(){return l(jn)},get rgb(){return l(Fn)},get hsv(){return l(Un)},onInput:wi=>{wi.hsv?a(wi.hsv):wi.rgb?o(wi.rgb):wi.hex&&c(wi.hex)},get isAlpha(){return h()},get textInputModes(){return C()},get texts(){return l(qn)}})}),L(ut,yt)};Y(xl,ut=>{f()&&ut(vp)})}var fp=I(xl,2);{var bp=ut=>{var yt=ve(),bn=K(yt);const jn=oe(W),Fn=oe(()=>c()||"#00000000");ti(bn,()=>l(Ce).a11yNotice,(Un,qn)=>{qn(Un,{get components(){return l(jn)},get a11yColors(){return T()},get hex(){return l(Fn)},get a11yTexts(){return x()},get a11yLevel(){return U()}})}),L(ut,yt)};Y(fp,ut=>{W().a11yNotice&&ut(bp)})}L(Oe,ft)},$$slots:{default:!0}})}),q(Ee),kt(Ee,te=>N(P,te),()=>l(P)),ne(()=>Tr(Ee,1,`color-picker ${E()??""}`,"svelte-1y2jcbx")),Vl("innerWidth",te=>N(ue,Se(te))),Vl("innerHeight",te=>N(V,Se(te))),L(n,Ee),Me()}var Ev=j('<div class="text-xs"> </div> <input class="mb-2 border w-full">',1),kv=j("<option> </option>"),Sv=j('<div class="text-xs"> </div> <select class="border border-gray-300 rounded text-sm mb-2"></select>',1),Lv=j('<div class="text-xs"> </div> <div class="mb-1 flex items-baseline text-xs"><!> <input class="mb-2 border w-full"></div>',1),Vv=j('<div class="mb-1 flex items-baseline text-xs"><input class="mr-1" type="checkbox"> <label> </label></div>'),Av=j("<option> </option>"),Mv=j('<div class="text-xs"> </div> <select class="border border-gray-300 rounded mb-2"><option>-None-</option><!></select>',1),Dv=j("<!> <!> <!> <!> <!>",1),$v=j('<b class="mt-2"> </b> <!>',1),Tv=j('<b class="mt-2">Common Properties:</b> <div class="text-xs">id</div> <input class="mb-1 border w-full"> <!> <!>',1);function Iv(n,e){Ae(e,!1);const t=(d,h=Ep)=>{var p=Dv(),m=K(p);{var v=x=>{var g=Ev(),w=K(g),S=H(w,!0);q(w);var $=I(w,2);Ke($),ne(()=>{Te(S,h().name),Re($,"placeholder",h().placeholder)}),je("drop",$,M=>handleDrop(M,h().name)),_r($,()=>l(i).selectedLayout.props[h().name],M=>le(i,l(i).selectedLayout.props[h().name]=M)),L(x,g)};Y(m,x=>{h().type==="string"&&x(v)})}var b=I(m,2);{var f=x=>{var g=Sv(),w=K(g),S=H(w,!0);q(w);var $=I(w,2);ne(()=>{l(i),Ti(()=>{h()})}),Tt($,5,()=>h().choices,Kt,(M,P)=>{var O=kv(),z={},B=H(O,!0);q(O),ne(()=>{z!==(z=l(P))&&(O.value=(O.__value=l(P))==null?"":l(P)),Te(B,l(P))}),L(M,O)}),q($),ne(()=>Te(S,h().name)),Ii($,()=>l(i).selectedLayout.props[h().name],M=>le(i,l(i).selectedLayout.props[h().name]=M)),L(x,g)};Y(b,x=>{h().type==="choice"&&x(f)})}var C=I(b,2);{var E=x=>{var g=Lv(),w=K(g),S=H(w,!0);q(w);var $=I(w,2),M=H($);Pv(M,{label:"",get hex(){return l(i).selectedLayout.props[h().name]},set hex(O){le(i,l(i).selectedLayout.props[h().name]=O)},$$legacy:!0});var P=I(M,2);Ke(P),q($),ne(()=>{Te(S,h().name),Re(P,"placeholder",h().placeholder)}),je("drop",P,O=>handleDrop(O,h().name)),_r(P,()=>l(i).selectedLayout.props[h().name],O=>le(i,l(i).selectedLayout.props[h().name]=O)),L(x,g)};Y(C,x=>{h().type==="color"&&x(E)})}var _=I(C,2);{var T=x=>{var g=Vv(),w=H(g);Ke(w);var S=I(w,2),$=H(S,!0);q(S),q(g),ne(()=>{Re(w,"id",h().name),Re(S,"for",h().name),Te($,h().name)}),Fi(w,()=>l(i).selectedLayout.props[h().name],M=>le(i,l(i).selectedLayout.props[h().name]=M)),L(x,g)};Y(_,x=>{h().type==="boolean"&&x(T)})}var U=I(_,2);{var D=x=>{var g=Mv(),w=K(g),S=H(w,!0);q(w);var $=I(w,2);ne(()=>{l(i),Ti(()=>{h()})});var M=H($);M.value=(M.__value="__none__")==null?"":"__none__";var P=I(M);Tt(P,1,()=>Object.keys(l(i).data),Kt,(O,z)=>{var B=ve(),ue=K(B);{var V=A=>{var k=Av(),W={},Z=H(k,!0);q(k),ne(()=>{W!==(W=l(z))&&(k.value=(k.__value=l(z))==null?"":l(z)),Te(Z,l(z))}),L(A,k)};Y(ue,A=>{Array.isArray(l(i).data[l(z)])&&A(V)})}L(O,B)}),q($),ne(()=>Te(S,h().name)),Ii($,()=>l(i).selectedLayout.props[h().name],O=>le(i,l(i).selectedLayout.props[h().name]=O)),L(x,g)};Y(U,x=>{h().type=="dataSource"&&x(D)})}L(d,p)},i=he(_t("pageContext"));function r(d){l(i).selectedLayout.id&&delete l(i).namedPageObjects[l(i).selectedLayout.id],d&&le(i,l(i).selectedLayout.id=d)}rt();var s=Tv(),o=I(K(s),4);Ke(o);var a=I(o,2);Tt(a,1,()=>ku,Kt,(d,h)=>{t(d,()=>l(h))});var c=I(a,2);{var u=d=>{var h=$v(),p=K(h),m=H(p);q(p);var v=I(p,2);Tt(v,1,()=>l(i).selectedComponent?.getProps(),Kt,(b,f)=>{t(b,()=>l(f))}),ne(()=>Te(m,`${l(i).selectedLayout.type??""} Properties:`)),L(d,h)};Y(c,d=>{l(i).selectedComponent?.getProps&&d(u)})}ne(()=>Dt(o,l(i).selectedLayout.id)),je("blur",o,d=>r(d.target.value)),L(n,s),Me()}var Ov=j('<li><span class="svelte-14wv6i2"> </span></li>'),zv=j('<div class="box svelte-14wv6i2"><!></div>'),Rv=j('<ul class="svelte-14wv6i2"></ul> <!>',1);function Bv(n,e){let t=y(e,"items",19,()=>[]),i=y(e,"activeTabValue",7,1);const r=c=>()=>i(c);var s=Rv(),o=K(s);Tt(o,21,t,Kt,(c,u)=>{var d=Ov(),h=H(d),p=oe(()=>r(l(u).value)),m=H(h,!0);q(h),q(d),ne(()=>{Tr(d,1,Lp(i()===l(u).value?"active":""),"svelte-14wv6i2"),Te(m,l(u).label)}),je("click",h,function(...v){l(p)?.apply(this,v)}),L(c,d)}),q(o);var a=I(o,2);Tt(a,17,t,Kt,(c,u)=>{var d=ve(),h=K(d);{var p=m=>{var v=zv(),b=H(v);ti(b,()=>l(u).component,(f,C)=>{C(f,{})}),q(v),L(m,v)};Y(h,m=>{i()==l(u).value&&m(p)})}L(c,d)}),L(n,s)}var Nv=(n,e,t)=>e(n,l(t)),jv=(n,e,t)=>e(l(t)),Fv=j('<button class="btn btn-xs btn-neutral-content ml-2">Edit Script</button>'),Uv=j('<div class="text-xs">URL</div> <input class="mb-1 border w-full"> <label><input type="checkbox"> <span class="text-xs">New Tab</span></label>',1),qv=j("<option> </option>"),Hv=j("<option> </option>"),Kv=j('<div class="text-xs">property</div> <select class="border border-gray-300 rounded"></select>',1),Gv=j('<div class="text-xs">named object</div> <select class="border border-gray-300 rounded"></select> <!> <div class="text-xs">value</div> <input class="mb-1 border w-full">',1),Wv=j("<option> </option>"),Yv=j('<div class="text-xs">variable name</div> <select class="border border-gray-300 rounded"></select> <div class="text-xs">value</div> <input class="mb-1 border w-full">',1),Xv=j('<div class="flex flex-row items-baseline"> <select class="border border-gray-300 rounded"><option>Do Nothing</option><option>Script</option><option>Navigate</option><option>Set Property</option><option>Set Global</option></select> <!></div> <div class="ml-3"><!> <!> <!></div>',1),Zv=(n,e,t)=>e(n,l(t)),Jv=j('<div class="flex flex-row items-baseline"> <select class="border border-gray-300 rounded"><option>Do Nothing</option><option>Script</option><option>Navigate</option><option>Set Property</option><option>Set Global</option></select></div>'),Qv=(n,e)=>N(e,!1),ef=j('<!> <div class="flex w-full"><button class="btn btn-sm btn-primary ml-auto">Save</button></div>',1),tf=j("<!> <!>",1);function nf(n,e){Ae(e,!1);const t=he(_t("pageContext"));let i=he(!1),r=he("");function s(b){N(r,b),N(i,!0)}function o(b,f){if(b.target.value=="doNothing"){delete l(t).selectedLayout.actions[f];return}let C={type:b.target.value};switch(b.target.value){case"clientScript":C.script="";break;case"navigate":C.URL="",C.newTab=!1;break;case"setProperty":C.objectName="",C.property="",C.value="";break;case"setGlobal":C.variableName="",C.property="",C.value="";break}l(t).selectedLayout.actions||le(t,l(t).selectedLayout.actions={}),le(t,l(t).selectedLayout.actions[f]=C)}function a(b){return f=>{const C=f.matchBefore(/[\w.]+/);if(!C)return null;const E=C.text,_=E.split(".");let T=b;for(let x=0;x<_.length-1;x++)if(T=T[_[x]],!T)return null;const U=_[_.length-1],D=Object.keys(T).filter(x=>x.startsWith(U)).map(x=>({label:x,type:typeof T[x]=="function"?"function":"variable",detail:typeof T[x]=="function"?"(function)":`(value: ${typeof T[x]})`}));return D.length===0?null:{from:C.from+(E.lastIndexOf(".")+1||0),options:D,validFor:/^[\w$]*$/}}}const c={page:{endpoint1:"/blog",endpoint2:"/tutorial/svelte/welcome-to-svelte",exampleIcon:{color:"red",shape:"mdi:gear",size:32},exampleButton:{label:"B-label",color:"btn-warning"},exampleImage:{src:"https://media.formula1.com/image/upload/f_auto,c_limit,w_112,q_auto/nwp-navigation/f1-tv-logo"},exampleInput:{placeholder:"type here"},exampleText:{content:"text"},exampleSlider:{min:0,max:10}},pageVar:l(t).page},u=[Vp({override:[a(c)]})];rt();var d=tf(),h=K(d);{var p=b=>{var f=ve(),C=K(f);Tt(C,1,()=>l(t).selectedComponent.getEvents(),Kt,(E,_)=>{var T=ve(),U=K(T);{var D=g=>{var w=Xv(),S=K(w),$=H(S),M=I($);ne(()=>{l(t),Ti(()=>{l(_)})}),M.__change=[Nv,o,_];var P=H(M);P.value=(P.__value="doNothing")==null?"":"doNothing";var O=I(P);O.value=(O.__value="clientScript")==null?"":"clientScript";var z=I(O);z.value=(z.__value="navigate")==null?"":"navigate";var B=I(z);B.value=(B.__value="setProperty")==null?"":"setProperty";var ue=I(B);ue.value=(ue.__value="setGlobal")==null?"":"setGlobal",q(M);var V=I(M,2);{var A=ae=>{var De=Fv();De.__click=[jv,s,_],L(ae,De)};Y(V,ae=>{l(t).selectedLayout.actions[l(_)].type==="clientScript"&&ae(A)})}q(S);var k=I(S,2),W=H(k);{var Z=ae=>{var De=Uv(),se=I(K(De),2);Ke(se);var Ce=I(se,2),Ee=H(Ce);Ke(Ee),Mn(2),q(Ce),_r(se,()=>l(t).selectedLayout.actions[l(_)].URL,ke=>le(t,l(t).selectedLayout.actions[l(_)].URL=ke)),Fi(Ee,()=>l(t).selectedLayout.actions[l(_)].newTab,ke=>le(t,l(t).selectedLayout.actions[l(_)].newTab=ke)),L(ae,De)};Y(W,ae=>{l(t).selectedLayout.actions[l(_)].type==="navigate"&&ae(Z)})}var ee=I(W,2);{var ye=ae=>{var De=Gv(),se=I(K(De),2);ne(()=>{l(t),Ti(()=>{l(_)})}),Tt(se,5,()=>Object.keys(l(t).namedPageObjects),Kt,(me,Be)=>{var et=qv(),te={},de=H(et,!0);q(et),ne(()=>{no(et,l(t).selectedLayout.actions[l(_)].objectName==l(Be)),te!==(te=l(Be))&&(et.value=(et.__value=l(Be))==null?"":l(Be)),Te(de,l(Be))}),L(me,et)}),q(se);var Ce=I(se,2);{var Ee=me=>{var Be=Kv(),et=I(K(Be),2);ne(()=>{l(t),Ti(()=>{l(_)})}),Tt(et,5,()=>[...ku,...l(t).namedPageObjects[l(t).selectedLayout.actions[l(_)].objectName].getProps()],Kt,(te,de)=>{var Oe=Hv(),qt={},ft=H(Oe,!0);q(Oe),ne(()=>{no(Oe,l(t).selectedLayout.actions[l(_)].property==l(de).name),qt!==(qt=l(de).name)&&(Oe.value=(Oe.__value=l(de).name)==null?"":l(de).name),Te(ft,l(de).name)}),L(te,Oe)}),q(et),Ii(et,()=>l(t).selectedLayout.actions[l(_)].property,te=>le(t,l(t).selectedLayout.actions[l(_)].property=te)),L(me,Be)};Y(Ce,me=>{l(t).namedPageObjects[l(t).selectedLayout.actions[l(_)].objectName]?.getProps&&me(Ee)})}var ke=I(Ce,4);Ke(ke),Ii(se,()=>l(t).selectedLayout.actions[l(_)].objectName,me=>le(t,l(t).selectedLayout.actions[l(_)].objectName=me)),_r(ke,()=>l(t).selectedLayout.actions[l(_)].value,me=>le(t,l(t).selectedLayout.actions[l(_)].value=me)),L(ae,De)};Y(ee,ae=>{l(t).selectedLayout.actions[l(_)].type==="setProperty"&&ae(ye)})}var Qe=I(ee,2);{var pe=ae=>{var De=Yv(),se=I(K(De),2);ne(()=>{l(t),Ti(()=>{l(_)})}),Tt(se,5,()=>Object.keys(l(t).data).filter(Ee=>typeof l(t).data[Ee]!="object"),Kt,(Ee,ke)=>{var me=Wv(),Be={},et=H(me,!0);q(me),ne(()=>{no(me,l(t).selectedLayout.actions[l(_)].variableName==l(ke)),Be!==(Be=l(ke))&&(me.value=(me.__value=l(ke))==null?"":l(ke)),Te(et,l(ke))}),L(Ee,me)}),q(se);var Ce=I(se,4);Ke(Ce),Ii(se,()=>l(t).selectedLayout.actions[l(_)].variableName,Ee=>le(t,l(t).selectedLayout.actions[l(_)].variableName=Ee)),_r(Ce,()=>l(t).selectedLayout.actions[l(_)].value,Ee=>le(t,l(t).selectedLayout.actions[l(_)].value=Ee)),L(ae,De)};Y(Qe,ae=>{l(t).selectedLayout.actions[l(_)].type==="setGlobal"&&ae(pe)})}q(k),ne(()=>Te($,`${l(_)??""}: `)),Ii(M,()=>l(t).selectedLayout.actions[l(_)].type,ae=>le(t,l(t).selectedLayout.actions[l(_)].type=ae)),L(g,w)},x=g=>{var w=Jv(),S=H(w),$=I(S);$.__change=[Zv,o,_];var M=H($);M.value=(M.__value="doNothing")==null?"":"doNothing";var P=I(M);P.value=(P.__value="clientScript")==null?"":"clientScript";var O=I(P);O.value=(O.__value="navigate")==null?"":"navigate";var z=I(O);z.value=(z.__value="setProperty")==null?"":"setProperty";var B=I(z);B.value=(B.__value="setGlobal")==null?"":"setGlobal",q($),q(w),ne(()=>Te(S,`${l(_)??""}: `)),L(g,w)};Y(U,g=>{l(t).selectedLayout.actions?.[l(_)]?g(D):g(x,!1)})}L(E,T)}),L(b,f)};Y(h,b=>{l(t).selectedComponent.getEvents&&b(p)})}var m=I(h,2);{var v=b=>{Ap(b,{get showModal(){return l(i)},set showModal(C){N(i,C)},header:C=>{Mn();var E=la('Scripts have access to "page", "data", and "self" objects');L(C,E)},children:(C,E)=>{var _=ef(),T=K(_);const U=ca(Dp);Mp(T,{get lang(){return l(U)},extensions:u,get value(){return l(t).selectedLayout.actions[l(r)].script},set value(g){le(t,l(t).selectedLayout.actions[l(r)].script=g)},$$legacy:!0});var D=I(T,2),x=H(D);x.__click=[Qv,i],q(D),L(C,_)},$$slots:{header:!0,default:!0},$$legacy:!0})};Y(m,b=>{l(i)&&b(v)})}L(n,d),Me()}Ki(["change","click"]);var rf=j(" <!><br>",1),sf=j("<b></b> <p></p> <!>",1);function of(n,e){Ae(e,!1);const t=_t("pageContext");rt();var i=sf(),r=K(i);r.textContent="These are all the variables available to the page object. Access them in macros like {page.data.endpoint1}. Arrays can be used as data sources for tables and repeaters.";var s=I(r,4);Tt(s,1,()=>Object.keys(t.data),Kt,(o,a)=>{Mn();var c=rf(),u=K(c),d=I(u);{var h=p=>{var m=la("[]");L(p,m)};Y(d,p=>{Array.isArray(t.data[l(a)])&&p(h)})}Mn(),ne(()=>Te(u,`${l(a)??""} `)),L(o,c)}),L(n,i),Me()}var af=(n,e)=>e(),lf=(n,e)=>e(),cf=j('<div class="text-xs underline text-center"> </div> <!> <div class="flex gap-2"><button class="btn btn-primary btn-xs">Copy 📋</button> <button class="btn btn-primary btn-xs">Copy URI📋</button></div>',1),uf=j(`<div class="bordered shadow p-2 text-center text-xl font-bold">Properties Panel</div> To configure a component, please <!> click a component's ⛭ gear icon <label><input type="checkbox"> Edit Mode</label>`,1),df=j('<div class="h-screen bg-content-neutral"><ul class="menu w-full p-2"><!></ul></div>');function hf(n,e){Ae(e,!1);const t=he(_t("pageContext"));let i=[{label:"Properties",value:1,component:Iv},{label:"Actions",value:2,component:nf},{label:"Data",value:3,component:of}];function r(){navigator.clipboard.writeText(JSON.stringify(l(t).selectedLayout)),alert("Design has been copied to clipboard")}function s(){navigator.clipboard.writeText(encodeURI(JSON.stringify(l(t).selectedLayout))),alert("Design has been copied to clipboard as a URI-encoded string")}rt();var o=ve(),a=K(o);$p(a,{},c=>{var u=df(),d=H(u),h=H(d);{var p=v=>{var b=cf(),f=K(b),C=H(f,!0);q(f);var E=I(f,2);Bv(E,{items:i});var _=I(E,2),T=H(_);T.__click=[af,r];var U=I(T,2);U.__click=[lf,s],q(_),ne(()=>Te(C,l(t).selectedLayout.type)),L(v,b)},m=v=>{var b=uf(),f=I(K(b),2);{var C=T=>{var U=la(`switch to
					Edit Mode, then`);L(T,U)};Y(f,T=>{l(t).editMode||T(C)})}var E=I(f,2),_=H(E);Ke(_),Mn(),q(E),Is(E,(T,U)=>ua?.(T,U),()=>({content:"Press Option or Alt key to toggle"})),Fi(_,()=>l(t).editMode,T=>le(t,l(t).editMode=T)),L(v,b)};Y(h,v=>{l(t).selectedLayout?v(p):v(m,!1)})}q(d),q(u),L(c,u)}),L(n,o),Me()}Ki(["click"]);function $e(n){return n==null}function fa(n){return n!==null&&typeof n=="object"}function qo(n){return n!==null&&typeof n=="object"}function pf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function oi(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,r)=>{const s=n[r],o=e[r];return qo(s)&&qo(o)?Object.assign(Object.assign({},i),{[r]:oi(s,o)}):Object.assign(Object.assign({},i),{[r]:r in e?o:s})},{})}function mf(n){return fa(n)?"target"in n:!1}const vf={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let jt=class $i{static alreadyDisposed(){return new $i({type:"alreadydisposed"})}static notBindable(){return new $i({type:"notbindable"})}static notCompatible(e,t){return new $i({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new $i({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new $i({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=vf[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},ql=class Hu{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!Hu.isBindable(i))throw jt.notBindable();if(!(e in i))throw jt.propertyNotFound(e);i[e]=t}},lt=class{constructor(){this.observers_={}}on(e,t,i){var r;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:t,key:(r=i?.key)!==null&&r!==void 0?r:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(r=>r.key!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(r=>{r.handler(t)})}},ff=class{constructor(e,t){var i;this.constraint_=t?.constraint,this.equals_=(i=t?.equals)!==null&&i!==void 0?i:(r,s)=>r===s,this.emitter=new lt,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,r)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:r,sender:this}))}},bf=class{constructor(e){this.emitter=new lt,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:this.value_,sender:this}))}},_f=class{constructor(e){this.emitter=new lt,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function qe(n,e){const t=e?.constraint,i=e?.equals;return!t&&!i?new bf(n):new ff(n,e)}function wf(n){return[new _f(n),(e,t)=>{n.setRawValue(e,t)}]}let Q=class Ku{constructor(e){this.emitter=new lt,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,r)=>Object.assign(i,{[r]:qe(e[r])}),{})}static fromObject(e){const t=this.createCore(e);return new Ku(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}},Rr=class{constructor(e){this.values=Q.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}},Os=class{constructor(e){this.values=Q.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let r=e;return $e(i)||(r=Math.max(r,i)),$e(t)||(r=Math.min(r,t)),r}},Gu=class{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}},gf=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const yf={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};let Cf=class{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=yf[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const xf={"+":n=>n,"-":n=>-n,"~":n=>~n};let Pf=class{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=xf[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function ba(n){return(e,t)=>{for(let i=0;i<n.length;i++){const r=n[i](e,t);if(r!=="")return r}return""}}function Cr(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Ef(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function xr(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function kf(n,e){const t=xr(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const r=xr(n,e);return r===""?"":i+r}function _a(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=kf(n,e);return i===""?"":t+i}function Wu(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=Ef(n,e);return e+=i.length,i===""?"":i+xr(n,e)}function Sf(n,e){const t=Wu(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const r=xr(n,e);return e+=r.length,t+i+r+_a(n,e)}function Lf(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=xr(n,e);return e+=i.length,i===""?"":t+i+_a(n,e)}function Vf(n,e){const t=Wu(n,e);return e+=t.length,t===""?"":t+_a(n,e)}const Af=ba([Sf,Lf,Vf]);function Mf(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Df(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=Mf(n,e);return i===""?"":t+i}function $f(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Tf(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=$f(n,e);return i===""?"":t+i}function If(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Of(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=If(n,e);return i===""?"":t+i}const zf=ba([Df,Tf,Of]),Rf=ba([zf,Af]);function Bf(n,e){const t=Rf(n,e);return e+=t.length,t===""?null:{evaluable:new gf(t),cursor:e}}function Nf(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=Xu(n,e);if(!i)return null;e=i.cursor,e+=Cr(n,e).length;const r=n.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:i.evaluable,cursor:e}}function jf(n,e){var t;return(t=Bf(n,e))!==null&&t!==void 0?t:Nf(n,e)}function Yu(n,e){const t=jf(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const r=Yu(n,e);return r?(e=r.cursor,{cursor:e,evaluable:new Pf(i,r.evaluable)}):null}function Ff(n,e,t){t+=Cr(e,t).length;const i=n.filter(r=>e.startsWith(r,t))[0];return i?(t+=i.length,t+=Cr(e,t).length,{cursor:t,operator:i}):null}function Uf(n,e){return(t,i)=>{const r=n(t,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const o=Ff(e,t,i);if(!o)break;i=o.cursor;const a=n(t,i);if(!a)return null;i=a.cursor,s=new Cf(o.operator,s,a.evaluable)}return s?{cursor:i,evaluable:s}:null}}const qf=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>Uf(n,e),Yu);function Xu(n,e){return e+=Cr(n,e).length,qf(n,e)}function Hf(n){const e=Xu(n,0);return!e||e.cursor+Cr(n,e.cursor).length!==n.length?null:e.evaluable}function at(n){var e;const t=Hf(n);return(e=t?.evaluate())!==null&&e!==void 0?e:null}function Br(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=at(n);if(!$e(e))return e}return 0}function Ze(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function ie(n,e,t,i,r){const s=(n-e)/(t-e);return i+s*(r-i)}function Ho(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Fe(n,e,t){return Math.min(Math.max(n,e),t)}function Zu(n,e){return(n%e+e)%e}function Kf(n,e){return $e(n.step)?Math.max(Ho(e),2):Ho(n.step)}function Ju(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function Gf(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function Nr(n,e){return $e(n.step)?null:new Gu(n.step,e)}function jr(n){return!$e(n.max)&&!$e(n.min)?new Rr({max:n.max,min:n.min}):!$e(n.max)||!$e(n.min)?new Os({max:n.max,min:n.min}):null}function Gi(n,e){var t,i,r;return{formatter:(t=n.format)!==null&&t!==void 0?t:Ze(Kf(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:Ju(n),pointerScale:(r=n.pointerScale)!==null&&r!==void 0?r:Gf(n,e)}}function Fr(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function wa(n){return{constraint:n.constraint,textProps:Q.fromObject(Gi(n.params,n.initialValue))}}let zn=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},vi=class{constructor(e){this.target=e}},zs=class extends vi{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}},Wf=class extends vi{constructor(e,t){super(e),this.expanded=t}},Yf=class extends vi{constructor(e,t){super(e),this.index=t}},Xf=class extends vi{constructor(e,t){super(e),this.native=t}},ga=class extends zn{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new lt,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new zs(this,t.binding.target.read(),e.options.last))}};function Zf(n,e){const i=Object.keys(e).reduce((r,s)=>{if(r===void 0)return;const o=e[s],a=o(n[s]);return a.succeeded?Object.assign(Object.assign({},r),{[s]:a.value}):void 0},{});return i}function Jf(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const r=e(i);if(!(!r.succeeded||r.value===void 0))return[...t,r.value]},[])}function Qf(n){return n===null?!1:typeof n=="object"}function an(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function Hl(n){return{custom:e=>an(e)(n),boolean:an(e=>typeof e=="boolean"?e:void 0)(n),number:an(e=>typeof e=="number"?e:void 0)(n),string:an(e=>typeof e=="string"?e:void 0)(n),function:an(e=>typeof e=="function"?e:void 0)(n),constant:e=>an(t=>t===e?e:void 0)(n),raw:an(e=>e)(n),object:e=>an(t=>{if(Qf(t))return Zf(t,e)})(n),array:e=>an(t=>{if(Array.isArray(t))return Jf(t,e)})(n)}}const Ko={optional:Hl(!0),required:Hl(!1)};function ge(n,e){const t=e(Ko),i=Ko.required.object(t)(n);return i.succeeded?i.value:void 0}function Wt(n,e,t,i){if(e&&!e(n))return!1;const r=ge(n,t);return r?i(r):!1}function Yt(n,e){var t;return oi((t=n?.())!==null&&t!==void 0?t:{},e)}function fs(n){return"value"in n}function eb(n){if(!fa(n)||!("binding"in n))return!1;const e=n.binding;return mf(e)}const xe="http://www.w3.org/2000/svg";function Ps(n){n.offsetHeight}function tb(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function Ur(n){return n.ontouchstart!==void 0}function nb(){return globalThis}function ib(){return nb().document}function rb(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const sb={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Rs(n,e){const t=n.createElementNS(xe,"svg");return t.innerHTML=sb[e],t}function Qu(n,e,t){n.insertBefore(e,n.children[t])}function Pr(n){n.parentElement&&n.parentElement.removeChild(n)}function ed(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function ob(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function Bs(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function Bt(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function Et(n,e,t){Bt(n.value(e),t)}const ab="tp";function G(n){return(t,i)=>[ab,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const or=G("lbl");function lb(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(r=>n.createTextNode(r)).forEach((r,s)=>{s>0&&t.appendChild(n.createElement("br")),t.appendChild(r)}),t}let td=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(or()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(or("l")),Et(t.props,"label",s=>{$e(s)?this.element.classList.add(or(void 0,"nol")):(this.element.classList.remove(or(void 0,"nol")),ob(i),i.appendChild(lb(e,s)))}),this.element.appendChild(i),this.labelElement=i;const r=e.createElement("div");r.classList.add(or("v")),this.element.appendChild(r),this.valueElement=r}},qr=class{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new td(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Wt(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Yt(null,{label:this.props.get("label")})}};function cb(){return["veryfirst","first","last","verylast"]}const Kl=G(""),Gl={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let Wi=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{cb().forEach(i=>{t.classList.remove(Kl(void 0,Gl[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(Kl(void 0,Gl[i]))})}),this.viewProps.handleDispose(()=>{Pr(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Wt(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Yt(null,Object.assign({},this.viewProps.exportState()))}},Es=class extends Wi{constructor(e,t){if(t.value!==t.valueController.value)throw jt.shouldNeverHappen();const i=t.valueController.viewProps,r=new qr(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new td(e,{props:t.props,viewProps:i}),viewProps:i})),this.labelController=r,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Wt(e,t=>{var i,r,s;return super.importState(t)&&this.labelController.importProps(t)&&((s=(r=(i=this.valueController).importProps)===null||r===void 0?void 0:r.call(i,e))!==null&&s!==void 0?s:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,i;return Yt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}))}};function nd(n,e){for(;n.length<e;)n.push(void 0)}function ub(n){const e=[];return nd(e,n),e}function db(n){const e=n.indexOf(void 0);return e<0?n:n.slice(0,e)}function hb(n,e){const t=[...db(n),e];return t.length>n.length?t.splice(0,t.length-n.length):nd(t,n.length),t}let pb=class extends zn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,s=>{i(new Xf(this,s.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}};function mb(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function vn(n,e){return t=>{mb(n,e,t)}}function ya(n,e){Bt(n,t=>{e.textContent=t??""})}const ho=G("btn");let vb=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ho()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(ho("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(ho("t")),ya(t.props.value("title"),r),this.buttonElement.appendChild(r)}},id=class{constructor(e,t){this.emitter=new lt,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new vb(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Wt(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Yt(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}},Wl=class extends Wi{constructor(e,t){const i=new id(e,{props:t.buttonProps,viewProps:t.viewProps}),r=new qr(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:r.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=r}importState(e){return Wt(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Yt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},fb=class{constructor(e){const[t,i]=e.split("-"),r=t.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const bb=new fb("2.0.5");function Pe(n){return Object.assign({core:bb},n)}Pe({id:"button",type:"blade",accept(n){const e=ge(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new Wl(n.document,{blade:n.blade,buttonProps:Q.fromObject({title:n.params.title}),labelProps:Q.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof Wl?new pb(n.controller):null}});function _b(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function wb(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function gb(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function yb(n){return fa(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Cb(n,e){if(!ql.isBindable(n))throw jt.notBindable();return new ql(n,e)}let xb=class{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new lt,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const r=i??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,Cb(e,t),r),a=this.pool_.createBindingApi(o);return this.add(a,r.index)}addFolder(e){return wb(this,e)}addButton(e){return _b(this,e)}addTab(e){return gb(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),r=this.pool_.createApi(i);return this.add(r,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{yb(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),r=eb(t.value)?t.value.binding:null;this.emitter_.emit("change",new zs(i,r?r.target.read():t.value.rawValue,e.options.last))}},Ca=class extends zn{constructor(e,t){super(e),this.rackApi_=new xb(e.rackController,t)}refresh(){this.rackApi_.refresh()}},xa=class extends Wi{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Wt(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,r)=>i.importState(t.children[r])))}exportState(){return Yt(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function Go(n){return"rackController"in n}let Pb=class{constructor(e){this.emitter=new lt,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw jt.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(r=>{this.cache_.delete(r)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function Eb(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(fs(i)&&i.value===e)return i}return null}function kb(n){return Go(n)?n.rackController.rack.bcSet_:null}let Sb=class{constructor(e){var t,i;this.emitter=new lt,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Pb(kb),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),fs(i))i.value.emitter.on("change",this.onChildValueChange_);else if(Go(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(fs(i))i.value.emitter.off("change",this.onChildValueChange_);else if(Go(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(r=>{const s=[];r===t&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),r===i&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),r.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=Eb(this.find(fs),e.sender);if(!t)throw jt.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},Pa=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new Sb({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Qu(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Pr(e.bladeController.view.element)}};function rd(){return new Q({positions:qe([],{equals:pf})})}let Hr=class sd extends Q{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=Q.createCore(t);return new sd(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!$e(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};Et(this,"expanded",i),Et(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function Lb(n,e){let t=0;return tb(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),Ps(e),t=e.clientHeight,n.set("temporaryExpanded",null),Ps(e)}),t}function Yl(n,e){e.style.height=n.styleHeight}function Kr(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),$e(n.get("expandedHeight"))){const t=Lb(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),Ps(e)}),n.emitter.on("change",()=>{Yl(n,e)}),Yl(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}let Vb=class extends Ca{constructor(e,t){super(e,t),this.emitter_=new lt,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new Wf(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}};const od=G("cnt");let Ab=class{constructor(e,t){var i;this.className_=G((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),od()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Et(this.foldable_,"completed",vn(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),Et(t.props,"title",u=>{$e(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),ya(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const c=e.createElement("div");c.classList.add(this.className_("c")),this.element.appendChild(c),this.containerElement=c}},Xl=class extends xa{constructor(e,t){var i;const r=Hr.create((i=t.expanded)!==null&&i!==void 0?i:!0),s=new Ab(e,{foldable:r,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Pa({blade:t.blade,element:s.containerElement,root:t.root,viewProps:t.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=r,Kr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Wt(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Yt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};Pe({id:"folder",type:"blade",accept(n){const e=ge(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new Xl(n.document,{blade:n.blade,expanded:n.params.expanded,props:Q.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Xl?new Vb(n.controller,n.pool):null}});const Mb=G("");function Zl(n,e){return vn(n,Mb(void 0,e))}let ai=class ad extends Q{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=wf(qe(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,r;const s=e??{};return new ad(Q.createCore({disabled:(t=s.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=s.hidden)!==null&&i!==void 0?i:!1,parent:(r=s.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Bt(this.globalDisabled_,Zl(e,"disabled")),Et(this,"hidden",Zl(e,"hidden"))}bindDisabled(e){Bt(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){Bt(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Jl=G("tbp");let Db=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Jl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Jl("c")),this.element.appendChild(i),this.containerElement=i}};const ar=G("tbi");let $b=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ar()),t.viewProps.bindClassModifiers(this.element),Et(t.props,"selected",s=>{s?this.element.classList.add(ar(void 0,"sel")):this.element.classList.remove(ar(void 0,"sel"))});const i=e.createElement("button");i.classList.add(ar("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(ar("t")),ya(t.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}},Tb=class{constructor(e,t){this.emitter=new lt,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new $b(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},Wo=class extends xa{constructor(e,t){const i=new Db(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Pa({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Tb(e,{props:t.itemProps,viewProps:ai.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,Et(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(e){return Wt(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Yt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},Ib=class extends Ca{constructor(e,t){super(e,t),this.emitter_=new lt,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new Wo(t,{blade:rd(),itemProps:Q.fromObject({selected:!1,title:e.title}),props:Q.fromObject({selected:!1}),viewProps:ai.create()}),r=this.pool_.createApi(i);return this.rackApi_.add(r,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new Yf(this,e.rawValue))}},Ob=class extends Ca{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}};const Ql=-1;let zb=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=qe(!0),this.selectedIndex=qe(Ql),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ql,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,r)=>{i.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}};const lr=G("tab");let Rb=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(lr(),od()),t.viewProps.bindClassModifiers(this.element),Bt(t.empty,vn(this.element,lr(void 0,"nop")));const i=e.createElement("div");i.classList.add(lr("t")),this.element.appendChild(i),this.itemsElement=i;const r=e.createElement("div");r.classList.add(lr("i")),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(lr("c")),this.element.appendChild(s),this.contentsElement=s}},ec=class extends xa{constructor(e,t){const i=new zb,r=new Rb(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Pa({blade:t.blade,element:r.contentsElement,viewProps:t.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;Qu(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Pr(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}};Pe({id:"tab",type:"blade",accept(n){const e=ge(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new ec(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new Wo(n.document,{blade:rd(),itemProps:Q.fromObject({selected:!1,title:t.title}),props:Q.fromObject({selected:!1}),viewProps:ai.create()});e.add(i)}),e},api(n){return n.controller instanceof ec?new Ib(n.controller,n.pool):n.controller instanceof Wo?new Ob(n.controller,n.pool):null}});let Ea=class extends ga{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},ld=class{constructor(){this.disabled=!1,this.emitter=new lt}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},cd=class{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new lt,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},nn=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}};function Er(n,e){if(n instanceof e)return n;if(n instanceof nn){const t=n.constraints.reduce((i,r)=>i||(r instanceof e?r:null),null);if(t)return t}return null}let Ns=class{constructor(e){this.values=Q.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(r=>r.value===e).length>0?e:t[0].value}};function js(n){var e;const t=Ko;if(Array.isArray(n))return(e=ge({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function ud(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function ka(n){return $e(n)?null:new Ns(ud(n))}const po=G("lst");let Bb=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(po()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(po("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const r=e.createElement("div");r.classList.add(po("m")),r.appendChild(Rs(e,"dropdown")),this.element.appendChild(r),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,Et(this.props_,"options",s=>{ed(this.selectElement),s.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Ui=class{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Bb(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return Wt(e,null,t=>({options:t.required.custom(js)}),t=>(this.props.set("options",ud(t.options)),!0))}exportProps(){return Yt(null,{options:this.props.get("options")})}};const tc=G("pop");let Nb=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(tc()),t.viewProps.bindClassModifiers(this.element),Bt(t.shows,vn(this.element,tc(void 0,"v")))}},Fs=class{constructor(e,t){this.shows=qe(!1),this.viewProps=t.viewProps,this.view=new Nb(e,{shows:this.shows,viewProps:this.viewProps})}};const nc=G("txt");let jb=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(nc()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(nc("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},Us=class{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new jb(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);$e(r)||(this.value.rawValue=r),this.view.refresh()}};function Fb(n){return String(n)}function Sa(n){return n==="false"?!1:!!n}function ic(n){return Fb(n)}function Ub(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const qb=Ze(0);function ks(n){return qb(n)+"%"}function La(n){return String(n)}function Yo(n){return n}function Rn({primary:n,secondary:e,forward:t,backward:i}){let r=!1;function s(o){r||(r=!0,o(),r=!1)}n.emitter.on("change",o=>{s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Xe(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Dn(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function Ft(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function Hb(n){return n==="ArrowUp"||n==="ArrowDown"}function kr(n){return Hb(n)||n==="ArrowLeft"||n==="ArrowRight"}function mo(n,e){var t,i;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:n.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:n.pageY-(((i=r&&r.scrollY)!==null&&i!==void 0?i:0)+s.top)}}let tt=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new lt,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(mo(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(mo(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(mo(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-r.left,y:i.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const Vt=G("txt");let Kb=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Vt(),Vt(void 0,"num")),t.arrayPosition&&this.element.classList.add(Vt(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Vt("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Vt()),this.inputElement.classList.add(Vt("i"));const r=e.createElement("div");r.classList.add(Vt("k")),this.element.appendChild(r),this.knobElement=r;const s=e.createElementNS(xe,"svg");s.classList.add(Vt("g")),this.knobElement.appendChild(s);const o=e.createElementNS(xe,"path");o.classList.add(Vt("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(xe,"path");a.classList.add(Vt("gh")),s.appendChild(a),this.guideHeadElem_=a;const c=e.createElement("div");c.classList.add(G("tt")()),this.knobElement.appendChild(c),this.tooltipElem_=c,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Vt(void 0,"drg"));return}this.element.classList.add(Vt(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),r=Fe(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+r},0 L${i},4 L${i+r},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},Yi=class{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=qe(null),this.view=new Kb(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new tt(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),s=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return r!==void 0&&(o=Math.max(o,r)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);$e(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(e){const t=Xe(this.props.get("keyScale"),Dn(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Xe(this.props.get("keyScale"),Dn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const vo=G("sld");let Gb=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(vo()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(vo("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const r=e.createElement("div");r.classList.add(vo("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=Fe(ie(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},Wb=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new Gb(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new tt(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(ie(Fe(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Xe(this.props.get("keyScale"),Ft(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){Xe(this.props.get("keyScale"),Ft(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const fo=G("sldtxt");let Yb=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(fo());const i=e.createElement("div");i.classList.add(fo("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(fo("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}},rc=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Wb(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new Yi(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new Yb(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Wt(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Yt(null,{max:e.get("max"),min:e.get("min")})}};function Xb(n){return{sliderProps:new Q({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new Q({formatter:qe(n.formatter),keyScale:n.keyScale,pointerScale:qe(n.pointerScale)})}}const Zb={containerUnitSize:"cnt-usz"};function dd(n){return`--${Zb[n]}`}class hd{constructor(e,t){const i=G(t.viewName);this.element=e.createElement("div"),this.element.classList.add(i()),t.viewProps.bindClassModifiers(this.element)}}function Sr(n){return Fr(n)}function ht(n){if(qo(n))return ge(n,Sr)}function un(n,e){if(!n)return;const t=[],i=Nr(n,e);i&&t.push(i);const r=jr(n);return r&&t.push(r),new nn(t)}function qs(n){if(n==="inline"||n==="popup")return n}function rn(n,e){n.write(e)}const as=G("ckb");let Jb=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(as()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(as("l")),this.element.appendChild(i),this.labelElement=i;const r=e.createElement("input");r.classList.add(as("i")),r.type="checkbox",this.labelElement.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(as("w")),this.labelElement.appendChild(s);const o=Rs(e,"check");s.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},Qb=class{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Jb(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}};function e_(n){const e=[],t=ka(n.options);return t&&e.push(t),new nn(e)}Pe({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=ge(e,i=>({options:i.optional.custom(js),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Sa,constraint:n=>e_(n.params),writer:n=>rn},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&Er(i,Ns);return r?new Ui(e,{props:new Q({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new Qb(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof Ui?new Ea(n.controller):null}});const Kn=G("col");let t_=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Kn()),t.foldable.bindExpandedClass(this.element,Kn(void 0,"expanded")),Et(t.foldable,"completed",vn(this.element,Kn(void 0,"cpl")));const i=e.createElement("div");i.classList.add(Kn("h")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Kn("s")),i.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(Kn("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Kn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};function n_(n,e,t){const i=Fe(n/255,0,1),r=Fe(e/255,0,1),s=Fe(t/255,0,1),o=Math.max(i,r,s),a=Math.min(i,r,s),c=o-a;let u=0,d=0;const h=(a+o)/2;return c!==0&&(d=c/(1-Math.abs(o+a-1)),i===o?u=(r-s)/c:r===o?u=2+(s-i)/c:u=4+(i-r)/c,u=u/6+(u<0?1:0)),[u*360,d*100,h*100]}function i_(n,e,t){const i=(n%360+360)%360,r=Fe(e/100,0,1),s=Fe(t/100,0,1),o=(1-Math.abs(2*s-1))*r,a=o*(1-Math.abs(i/60%2-1)),c=s-o/2;let u,d,h;return i>=0&&i<60?[u,d,h]=[o,a,0]:i>=60&&i<120?[u,d,h]=[a,o,0]:i>=120&&i<180?[u,d,h]=[0,o,a]:i>=180&&i<240?[u,d,h]=[0,a,o]:i>=240&&i<300?[u,d,h]=[a,0,o]:[u,d,h]=[o,0,a],[(u+c)*255,(d+c)*255,(h+c)*255]}function r_(n,e,t){const i=Fe(n/255,0,1),r=Fe(e/255,0,1),s=Fe(t/255,0,1),o=Math.max(i,r,s),a=Math.min(i,r,s),c=o-a;let u;c===0?u=0:o===i?u=60*(((r-s)/c%6+6)%6):o===r?u=60*((s-i)/c+2):u=60*((i-r)/c+4);const d=o===0?0:c/o,h=o;return[u,d*100,h*100]}function pd(n,e,t){const i=Zu(n,360),r=Fe(e/100,0,1),s=Fe(t/100,0,1),o=s*r,a=o*(1-Math.abs(i/60%2-1)),c=s-o;let u,d,h;return i>=0&&i<60?[u,d,h]=[o,a,0]:i>=60&&i<120?[u,d,h]=[a,o,0]:i>=120&&i<180?[u,d,h]=[0,o,a]:i>=180&&i<240?[u,d,h]=[0,a,o]:i>=240&&i<300?[u,d,h]=[a,0,o]:[u,d,h]=[o,0,a],[(u+c)*255,(d+c)*255,(h+c)*255]}function s_(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function o_(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function Qt(n){return[n[0],n[1],n[2]]}function Hs(n,e){return[n[0],n[1],n[2],e]}const a_={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:s_,rgb:i_},hsv:{hsl:o_,hsv:(n,e,t)=>[n,e,t],rgb:pd},rgb:{hsl:n_,hsv:r_,rgb:(n,e,t)=>[n,e,t]}};function qi(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function l_(n,e){return n===e?e:Zu(n,e)}function md(n,e,t){var i;const r=qi(e,t);return[e==="rgb"?Fe(n[0],0,r[0]):l_(n[0],r[0]),Fe(n[1],0,r[1]),Fe(n[2],0,r[2]),Fe((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function sc(n,e,t,i){const r=qi(e,t),s=qi(e,i);return n.map((o,a)=>o/r[a]*s[a])}function vd(n,e,t){const i=sc(n,e.mode,e.type,"int"),r=a_[e.mode][t.mode](...i);return sc(r,t.mode,"int",t.type)}let Ve=class fd{static black(){return new fd([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=md(e,t,this.type)}getComponents(e){return Hs(vd(Qt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const _n=G("colp");let c_=class{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(_n()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(_n("hsv"));const r=e.createElement("div");r.classList.add(_n("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),i.appendChild(r);const s=e.createElement("div");s.classList.add(_n("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),i.appendChild(s),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(_n("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const a=e.createElement("div");a.classList.add(_n("a"));const c=e.createElement("div");c.classList.add(_n("ap")),c.appendChild(this.alphaViews_.palette.element),a.appendChild(c);const u=e.createElement("div");u.classList.add(_n("at")),u.appendChild(this.alphaViews_.text.element),a.appendChild(u),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function u_(n){return n==="int"?"int":n==="float"?"float":void 0}function Va(n){return ge(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(u_)}),expanded:e.optional.boolean,picker:e.optional.custom(qs),readonly:e.optional.constant(!1)}))}function li(n){return n?.1:1}function bd(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}let Aa=class{constructor(e,t){this.type="float",this.mode=t,this.comps_=md(e,t,this.type)}getComponents(e){return Hs(vd(Qt(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const d_={int:(n,e)=>new Ve(n,e),float:(n,e)=>new Aa(n,e)};function Ma(n,e,t){return d_[t](n,e)}function h_(n){return n.type==="float"}function p_(n){return n.type==="int"}function m_(n){const e=n.getComponents(),t=qi(n.mode,"int");return new Ve([Math.round(ie(e[0],0,1,0,t[0])),Math.round(ie(e[1],0,1,0,t[1])),Math.round(ie(e[2],0,1,0,t[2])),e[3]],n.mode)}function v_(n){const e=n.getComponents(),t=qi(n.mode,"int");return new Aa([ie(e[0],0,t[0],0,1),ie(e[1],0,t[1],0,1),ie(e[2],0,t[2],0,1),e[3]],n.mode)}function pt(n,e){if(n.type===e)return n;if(p_(n)&&e==="float")return v_(n);if(h_(n)&&e==="int")return m_(n);throw jt.shouldNeverHappen()}function f_(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function Ot(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const b_={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function _d(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return b_[i](t)}function wd(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Ot(e[1],255),Ot(e[2],255),Ot(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function __(n){const e=wd(n);return e?new Ve(e,"rgb"):null}function gd(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Ot(e[1],255),Ot(e[2],255),Ot(e[3],255),Ot(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function w_(n){const e=gd(n);return e?new Ve(e,"rgb"):null}function yd(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[_d(e[1]),Ot(e[2],100),Ot(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function g_(n){const e=yd(n);return e?new Ve(e,"hsl"):null}function Cd(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[_d(e[1]),Ot(e[2],100),Ot(e[3],100),Ot(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function y_(n){const e=Cd(n);return e?new Ve(e,"hsl"):null}function xd(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function C_(n){const e=xd(n);return e?new Ve(e,"rgb"):null}function Pd(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ie(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),ie(parseInt(t[4],16),0,255,0,1)]:null}function x_(n){const e=Pd(n);return e?new Ve(e,"rgb"):null}function Ed(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function P_(n){return e=>{const t=Ed(e);return t?Ma(t,"rgb",n):null}}function kd(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function E_(n){return e=>{const t=kd(e);return t?Ma(t,"rgb",n):null}}const k_=[{parser:xd,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Pd,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:wd,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:gd,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:yd,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Cd,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Ed,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:kd,result:{alpha:!0,mode:"rgb",notation:"object"}}];function S_(n){return k_.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function L_(n,e="int"){const t=S_(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function Gr(n){const e=[C_,x_,__,w_,g_,y_];e.push(P_("int"),E_("int"));const t=Ub(e);return i=>{const r=t(i);return r?pt(r,n):null}}function V_(n){const e=Gr("int");if(typeof n!="string")return Ve.black();const t=e(n);return t??Ve.black()}function Sd(n){const e=Fe(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function Da(n,e="#"){const t=Qt(n.getComponents("rgb")).map(Sd).join("");return`${e}${t}`}function $a(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(Sd).join("");return`${e}${i}`}function Ld(n){const e=Ze(0),t=pt(n,"int");return`rgb(${Qt(t.getComponents("rgb")).map(r=>e(r)).join(", ")})`}function bs(n){const e=Ze(2),t=Ze(0);return`rgba(${pt(n,"int").getComponents("rgb").map((s,o)=>(o===3?e:t)(s)).join(", ")})`}function A_(n){const e=[Ze(0),ks,ks],t=pt(n,"int");return`hsl(${Qt(t.getComponents("hsl")).map((r,s)=>e[s](r)).join(", ")})`}function M_(n){const e=[Ze(0),ks,ks,Ze(2)];return`hsla(${pt(n,"int").getComponents("hsl").map((r,s)=>e[s](r)).join(", ")})`}function Vd(n,e){const t=Ze(e==="float"?2:0),i=["r","g","b"],r=pt(n,e);return`{${Qt(r.getComponents("rgb")).map((o,a)=>`${i[a]}: ${t(o)}`).join(", ")}}`}function D_(n){return e=>Vd(e,n)}function Ad(n,e){const t=Ze(2),i=Ze(e==="float"?2:0),r=["r","g","b","a"];return`{${pt(n,e).getComponents("rgb").map((a,c)=>{const u=c===3?t:i;return`${r[c]}: ${u(a)}`}).join(", ")}}`}function $_(n){return e=>Ad(e,n)}const T_=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:Da},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:$a},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Ld},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:bs},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:A_},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:M_},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:D_(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:$_(e)}],[])];function Md(n){return T_.reduce((e,t)=>e||(f_(t.format,n)?t.stringifier:null),null)}const cr=G("apl");let I_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(cr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(cr("b")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(cr("c")),i.appendChild(r),this.colorElem_=r;const s=e.createElement("div");s.classList.add(cr("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(cr("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new Ve([t[0],t[1],t[2],0],"rgb"),r=new Ve([t[0],t[1],t[2],255],"rgb"),s=["to right",bs(i),bs(r)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=bs(e);const o=ie(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}},O_=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new I_(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new tt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,r=this.value.rawValue,[s,o,a]=r.getComponents("hsv");this.value.setRawValue(new Ve([s,o,a,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Xe(li(!0),Ft(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new Ve([r,s,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Xe(li(!0),Ft(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const yi=G("coltxt");function z_(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,r)=>{const s=n.createElement("option");return s.textContent=r.text,s.value=r.value,i.appendChild(s),i},n.createDocumentFragment())),e}let R_=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(yi()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(yi("m")),this.modeElem_=z_(e),this.modeElem_.classList.add(yi("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(yi("mm")),r.appendChild(Rs(e,"dropdown")),i.appendChild(r),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(yi("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=t.inputViews,this.applyInputViews_(),Bt(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){ed(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(yi("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}};function B_(n){return Ze(n==="float"?2:0)}function N_(n,e,t){const i=qi(n,e)[t];return new Rr({min:0,max:i})}function j_(n,e,t){return new Yi(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:Q.fromObject({formatter:B_(e.colorType),keyScale:li(!1),pointerScale:e.colorType==="float"?.01:1}),value:qe(0,{constraint:N_(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function F_(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:at,viewProps:e.viewProps};return[0,1,2].map(i=>{const r=j_(n,t,i);return Rn({primary:e.value,secondary:r.value,forward(s){return pt(s,e.colorType).getComponents(e.colorMode)[i]},backward(s,o){const a=e.colorMode,u=pt(s,e.colorType).getComponents(a);u[i]=o;const d=Ma(Hs(Qt(u),u[3]),a,e.colorType);return pt(d,"int")}}),r})}function U_(n,e){const t=new Us(n,{parser:Gr("int"),props:Q.fromObject({formatter:Da}),value:qe(Ve.black()),viewProps:e.viewProps});return Rn({primary:e.value,secondary:t.value,forward:i=>new Ve(Qt(i.getComponents()),i.mode),backward:(i,r)=>new Ve(Hs(Qt(r.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function q_(n){return n!=="hex"}let H_=class{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=qe(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new R_(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return q_(t)?F_(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):U_(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}};const bo=G("hpl");let K_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(bo()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(bo("c")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(bo("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Ld(new Ve([t,100,100],"hsv"));const i=ie(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}},G_=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new K_(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new tt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=ie(Fe(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new Ve([i,s,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=Xe(li(!1),Ft(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new Ve([r+t,s,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Xe(li(!1),Ft(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const _o=G("svp"),oc=64;let W_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(_o()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=oc,i.width=oc,i.classList.add(_o("c")),this.element.appendChild(i),this.canvasElement=i;const r=e.createElement("div");r.classList.add(_o("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=rb(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,r,s),a=o.data;for(let d=0;d<s;d++)for(let h=0;h<r;h++){const p=ie(h,0,r,0,100),m=ie(d,0,s,100,0),v=pd(i[0],p,m),b=(d*r+h)*4;a[b]=v[0],a[b+1]=v[1],a[b+2]=v[2],a[b+3]=255}e.putImageData(o,0,0);const c=ie(i[1],0,100,0,100);this.markerElem_.style.left=`${c}%`;const u=ie(i[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}},Y_=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new W_(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new tt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=ie(e.point.x,0,e.bounds.width,0,100),r=ie(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Ve([s,i,r,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){kr(e.key)&&e.preventDefault();const[t,i,r,s]=this.value.rawValue.getComponents("hsv"),o=li(!1),a=Xe(o,Ft(e)),c=Xe(o,Dn(e));a===0&&c===0||this.value.setRawValue(new Ve([t,i+a,r+c,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=li(!1),i=Xe(t,Ft(e)),r=Xe(t,Dn(e));i===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},X_=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new G_(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Y_(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new O_(e,{value:this.value,viewProps:this.viewProps}),text:new Yi(e,{parser:at,props:Q.fromObject({pointerScale:.01,keyScale:.1,formatter:Ze(2)}),value:qe(0,{constraint:new Rr({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Rn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,r)=>{const s=i.getComponents();return s[3]=r,new Ve(s,i.mode)}}),this.textsC_=new H_(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new c_(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const wo=G("colsw");let Z_=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(wo()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(wo("sw")),this.element.appendChild(i),this.swatchElem_=i;const r=e.createElement("button");r.classList.add(wo("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=$a(e)}onValueChange_(){this.update_()}},J_=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Z_(e,{value:this.value,viewProps:this.viewProps})}},Ta=class{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Hr.create(t.expanded),this.swatchC_=new J_(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Us(e,{parser:t.parser,props:Q.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new t_(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Fs(e,{viewProps:this.viewProps}):null;const r=new X_(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Rn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Kr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Bs(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!Ur(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function Q_(n){return Qt(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function ew(n){return n.getComponents("rgb").reduce((e,t,i)=>{const r=Math.floor(i===3?t*255:t)&255;return e<<8|r},0)>>>0}function tw(n){return new Ve([n>>16&255,n>>8&255,n&255],"rgb")}function nw(n){return new Ve([n>>24&255,n>>16&255,n>>8&255,ie(n&255,0,255,0,1)],"rgb")}function iw(n){return typeof n!="number"?Ve.black():tw(n)}function rw(n){return typeof n!="number"?Ve.black():nw(n)}function _s(n,e){return typeof n!="object"||$e(n)?!1:e in n&&typeof n[e]=="number"}function Ia(n){return _s(n,"r")&&_s(n,"g")&&_s(n,"b")}function Oa(n){return Ia(n)&&_s(n,"a")}function Dd(n){return Ia(n)}function za(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let r=0;r<t.length;r++)if(t[r]!==i[r])return!1;return!0}function ac(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function sw(n){const e=Md(n);return e?(t,i)=>{rn(t,e(i))}:null}function ow(n){const e=n?ew:Q_;return(t,i)=>{rn(t,e(i))}}function aw(n,e,t){const r=pt(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b),n.writeProperty("a",r.a)}function lw(n,e,t){const r=pt(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b)}function cw(n,e){return(t,i)=>{n?aw(t,i,e):lw(t,i,e)}}function uw(n){var e;return!!(!((e=n?.color)===null||e===void 0)&&e.alpha)}function dw(n){return n?e=>$a(e,"0x"):e=>Da(e,"0x")}function hw(n){return"color"in n||n.view==="color"}Pe({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!hw(e))return null;const t=Va(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:uw(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?rw:iw,equals:za,writer:n=>ow(n.params.supportsAlpha)},controller:n=>{var e,t;return new Ta(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:dw(n.params.supportsAlpha),parser:Gr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function pw(n,e){if(!Dd(n))return pt(Ve.black(),e);if(e==="int"){const t=ac(n);return new Ve(t,"rgb")}if(e==="float"){const t=ac(n);return new Aa(t,"rgb")}return pt(Ve.black(),"int")}function mw(n){return Oa(n)}function vw(n){return e=>{const t=pw(e,n);return pt(t,"int")}}function fw(n,e){return t=>n?Ad(t,e):Vd(t,e)}Pe({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!Dd(n))return null;const i=Va(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=bd(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>vw(n.params.colorType),equals:za,writer:n=>cw(mw(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=Oa(n.initialValue);return new Ta(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:fw(i,n.params.colorType),parser:Gr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}});Pe({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=L_(n,bd(e));if(!t)return null;const i=Md(t);if(!i)return null;const r=Va(e);return r?{initialValue:n,params:Object.assign(Object.assign({},r),{format:t,stringifier:i})}:null},binding:{reader:()=>V_,equals:za,writer:n=>{const e=sw(n.params.format);if(!e)throw jt.notBindable();return e}},controller:n=>{var e,t;return new Ta(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:Gr("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});let $n=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,r)=>{var s,o;return(o=(s=this.components[r])===null||s===void 0?void 0:s.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}};const lc=G("pndtxt");let bw=class{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(lc()),this.textViews.forEach(i=>{const r=e.createElement("div");r.classList.add(lc("a")),r.appendChild(i.element),this.element.appendChild(r)})}};function _w(n,e,t){return new Yi(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:qe(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}let Bn=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,r)=>_w(e,t,r)),this.acs_.forEach((i,r)=>{Rn({primary:this.value,secondary:i.value,forward:s=>t.assembly.toComponents(s)[r],backward:(s,o)=>{const a=t.assembly.toComponents(s);return a[r]=o,t.assembly.fromComponents(a)}})}),this.view=new bw(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}},ww=class extends ga{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function gw(n,e){const t=[],i=Nr(n,e);i&&t.push(i);const r=jr(n);r&&t.push(r);const s=ka(n.options);return s&&t.push(s),new nn(t)}Pe({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=ge(e,i=>Object.assign(Object.assign({},Fr(i)),{options:i.optional.custom(js),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Br,constraint:n=>gw(n.params,n.initialValue),writer:n=>rn},controller:n=>{const e=n.value,t=n.constraint,i=t&&Er(t,Ns);if(i)return new Ui(n.document,{props:new Q({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const r=Gi(n.params,e.rawValue),s=t&&Er(t,Rr);return s?new rc(n.document,Object.assign(Object.assign({},Xb(Object.assign(Object.assign({},r),{keyScale:qe(r.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:at,value:e,viewProps:n.viewProps})):new Yi(n.document,{parser:at,props:Q.fromObject(r),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof rc?new ww(n.controller):n.controller.valueController instanceof Ui?new Ea(n.controller):null}});let Ln=class{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if($e(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}};const $d={toComponents:n=>n.getComponents(),fromComponents:n=>new Ln(...n)},Ci=G("p2d");let yw=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ci()),t.viewProps.bindClassModifiers(this.element),Bt(t.expanded,vn(this.element,Ci(void 0,"expanded")));const i=e.createElement("div");i.classList.add(Ci("h")),this.element.appendChild(i);const r=e.createElement("button");r.classList.add(Ci("b")),r.appendChild(Rs(e,"p2dpad")),t.viewProps.bindDisabled(r),i.appendChild(r),this.buttonElement=r;const s=e.createElement("div");if(s.classList.add(Ci("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Ci("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};const wn=G("p2dp");let Cw=class{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(wn()),t.layout==="popup"&&this.element.classList.add(wn(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(wn("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const r=e.createElementNS(xe,"svg");r.classList.add(wn("g")),this.padElement.appendChild(r),this.svgElem_=r;const s=e.createElementNS(xe,"line");s.classList.add(wn("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(xe,"line");o.classList.add(wn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(xe,"line");a.classList.add(wn("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const c=e.createElement("div");c.classList.add(wn("m")),this.padElement.appendChild(c),this.markerElem_=c,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),r=ie(e,-i,+i,0,100),s=ie(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function cc(n,e,t){return[Xe(e[0],Ft(n)),Xe(e[1],Dn(n))*(t?1:-1)]}let xw=class{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Cw(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new tt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),r=ie(e.point.x,0,e.bounds.width,-i,+i),s=ie(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new Ln(r,s),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){kr(e.key)&&e.preventDefault();const[t,i]=cc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new Ln(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=cc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Pw=class{constructor(e,t){var i,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Hr.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Fs(e,{viewProps:this.viewProps}):null;const s=new xw(e,{layout:t.pickerLayout,props:new Q({invertsY:qe(t.invertsY),max:qe(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new Bn(e,{assembly:$d,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new yw(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Rn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Kr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Bs(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!Ur(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function Ew(n){return Ln.isObject(n)?new Ln(n.x,n.y):new Ln}function kw(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function Sw(n,e){return new $n({assembly:$d,components:[un(Object.assign(Object.assign({},n),n.x),e.x),un(Object.assign(Object.assign({},n),n.y),e.y)]})}function uc(n,e){var t,i;if(!$e(n.min)||!$e(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const r=Ju(n);return Math.max(Math.abs(r)*10,Math.abs(e)*10)}function Lw(n,e){var t,i;const r=uc(oi(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),s=uc(oi(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(r,s)}function Vw(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}Pe({id:"input-point2d",type:"input",accept:(n,e)=>{if(!Ln.isObject(n))return null;const t=ge(e,i=>Object.assign(Object.assign({},Sr(i)),{expanded:i.optional.boolean,picker:i.optional.custom(qs),readonly:i.optional.constant(!1),x:i.optional.custom(ht),y:i.optional.object(Object.assign(Object.assign({},Sr(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>Ew,constraint:n=>Sw(n.params,n.initialValue),equals:Ln.equals,writer:()=>kw},controller:n=>{var e,t;const i=n.document,r=n.value,s=n.constraint,o=[n.params.x,n.params.y];return new Pw(i,{axes:r.rawValue.getComponents().map((a,c)=>{var u;return wa({constraint:s.components[c],initialValue:a,params:oi(n.params,(u=o[c])!==null&&u!==void 0?u:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:Vw(n.params),max:Lw(n.params,r.rawValue),parser:at,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:r,viewProps:n.viewProps})}});let Ri=class{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if($e(e))return!1;const t=e.x,i=e.y,r=e.z;return!(typeof t!="number"||typeof i!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const Td={toComponents:n=>n.getComponents(),fromComponents:n=>new Ri(...n)};function Aw(n){return Ri.isObject(n)?new Ri(n.x,n.y,n.z):new Ri}function Mw(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function Dw(n,e){return new $n({assembly:Td,components:[un(Object.assign(Object.assign({},n),n.x),e.x),un(Object.assign(Object.assign({},n),n.y),e.y),un(Object.assign(Object.assign({},n),n.z),e.z)]})}Pe({id:"input-point3d",type:"input",accept:(n,e)=>{if(!Ri.isObject(n))return null;const t=ge(e,i=>Object.assign(Object.assign({},Sr(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(ht),y:i.optional.custom(ht),z:i.optional.custom(ht)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Aw,constraint:n=>Dw(n.params,n.initialValue),equals:Ri.equals,writer:n=>Mw},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new Bn(n.document,{assembly:Td,axes:e.rawValue.getComponents().map((r,s)=>{var o;return wa({constraint:t.components[s],initialValue:r,params:oi(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:at,value:e,viewProps:n.viewProps})}});let Bi=class{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.z=i,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if($e(e))return!1;const t=e.x,i=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof i!="number"||typeof r!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const Id={toComponents:n=>n.getComponents(),fromComponents:n=>new Bi(...n)};function $w(n){return Bi.isObject(n)?new Bi(n.x,n.y,n.z,n.w):new Bi}function Tw(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function Iw(n,e){return new $n({assembly:Id,components:[un(Object.assign(Object.assign({},n),n.x),e.x),un(Object.assign(Object.assign({},n),n.y),e.y),un(Object.assign(Object.assign({},n),n.z),e.z),un(Object.assign(Object.assign({},n),n.w),e.w)]})}Pe({id:"input-point4d",type:"input",accept:(n,e)=>{if(!Bi.isObject(n))return null;const t=ge(e,i=>Object.assign(Object.assign({},Sr(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(ht),x:i.optional.custom(ht),y:i.optional.custom(ht),z:i.optional.custom(ht)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>$w,constraint:n=>Iw(n.params,n.initialValue),equals:Bi.equals,writer:n=>Tw},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new Bn(n.document,{assembly:Id,axes:e.rawValue.getComponents().map((r,s)=>{var o;return wa({constraint:t.components[s],initialValue:r,params:oi(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:at,value:e,viewProps:n.viewProps})}});function Ow(n){const e=[],t=ka(n.options);return t&&e.push(t),new nn(e)}Pe({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=ge(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(js)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>La,constraint:n=>Ow(n.params),writer:n=>rn},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&Er(i,Ns);return r?new Ui(e,{props:new Q({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new Us(e,{parser:s=>s,props:Q.fromObject({formatter:Yo}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof Ui?new Ea(n.controller):null}});const Xi={monitor:{defaultInterval:200,defaultRows:3}},dc=G("mll");let zw=class{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(dc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(dc("i")),i.style.height=`calc(var(${dd("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(r=>{r!==void 0&&i.push(this.formatter_(r))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},Ra=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new zw(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}};const hc=G("sgl");let Rw=class{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(hc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(hc("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}},Ba=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Rw(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}};Pe({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=ge(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Sa},controller:n=>{var e;return n.value.rawValue.length===1?new Ba(n.document,{formatter:ic,value:n.value,viewProps:n.viewProps}):new Ra(n.document,{formatter:ic,rows:(e=n.params.rows)!==null&&e!==void 0?e:Xi.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});let Bw=class extends ga{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const gn=G("grl");let Nw=class{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(gn()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(xe,"svg");i.classList.add(gn("g")),i.style.height=`calc(var(${dd("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const r=e.createElementNS(xe,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const s=e.createElement("div");s.classList.add(gn("t"),G("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,r=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,p)=>{if(h===void 0)return;const m=ie(p,0,i,0,e),v=ie(h,r,s,t,0);o.push([m,v].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,c=this.value.rawValue[this.cursor_.rawValue];if(c===void 0){a.classList.remove(gn("t","a"));return}const u=ie(this.cursor_.rawValue,0,i,0,e),d=ie(c,r,s,t,0);a.style.left=`${u}px`,a.style.top=`${d}px`,a.textContent=`${this.formatter_(c)}`,a.classList.contains(gn("t","a"))||(a.classList.add(gn("t","a"),gn("t","in")),Ps(a),a.classList.remove(gn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},Na=class{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=qe(-1),this.view=new Nw(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Ur(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new tt(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Wt(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Yt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(ie(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ie(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function Xo(n){return $e(n.format)?Ze(2):n.format}function jw(n){var e;return n.value.rawValue.length===1?new Ba(n.document,{formatter:Xo(n.params),value:n.value,viewProps:n.viewProps}):new Ra(n.document,{formatter:Xo(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Xi.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function Fw(n){var e,t,i;return new Na(n.document,{formatter:Xo(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Xi.monitor.defaultRows,props:Q.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function pc(n){return n.view==="graph"}Pe({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=ge(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>pc(n)?64:1,reader:n=>Br},controller:n=>pc(n.params)?Fw(n):jw(n),api:n=>n.controller.valueController instanceof Na?new Bw(n.controller):null});Pe({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=ge(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>La},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new Ra(n.document,{formatter:Yo,rows:(e=n.params.rows)!==null&&e!==void 0?e:Xi.monitor.defaultRows,value:t,viewProps:n.viewProps}):new Ba(n.document,{formatter:Yo,value:t,viewProps:n.viewProps})}});const Zo={baseBackgroundColor:"hsl(230, 7%, 17%)",baseBorderRadius:"6px",baseFontFamily:"Roboto Mono, Source Code Pro, Menlo, Courier, monospace",baseShadowColor:"rgba(0, 0, 0, 0.2)",bladeBorderRadius:"2px",bladeHorizontalPadding:"4px",bladeValueWidth:"160px",buttonBackgroundColor:"hsl(230, 7%, 70%)",buttonBackgroundColorActive:"#d6d7db",buttonBackgroundColorFocus:"#c8cad0",buttonBackgroundColorHover:"#bbbcc4",buttonForegroundColor:"hsl(230, 7%, 17%)",containerBackgroundColor:"rgba(187, 188, 196, 0.1)",containerBackgroundColorActive:"rgba(187, 188, 196, 0.25)",containerBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",containerBackgroundColorHover:"rgba(187, 188, 196, 0.15)",containerForegroundColor:"hsl(230, 7%, 75%)",containerHorizontalPadding:"4px",containerUnitSize:"20px",containerUnitSpacing:"4px",containerVerticalPadding:"4px",grooveForegroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColorActive:"rgba(187, 188, 196, 0.25)",inputBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",inputBackgroundColorHover:"rgba(187, 188, 196, 0.15)",inputForegroundColor:"hsl(230, 7%, 75%)",labelForegroundColor:"rgba(187, 188, 196, 0.7)",monitorBackgroundColor:"rgba(0, 0, 0, 0.2)",monitorForegroundColor:"rgba(187, 188, 196, 0.7)",pluginImageDraggingColor:"hsla(230, 100%, 66%, 1)"};Object.keys(Zo).reduce((n,e)=>(n[e]=e,n),{});const Uw=new Map([["baseBackgroundColor","--tp-base-background-color"],["baseBorderRadius","--tp-base-border-radius"],["baseFontFamily","--tp-base-font-family"],["baseShadowColor","--tp-base-shadow-color"],["bladeBorderRadius","--tp-blade-border-radius"],["bladeHorizontalPadding","--tp-blade-horizontal-padding"],["bladeValueWidth","--tp-blade-value-width"],["buttonBackgroundColor","--tp-button-background-color"],["buttonBackgroundColorActive","--tp-button-background-color-active"],["buttonBackgroundColorFocus","--tp-button-background-color-focus"],["buttonBackgroundColorHover","--tp-button-background-color-hover"],["buttonForegroundColor","--tp-button-foreground-color"],["containerBackgroundColor","--tp-container-background-color"],["containerBackgroundColorActive","--tp-container-background-color-active"],["containerBackgroundColorFocus","--tp-container-background-color-focus"],["containerBackgroundColorHover","--tp-container-background-color-hover"],["containerForegroundColor","--tp-container-foreground-color"],["containerHorizontalPadding","--tp-container-horizontal-padding"],["containerUnitSize","--tp-container-unit-size"],["containerUnitSpacing","--tp-container-unit-spacing"],["containerVerticalPadding","--tp-container-vertical-padding"],["grooveForegroundColor","--tp-groove-foreground-color"],["inputBackgroundColor","--tp-input-background-color"],["inputBackgroundColorActive","--tp-input-background-color-active"],["inputBackgroundColorFocus","--tp-input-background-color-focus"],["inputBackgroundColorHover","--tp-input-background-color-hover"],["inputForegroundColor","--tp-input-foreground-color"],["labelForegroundColor","--tp-label-foreground-color"],["monitorBackgroundColor","--tp-monitor-background-color"],["monitorForegroundColor","--tp-monitor-foreground-color"],["pluginImageDraggingColor","--tp-plugin-image-dragging-color"]]);function qw(n){if(n!==void 0){if(typeof n=="string")return n;if(Oa(n))return`rgba(${n.r}, ${n.g}, ${n.b}, ${n.a})`;if(Ia(n))return`rgb(${n.r}, ${n.g}, ${n.b})`}}function mc(n){if(n.startsWith("--tp-"))return n;const e=Uw.get(n);if(e)return e;throw new Error(`Unknown Tweakpane CSS theme map variable key: "${n}"`)}function Hw(n,e){const t=ib().documentElement;if(e===void 0)for(const i of Object.keys(Zo)){const r=mc(i);n.style.getPropertyValue(r).length>0&&n.style.removeProperty(r)}else for(const[i,r]of Object.entries(e)){const s=mc(i),o=qw(r),a=Zo[i]||void 0,c=t.style.getPropertyValue(s)||void 0;o!==void 0&&(((c&&o!==c)??!1)||!c&&((a&&o!==a)??!1))?n.style.setProperty(s,o):n.style.getPropertyValue(s).length>0&&n.style.removeProperty(s)}}function Ss(n){return n.constructor.name==="Pane"}function go(n,e,t){return Math.min(Math.max(n,e),t)}function Od(n){let e=0,t=n;for(;(t=t.previousElementSibling)!==null;)t.classList.contains("skip-element-index")||e++;return e}function Ks(n,...e){for(const t of e)t in n&&delete n[t];return n}function vc(n){n.isTrusted&&n.stopPropagation()}function zd(n,e,t,i){if(e){const r=e.querySelector(`.${t}`);if(r){const s=i?e.querySelector(`.${i}`):void 0;n?(r.removeEventListener("click",vc,{capture:!0}),r.style.cursor="pointer",s&&(s.style.display="block")):(r.addEventListener("click",vc,{capture:!0}),r.style.cursor="default",s&&(s.style.display="none"))}}else console.warn(`Title bar element not found with class "${t}"`)}function Kw(n){return!!n.controller.valueController?.foldable_?.valMap_?.expanded?.value_}function Gw(n){return n.controller?.valueController?.view?.swatchElement?.querySelector("button")??n.controller?.valueController?.view?.buttonElement}/*! Tweakpane 4.0.5 (c) 2016 cocopon, licensed under the MIT license. */function Ie(n){return n==null}function ja(n){return n!==null&&typeof n=="object"}function Jo(n){return n!==null&&typeof n=="object"}function Ww(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function ci(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,r)=>{const s=n[r],o=e[r];return Jo(s)&&Jo(o)?Object.assign(Object.assign({},i),{[r]:ci(s,o)}):Object.assign(Object.assign({},i),{[r]:r in e?o:s})},{})}function Fa(n){return ja(n)?"target"in n:!1}const Yw={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Ye{static alreadyDisposed(){return new Ye({type:"alreadydisposed"})}static notBindable(){return new Ye({type:"notbindable"})}static notCompatible(e,t){return new Ye({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new Ye({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Ye({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=Yw[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class Ls{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!Ls.isBindable(i))throw Ye.notBindable();if(!(e in i))throw Ye.propertyNotFound(e);i[e]=t}}class Je{constructor(){this.observers_={}}on(e,t,i){var r;let s=this.observers_[e];return s||(s=this.observers_[e]=[]),s.push({handler:t,key:(r=i?.key)!==null&&r!==void 0?r:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(r=>r.key!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(r=>{r.handler(t)})}}class Xw{constructor(e,t){var i;this.constraint_=t?.constraint,this.equals_=(i=t?.equals)!==null&&i!==void 0?i:(r,s)=>r===s,this.emitter=new Je,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,r)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:r,sender:this}))}}class Zw{constructor(e){this.emitter=new Je,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:this.value_,sender:this}))}}class Jw{constructor(e){this.emitter=new Je,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function He(n,e){const t=e?.constraint,i=e?.equals;return!t&&!i?new Zw(n):new Xw(n,e)}function Qw(n){return[new Jw(n),(e,t)=>{n.setRawValue(e,t)}]}class ce{constructor(e){this.emitter=new Je,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,r)=>Object.assign(i,{[r]:He(e[r])}),{})}static fromObject(e){const t=this.createCore(e);return new ce(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class Wr{constructor(e){this.values=ce.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}}class eg{constructor(e){this.values=ce.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let r=e;return Ie(i)||(r=Math.max(r,i)),Ie(t)||(r=Math.min(r,t)),r}}class tg{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}}class ng{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const ig={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};class rg{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=ig[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const sg={"+":n=>n,"-":n=>-n,"~":n=>~n};class og{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=sg[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ua(n){return(e,t)=>{for(let i=0;i<n.length;i++){const r=n[i](e,t);if(r!=="")return r}return""}}function Lr(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function ag(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function Vr(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function lg(n,e){const t=Vr(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const r=Vr(n,e);return r===""?"":i+r}function qa(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=lg(n,e);return i===""?"":t+i}function Rd(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=ag(n,e);return e+=i.length,i===""?"":i+Vr(n,e)}function cg(n,e){const t=Rd(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const r=Vr(n,e);return e+=r.length,t+i+r+qa(n,e)}function ug(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=Vr(n,e);return e+=i.length,i===""?"":t+i+qa(n,e)}function dg(n,e){const t=Rd(n,e);return e+=t.length,t===""?"":t+qa(n,e)}const hg=Ua([cg,ug,dg]);function pg(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function mg(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=pg(n,e);return i===""?"":t+i}function vg(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function fg(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=vg(n,e);return i===""?"":t+i}function bg(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function _g(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=bg(n,e);return i===""?"":t+i}const wg=Ua([mg,fg,_g]),gg=Ua([wg,hg]);function yg(n,e){const t=gg(n,e);return e+=t.length,t===""?null:{evaluable:new ng(t),cursor:e}}function Cg(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=Nd(n,e);if(!i)return null;e=i.cursor,e+=Lr(n,e).length;const r=n.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:i.evaluable,cursor:e}}function xg(n,e){var t;return(t=yg(n,e))!==null&&t!==void 0?t:Cg(n,e)}function Bd(n,e){const t=xg(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const r=Bd(n,e);return r?(e=r.cursor,{cursor:e,evaluable:new og(i,r.evaluable)}):null}function Pg(n,e,t){t+=Lr(e,t).length;const i=n.filter(r=>e.startsWith(r,t))[0];return i?(t+=i.length,t+=Lr(e,t).length,{cursor:t,operator:i}):null}function Eg(n,e){return(t,i)=>{const r=n(t,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const o=Pg(e,t,i);if(!o)break;i=o.cursor;const a=n(t,i);if(!a)return null;i=a.cursor,s=new rg(o.operator,s,a.evaluable)}return s?{cursor:i,evaluable:s}:null}}const kg=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>Eg(n,e),Bd);function Nd(n,e){return e+=Lr(n,e).length,kg(n,e)}function Sg(n){const e=Nd(n,0);return!e||e.cursor+Lr(n,e.cursor).length!==n.length?null:e.evaluable}function pn(n){var e;const t=Sg(n);return(e=t?.evaluate())!==null&&e!==void 0?e:null}function jd(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=pn(n);if(!Ie(e))return e}return 0}function Lg(n){return String(n)}function gt(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function Le(n,e,t,i,r){const s=(n-e)/(t-e);return i+s*(r-i)}function fc(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function nt(n,e,t){return Math.min(Math.max(n,e),t)}function Fd(n,e){return(n%e+e)%e}function Vg(n,e){return Ie(n.step)?Math.max(fc(e),2):fc(n.step)}function Ud(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function qd(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function Hd(n,e){return Ie(n.step)?null:new tg(n.step,e)}function Kd(n){return!Ie(n.max)&&!Ie(n.min)?new Wr({max:n.max,min:n.min}):!Ie(n.max)||!Ie(n.min)?new eg({max:n.max,min:n.min}):null}function Gd(n,e){var t,i,r;return{formatter:(t=n.format)!==null&&t!==void 0?t:gt(Vg(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:Ud(n),pointerScale:(r=n.pointerScale)!==null&&r!==void 0?r:qd(n,e)}}function Wd(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function Ha(n){return{constraint:n.constraint,textProps:ce.fromObject(Gd(n.params,n.initialValue))}}class fi{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class Gs{constructor(e){this.target=e}}class Yr extends Gs{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}}class Ag extends Gs{constructor(e,t){super(e),this.expanded=t}}class Mg extends Gs{constructor(e,t){super(e),this.index=t}}class Dg extends Gs{constructor(e,t){super(e),this.native=t}}class Ar extends fi{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Je,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Yr(this,t.binding.target.read(),e.options.last))}}class $g{constructor(e,t){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Je}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Tg(n){if(!("binding"in n))return!1;const e=n.binding;return Fa(e)&&"read"in e&&"write"in e}function Ig(n,e){const i=Object.keys(e).reduce((r,s)=>{if(r===void 0)return;const o=e[s],a=o(n[s]);return a.succeeded?Object.assign(Object.assign({},r),{[s]:a.value}):void 0},{});return i}function Og(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const r=e(i);if(!(!r.succeeded||r.value===void 0))return[...t,r.value]},[])}function zg(n){return n===null?!1:typeof n=="object"}function ln(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function bc(n){return{custom:e=>ln(e)(n),boolean:ln(e=>typeof e=="boolean"?e:void 0)(n),number:ln(e=>typeof e=="number"?e:void 0)(n),string:ln(e=>typeof e=="string"?e:void 0)(n),function:ln(e=>typeof e=="function"?e:void 0)(n),constant:e=>ln(t=>t===e?e:void 0)(n),raw:ln(e=>e)(n),object:e=>ln(t=>{if(zg(t))return Ig(t,e)})(n),array:e=>ln(t=>{if(Array.isArray(t))return Og(t,e)})(n)}}const Qo={optional:bc(!0),required:bc(!1)};function Ge(n,e){const t=e(Qo),i=Qo.required.object(t)(n);return i.succeeded?i.value:void 0}function St(n,e,t,i){if(e&&!e(n))return!1;const r=Ge(n,t);return r?i(r):!1}function Lt(n,e){var t;return ci((t=n?.())!==null&&t!==void 0?t:{},e)}function si(n){return"value"in n}function Yd(n){if(!ja(n)||!("binding"in n))return!1;const e=n.binding;return Fa(e)}const Xt="http://www.w3.org/2000/svg";function Vs(n){n.offsetHeight}function Rg(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function Ka(n){return n.ontouchstart!==void 0}function Bg(){return globalThis}function Ng(){return Bg().document}function jg(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const Fg={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function Ws(n,e){const t=n.createElementNS(Xt,"svg");return t.innerHTML=Fg[e],t}function Xd(n,e,t){n.insertBefore(e,n.children[t])}function Ga(n){n.parentElement&&n.parentElement.removeChild(n)}function Zd(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function Ug(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function Jd(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function hn(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function en(n,e,t){hn(n.value(e),t)}const qg="tp";function fe(n){return(t,i)=>[qg,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const ur=fe("lbl");function Hg(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(r=>n.createTextNode(r)).forEach((r,s)=>{s>0&&t.appendChild(n.createElement("br")),t.appendChild(r)}),t}class Qd{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ur()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(ur("l")),en(t.props,"label",s=>{Ie(s)?this.element.classList.add(ur(void 0,"nol")):(this.element.classList.remove(ur(void 0,"nol")),Ug(i),i.appendChild(Hg(e,s)))}),this.element.appendChild(i),this.labelElement=i;const r=e.createElement("div");r.classList.add(ur("v")),this.element.appendChild(r),this.valueElement=r}}class eh{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new Qd(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return St(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Lt(null,{label:this.props.get("label")})}}function Kg(){return["veryfirst","first","last","verylast"]}const _c=fe(""),wc={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class Ys{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Kg().forEach(i=>{t.classList.remove(_c(void 0,wc[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(_c(void 0,wc[i]))})}),this.viewProps.handleDispose(()=>{Ga(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return St(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Lt(null,Object.assign({},this.viewProps.exportState()))}}class ui extends Ys{constructor(e,t){if(t.value!==t.valueController.value)throw Ye.shouldNeverHappen();const i=t.valueController.viewProps,r=new eh(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new Qd(e,{props:t.props,viewProps:i}),viewProps:i})),this.labelController=r,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return St(e,t=>{var i,r,s;return super.importState(t)&&this.labelController.importProps(t)&&((s=(r=(i=this.valueController).importProps)===null||r===void 0?void 0:r.call(i,e))!==null&&s!==void 0?s:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,i;return Lt(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}))}}function gc(n){const e=Object.assign({},n);return delete e.value,e}class th extends ui{constructor(e,t){super(e,t),this.tag=t.tag}importState(e){return St(e,t=>super.importState(gc(e)),t=>({tag:t.optional.string}),t=>(this.tag=t.tag,!0))}exportState(){return Lt(()=>gc(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function Gg(n){return si(n)&&Yd(n.value)}class Wg extends th{importState(e){return St(e,t=>super.importState(t),t=>({binding:t.required.object({value:t.required.raw})}),t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0))}}function Yg(n){return si(n)&&Tg(n.value)}function nh(n,e){for(;n.length<e;)n.push(void 0)}function Xg(n){const e=[];return nh(e,n),e}function Zg(n){const e=n.indexOf(void 0);return e<0?n:n.slice(0,e)}function Jg(n,e){const t=[...Zg(n),e];return t.length>n.length?t.splice(0,t.length-n.length):nh(t,n.length),t}class Qg{constructor(e){this.emitter=new Je,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=He(Xg(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=Jg(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function e0(n){if(!("binding"in n))return!1;const e=n.binding;return Fa(e)&&"read"in e&&!("write"in e)}class t0 extends th{exportState(){return Lt(()=>super.exportState(),{binding:{readonly:!0}})}}function n0(n){return si(n)&&e0(n.value)}class i0 extends fi{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,s=>{i(new Dg(this,s.nativeEvent))}),this}off(e,t){return this.controller.buttonController.emitter.off(e,t),this}}function r0(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function Zi(n,e){return t=>{r0(n,e,t)}}function Wa(n,e){hn(n,t=>{e.textContent=t??""})}const yo=fe("btn");class s0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(yo()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(yo("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(yo("t")),Wa(t.props.value("title"),r),this.buttonElement.appendChild(r)}}class o0{constructor(e,t){this.emitter=new Je,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new s0(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return St(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Lt(null,{title:this.props.get("title")})}onClick_(e){this.emitter.emit("click",{nativeEvent:e,sender:this})}}class yc extends Ys{constructor(e,t){const i=new o0(e,{props:t.buttonProps,viewProps:t.viewProps}),r=new eh(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:r.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=r}importState(e){return St(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Lt(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class ih{constructor(e){const[t,i]=e.split("-"),r=t.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const Ji=new ih("2.0.5");function vt(n){return Object.assign({core:Ji},n)}const a0=vt({id:"button",type:"blade",accept(n){const e=Ge(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new yc(n.document,{blade:n.blade,buttonProps:ce.fromObject({title:n.params.title}),labelProps:ce.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof yc?new i0(n.controller):null}});function l0(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function c0(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function u0(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function d0(n){return ja(n)?"refresh"in n&&typeof n.refresh=="function":!1}function h0(n,e){if(!Ls.isBindable(n))throw Ye.notBindable();return new Ls(n,e)}class p0{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Je,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const r=i??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,h0(e,t),r),a=this.pool_.createBindingApi(o);return this.add(a,r.index)}addFolder(e){return c0(this,e)}addButton(e){return l0(this,e)}addTab(e){return u0(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),r=this.pool_.createApi(i);return this.add(r,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}refresh(){this.children.forEach(e=>{d0(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),r=Yd(t.value)?t.value.binding:null;this.emitter_.emit("change",new Yr(i,r?r.target.read():t.value.rawValue,e.options.last))}}class Ya extends fi{constructor(e,t){super(e),this.rackApi_=new p0(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class Xa extends Ys{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return St(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,r)=>i.importState(t.children[r])))}exportState(){return Lt(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function ea(n){return"rackController"in n}class m0{constructor(e){this.emitter=new Je,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw Ye.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(r=>{this.cache_.delete(r)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function v0(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(si(i)&&i.value===e)return i}return null}function f0(n){return ea(n)?n.rackController.rack.bcSet_:null}class b0{constructor(e){var t,i;this.emitter=new Je,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new m0(f0),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),si(i))i.value.emitter.on("change",this.onChildValueChange_);else if(ea(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(si(i))i.value.emitter.off("change",this.onChildValueChange_);else if(ea(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(r=>{const s=[];r===t&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),r===i&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),r.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=v0(this.find(si),e.sender);if(!t)throw Ye.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Za{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new b0({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Xd(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Ga(e.bladeController.view.element)}}function Qi(){return new ce({positions:He([],{equals:Ww})})}class Xr extends ce{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=ce.createCore(t);return new Xr(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ie(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};en(this,"expanded",i),en(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function _0(n,e){let t=0;return Rg(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),Vs(e),t=e.clientHeight,n.set("temporaryExpanded",null),Vs(e)}),t}function Cc(n,e){e.style.height=n.styleHeight}function Ja(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),Ie(n.get("expandedHeight"))){const t=_0(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),Vs(e)}),n.emitter.on("change",()=>{Cc(n,e)}),Cc(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}class rh extends Ya{constructor(e,t){super(e,t),this.emitter_=new Je,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new Ag(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const sh=fe("cnt");class w0{constructor(e,t){var i;this.className_=fe((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),sh()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),en(this.foldable_,"completed",Zi(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),en(t.props,"title",u=>{Ie(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),Wa(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const a=e.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);const c=e.createElement("div");c.classList.add(this.className_("c")),this.element.appendChild(c),this.containerElement=c}}class ta extends Xa{constructor(e,t){var i;const r=Xr.create((i=t.expanded)!==null&&i!==void 0?i:!0),s=new w0(e,{foldable:r,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Za({blade:t.blade,element:s.containerElement,root:t.root,viewProps:t.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=r,Ja(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return St(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Lt(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const g0=vt({id:"folder",type:"blade",accept(n){const e=Ge(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new ta(n.document,{blade:n.blade,expanded:n.params.expanded,props:ce.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof ta?new rh(n.controller,n.pool):null}}),y0=fe("");function xc(n,e){return Zi(n,y0(void 0,e))}class fn extends ce{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Qw(He(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,r;const s=e??{};return new fn(ce.createCore({disabled:(t=s.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=s.hidden)!==null&&i!==void 0?i:!1,parent:(r=s.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){hn(this.globalDisabled_,xc(e,"disabled")),en(this,"hidden",xc(e,"hidden"))}bindDisabled(e){hn(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){hn(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i?.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Pc=fe("tbp");class C0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Pc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Pc("c")),this.element.appendChild(i),this.containerElement=i}}const dr=fe("tbi");class x0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(dr()),t.viewProps.bindClassModifiers(this.element),en(t.props,"selected",s=>{s?this.element.classList.add(dr(void 0,"sel")):this.element.classList.remove(dr(void 0,"sel"))});const i=e.createElement("button");i.classList.add(dr("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(dr("t")),Wa(t.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class P0{constructor(e,t){this.emitter=new Je,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new x0(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class na extends Xa{constructor(e,t){const i=new C0(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Za({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new P0(e,{props:t.itemProps,viewProps:fn.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,en(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(e){return St(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Lt(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class E0 extends Ya{constructor(e,t){super(e,t),this.emitter_=new Je,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new na(t,{blade:Qi(),itemProps:ce.fromObject({selected:!1,title:e.title}),props:ce.fromObject({selected:!1}),viewProps:fn.create()}),r=this.pool_.createApi(i);return this.rackApi_.add(r,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}onSelect_(e){this.emitter_.emit("select",new Mg(this,e.rawValue))}}class k0 extends Ya{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}}const Ec=-1;class S0{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=He(!0),this.selectedIndex=He(Ec),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ec,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,r)=>{i.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const hr=fe("tab");class L0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(hr(),sh()),t.viewProps.bindClassModifiers(this.element),hn(t.empty,Zi(this.element,hr(void 0,"nop")));const i=e.createElement("div");i.classList.add(hr("t")),this.element.appendChild(i),this.itemsElement=i;const r=e.createElement("div");r.classList.add(hr("i")),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(hr("c")),this.element.appendChild(s),this.contentsElement=s}}class kc extends Xa{constructor(e,t){const i=new S0,r=new L0(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Za({blade:t.blade,element:r.contentsElement,viewProps:t.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;Xd(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Ga(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}const oh=vt({id:"tab",type:"blade",accept(n){const e=Ge(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new kc(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new na(n.document,{blade:Qi(),itemProps:ce.fromObject({selected:!1,title:t.title}),props:ce.fromObject({selected:!1}),viewProps:fn.create()});e.add(i)}),e},api(n){return n.controller instanceof kc?new E0(n.controller,n.pool):n.controller instanceof na?new k0(n.controller,n.pool):null}});function V0(n,e){const t=n.accept(e.params);if(!t)return null;const i=Ge(e.params,r=>({disabled:r.optional.boolean,hidden:r.optional.boolean}));return n.controller({blade:Qi(),document:e.document,params:Object.assign(Object.assign({},t.params),{disabled:i?.disabled,hidden:i?.hidden}),viewProps:fn.create({disabled:i?.disabled,hidden:i?.hidden})})}class Qa extends Ar{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class A0{constructor(){this.disabled=!1,this.emitter=new Je}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class M0{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Je,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Zr{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}}function As(n,e){if(n instanceof e)return n;if(n instanceof Zr){const t=n.constraints.reduce((i,r)=>i||(r instanceof e?r:null),null);if(t)return t}return null}class Jr{constructor(e){this.values=ce.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(r=>r.value===e).length>0?e:t[0].value}}function Qr(n){var e;const t=Qo;if(Array.isArray(n))return(e=Ge({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function el(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function tl(n){return Ie(n)?null:new Jr(el(n))}const Co=fe("lst");class D0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(Co()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(Co("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const r=e.createElement("div");r.classList.add(Co("m")),r.appendChild(Ws(e,"dropdown")),this.element.appendChild(r),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,en(this.props_,"options",s=>{Zd(this.selectElement),s.forEach(o=>{const a=e.createElement("option");a.textContent=o.text,this.selectElement.appendChild(a)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Tn{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new D0(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return St(e,null,t=>({options:t.required.custom(Qr)}),t=>(this.props.set("options",el(t.options)),!0))}exportProps(){return Lt(null,{options:this.props.get("options")})}}const Sc=fe("pop");class $0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Sc()),t.viewProps.bindClassModifiers(this.element),hn(t.shows,Zi(this.element,Sc(void 0,"v")))}}class ah{constructor(e,t){this.shows=He(!1),this.viewProps=t.viewProps,this.view=new $0(e,{shows:this.shows,viewProps:this.viewProps})}}const Lc=fe("txt");class T0{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Lc()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(Lc("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class Mr{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new T0(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);Ie(r)||(this.value.rawValue=r),this.view.refresh()}}function I0(n){return String(n)}function lh(n){return n==="false"?!1:!!n}function Vc(n){return I0(n)}function O0(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const z0=gt(0);function Ms(n){return z0(n)+"%"}function ch(n){return String(n)}function ia(n){return n}function er({primary:n,secondary:e,forward:t,backward:i}){let r=!1;function s(o){r||(r=!0,o(),r=!1)}n.emitter.on("change",o=>{s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function bt(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Dr(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function mn(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function R0(n){return n==="ArrowUp"||n==="ArrowDown"}function uh(n){return R0(n)||n==="ArrowLeft"||n==="ArrowRight"}function xo(n,e){var t,i;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:n.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:n.pageY-(((i=r&&r.scrollY)!==null&&i!==void 0?i:0)+s.top)}}class bi{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Je,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(xo(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(xo(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(xo(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-r.left,y:i.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const At=fe("txt");class B0{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(At(),At(void 0,"num")),t.arrayPosition&&this.element.classList.add(At(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(At("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(At()),this.inputElement.classList.add(At("i"));const r=e.createElement("div");r.classList.add(At("k")),this.element.appendChild(r),this.knobElement=r;const s=e.createElementNS(Xt,"svg");s.classList.add(At("g")),this.knobElement.appendChild(s);const o=e.createElementNS(Xt,"path");o.classList.add(At("gb")),s.appendChild(o),this.guideBodyElem_=o;const a=e.createElementNS(Xt,"path");a.classList.add(At("gh")),s.appendChild(a),this.guideHeadElem_=a;const c=e.createElement("div");c.classList.add(fe("tt")()),this.knobElement.appendChild(c),this.tooltipElem_=c,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(At(void 0,"drg"));return}this.element.classList.add(At(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),r=nt(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+r},0 L${i},4 L${i+r},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class es{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=He(null),this.view=new B0(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new bi(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),s=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return r!==void 0&&(o=Math.max(o,r)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);Ie(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(e){const t=bt(this.props.get("keyScale"),Dr(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){bt(this.props.get("keyScale"),Dr(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Po=fe("sld");class N0{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Po()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Po("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const r=e.createElement("div");r.classList.add(Po("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=nt(Le(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class j0{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new N0(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bi(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(Le(nt(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=bt(this.props.get("keyScale"),mn(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){bt(this.props.get("keyScale"),mn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Eo=fe("sldtxt");class F0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Eo());const i=e.createElement("div");i.classList.add(Eo("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Eo("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class Ds{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new j0(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new es(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new F0(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return St(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Lt(null,{max:e.get("max"),min:e.get("min")})}}function dh(n){return{sliderProps:new ce({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new ce({formatter:He(n.formatter),keyScale:n.keyScale,pointerScale:He(n.pointerScale)})}}const U0={containerUnitSize:"cnt-usz"};function hh(n){return`--${U0[n]}`}function $r(n){return Wd(n)}function Sn(n){if(Jo(n))return Ge(n,$r)}function dn(n,e){if(!n)return;const t=[],i=Hd(n,e);i&&t.push(i);const r=Kd(n);return r&&t.push(r),new Zr(t)}function q0(n){return n?n.major===Ji.major:!1}function ph(n){if(n==="inline"||n==="popup")return n}function ts(n,e){n.write(e)}const ls=fe("ckb");class H0{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ls()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(ls("l")),this.element.appendChild(i),this.labelElement=i;const r=e.createElement("input");r.classList.add(ls("i")),r.type="checkbox",this.labelElement.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(ls("w")),this.labelElement.appendChild(s);const o=Ws(e,"check");s.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class K0{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.onLabelMouseDown_=this.onLabelMouseDown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new H0(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.labelElement.addEventListener("mousedown",this.onLabelMouseDown_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked,e.preventDefault(),e.stopPropagation()}onLabelMouseDown_(e){e.preventDefault()}}function G0(n){const e=[],t=tl(n.options);return t&&e.push(t),new Zr(e)}const W0=vt({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=Ge(e,i=>({options:i.optional.custom(Qr),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>lh,constraint:n=>G0(n.params),writer:n=>ts},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&As(i,Jr);return r?new Tn(e,{props:new ce({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new K0(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof Tn?new Qa(n.controller):null}}),Gn=fe("col");class Y0{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Gn()),t.foldable.bindExpandedClass(this.element,Gn(void 0,"expanded")),en(t.foldable,"completed",Zi(this.element,Gn(void 0,"cpl")));const i=e.createElement("div");i.classList.add(Gn("h")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Gn("s")),i.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(Gn("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Gn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function X0(n,e,t){const i=nt(n/255,0,1),r=nt(e/255,0,1),s=nt(t/255,0,1),o=Math.max(i,r,s),a=Math.min(i,r,s),c=o-a;let u=0,d=0;const h=(a+o)/2;return c!==0&&(d=c/(1-Math.abs(o+a-1)),i===o?u=(r-s)/c:r===o?u=2+(s-i)/c:u=4+(i-r)/c,u=u/6+(u<0?1:0)),[u*360,d*100,h*100]}function Z0(n,e,t){const i=(n%360+360)%360,r=nt(e/100,0,1),s=nt(t/100,0,1),o=(1-Math.abs(2*s-1))*r,a=o*(1-Math.abs(i/60%2-1)),c=s-o/2;let u,d,h;return i>=0&&i<60?[u,d,h]=[o,a,0]:i>=60&&i<120?[u,d,h]=[a,o,0]:i>=120&&i<180?[u,d,h]=[0,o,a]:i>=180&&i<240?[u,d,h]=[0,a,o]:i>=240&&i<300?[u,d,h]=[a,0,o]:[u,d,h]=[o,0,a],[(u+c)*255,(d+c)*255,(h+c)*255]}function J0(n,e,t){const i=nt(n/255,0,1),r=nt(e/255,0,1),s=nt(t/255,0,1),o=Math.max(i,r,s),a=Math.min(i,r,s),c=o-a;let u;c===0?u=0:o===i?u=60*(((r-s)/c%6+6)%6):o===r?u=60*((s-i)/c+2):u=60*((i-r)/c+4);const d=o===0?0:c/o,h=o;return[u,d*100,h*100]}function mh(n,e,t){const i=Fd(n,360),r=nt(e/100,0,1),s=nt(t/100,0,1),o=s*r,a=o*(1-Math.abs(i/60%2-1)),c=s-o;let u,d,h;return i>=0&&i<60?[u,d,h]=[o,a,0]:i>=60&&i<120?[u,d,h]=[a,o,0]:i>=120&&i<180?[u,d,h]=[0,o,a]:i>=180&&i<240?[u,d,h]=[0,a,o]:i>=240&&i<300?[u,d,h]=[a,0,o]:[u,d,h]=[o,0,a],[(u+c)*255,(d+c)*255,(h+c)*255]}function Q0(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function ey(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function tn(n){return[n[0],n[1],n[2]]}function Xs(n,e){return[n[0],n[1],n[2],e]}const ty={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:Q0,rgb:Z0},hsv:{hsl:ey,hsv:(n,e,t)=>[n,e,t],rgb:mh},rgb:{hsl:X0,hsv:J0,rgb:(n,e,t)=>[n,e,t]}};function Hi(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function ny(n,e){return n===e?e:Fd(n,e)}function vh(n,e,t){var i;const r=Hi(e,t);return[e==="rgb"?nt(n[0],0,r[0]):ny(n[0],r[0]),nt(n[1],0,r[1]),nt(n[2],0,r[2]),nt((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function Ac(n,e,t,i){const r=Hi(e,t),s=Hi(e,i);return n.map((o,a)=>o/r[a]*s[a])}function fh(n,e,t){const i=Ac(n,e.mode,e.type,"int"),r=ty[e.mode][t.mode](...i);return Ac(r,t.mode,"int",t.type)}class we{static black(){return new we([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=vh(e,t,this.type)}getComponents(e){return Xs(fh(tn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const yn=fe("colp");class iy{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(yn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(yn("hsv"));const r=e.createElement("div");r.classList.add(yn("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),i.appendChild(r);const s=e.createElement("div");s.classList.add(yn("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),i.appendChild(s),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(yn("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const a=e.createElement("div");a.classList.add(yn("a"));const c=e.createElement("div");c.classList.add(yn("ap")),c.appendChild(this.alphaViews_.palette.element),a.appendChild(c);const u=e.createElement("div");u.classList.add(yn("at")),u.appendChild(this.alphaViews_.text.element),a.appendChild(u),this.element.appendChild(a)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function ry(n){return n==="int"?"int":n==="float"?"float":void 0}function nl(n){return Ge(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(ry)}),expanded:e.optional.boolean,picker:e.optional.custom(ph),readonly:e.optional.constant(!1)}))}function di(n){return n?.1:1}function bh(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}class il{constructor(e,t){this.type="float",this.mode=t,this.comps_=vh(e,t,this.type)}getComponents(e){return Xs(fh(tn(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const sy={int:(n,e)=>new we(n,e),float:(n,e)=>new il(n,e)};function rl(n,e,t){return sy[t](n,e)}function oy(n){return n.type==="float"}function ay(n){return n.type==="int"}function ly(n){const e=n.getComponents(),t=Hi(n.mode,"int");return new we([Math.round(Le(e[0],0,1,0,t[0])),Math.round(Le(e[1],0,1,0,t[1])),Math.round(Le(e[2],0,1,0,t[2])),e[3]],n.mode)}function cy(n){const e=n.getComponents(),t=Hi(n.mode,"int");return new il([Le(e[0],0,t[0],0,1),Le(e[1],0,t[1],0,1),Le(e[2],0,t[2],0,1),e[3]],n.mode)}function mt(n,e){if(n.type===e)return n;if(ay(n)&&e==="float")return cy(n);if(oy(n)&&e==="int")return ly(n);throw Ye.shouldNeverHappen()}function uy(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function zt(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const dy={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function _h(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return dy[i](t)}function wh(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[zt(e[1],255),zt(e[2],255),zt(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function hy(n){const e=wh(n);return e?new we(e,"rgb"):null}function gh(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[zt(e[1],255),zt(e[2],255),zt(e[3],255),zt(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function py(n){const e=gh(n);return e?new we(e,"rgb"):null}function yh(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[_h(e[1]),zt(e[2],100),zt(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function my(n){const e=yh(n);return e?new we(e,"hsl"):null}function Ch(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[_h(e[1]),zt(e[2],100),zt(e[3],100),zt(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function vy(n){const e=Ch(n);return e?new we(e,"hsl"):null}function xh(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function fy(n){const e=xh(n);return e?new we(e,"rgb"):null}function Ph(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Le(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),Le(parseInt(t[4],16),0,255,0,1)]:null}function by(n){const e=Ph(n);return e?new we(e,"rgb"):null}function Eh(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function _y(n){return e=>{const t=Eh(e);return t?rl(t,"rgb",n):null}}function kh(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function wy(n){return e=>{const t=kh(e);return t?rl(t,"rgb",n):null}}const gy=[{parser:xh,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Ph,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:wh,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:gh,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:yh,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Ch,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Eh,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:kh,result:{alpha:!0,mode:"rgb",notation:"object"}}];function yy(n){return gy.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function Cy(n,e="int"){const t=yy(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function ns(n){const e=[fy,by,hy,py,my,vy];e.push(_y("int"),wy("int"));const t=O0(e);return i=>{const r=t(i);return r?mt(r,n):null}}function xy(n){const e=ns("int");if(typeof n!="string")return we.black();const t=e(n);return t??we.black()}function Sh(n){const e=nt(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function sl(n,e="#"){const t=tn(n.getComponents("rgb")).map(Sh).join("");return`${e}${t}`}function ol(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(Sh).join("");return`${e}${i}`}function Lh(n){const e=gt(0),t=mt(n,"int");return`rgb(${tn(t.getComponents("rgb")).map(r=>e(r)).join(", ")})`}function ws(n){const e=gt(2),t=gt(0);return`rgba(${mt(n,"int").getComponents("rgb").map((s,o)=>(o===3?e:t)(s)).join(", ")})`}function Py(n){const e=[gt(0),Ms,Ms],t=mt(n,"int");return`hsl(${tn(t.getComponents("hsl")).map((r,s)=>e[s](r)).join(", ")})`}function Ey(n){const e=[gt(0),Ms,Ms,gt(2)];return`hsla(${mt(n,"int").getComponents("hsl").map((r,s)=>e[s](r)).join(", ")})`}function Vh(n,e){const t=gt(e==="float"?2:0),i=["r","g","b"],r=mt(n,e);return`{${tn(r.getComponents("rgb")).map((o,a)=>`${i[a]}: ${t(o)}`).join(", ")}}`}function ky(n){return e=>Vh(e,n)}function Ah(n,e){const t=gt(2),i=gt(e==="float"?2:0),r=["r","g","b","a"];return`{${mt(n,e).getComponents("rgb").map((a,c)=>{const u=c===3?t:i;return`${r[c]}: ${u(a)}`}).join(", ")}}`}function Sy(n){return e=>Ah(e,n)}const Ly=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:sl},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:ol},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Lh},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:ws},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Py},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Ey},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:ky(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Sy(e)}],[])];function Mh(n){return Ly.reduce((e,t)=>e||(uy(t.format,n)?t.stringifier:null),null)}const pr=fe("apl");class Vy{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(pr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(pr("b")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(pr("c")),i.appendChild(r),this.colorElem_=r;const s=e.createElement("div");s.classList.add(pr("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(pr("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new we([t[0],t[1],t[2],0],"rgb"),r=new we([t[0],t[1],t[2],255],"rgb"),s=["to right",ws(i),ws(r)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=ws(e);const o=Le(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class Ay{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Vy(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,r=this.value.rawValue,[s,o,a]=r.getComponents("hsv");this.value.setRawValue(new we([s,o,a,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=bt(di(!0),mn(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new we([r,s,o,a+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){bt(di(!0),mn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const xi=fe("coltxt");function My(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,r)=>{const s=n.createElement("option");return s.textContent=r.text,s.value=r.value,i.appendChild(s),i},n.createDocumentFragment())),e}class Dy{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(xi()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(xi("m")),this.modeElem_=My(e),this.modeElem_.classList.add(xi("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(xi("mm")),r.appendChild(Ws(e,"dropdown")),i.appendChild(r),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(xi("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=t.inputViews,this.applyInputViews_(),hn(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Zd(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(xi("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}}function $y(n){return gt(n==="float"?2:0)}function Ty(n,e,t){const i=Hi(n,e)[t];return new Wr({min:0,max:i})}function Iy(n,e,t){return new es(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:ce.fromObject({formatter:$y(e.colorType),keyScale:di(!1),pointerScale:e.colorType==="float"?.01:1}),value:He(0,{constraint:Ty(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function Oy(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:pn,viewProps:e.viewProps};return[0,1,2].map(i=>{const r=Iy(n,t,i);return er({primary:e.value,secondary:r.value,forward(s){return mt(s,e.colorType).getComponents(e.colorMode)[i]},backward(s,o){const a=e.colorMode,u=mt(s,e.colorType).getComponents(a);u[i]=o;const d=rl(Xs(tn(u),u[3]),a,e.colorType);return mt(d,"int")}}),r})}function zy(n,e){const t=new Mr(n,{parser:ns("int"),props:ce.fromObject({formatter:sl}),value:He(we.black()),viewProps:e.viewProps});return er({primary:e.value,secondary:t.value,forward:i=>new we(tn(i.getComponents()),i.mode),backward:(i,r)=>new we(Xs(tn(r.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function Ry(n){return n!=="hex"}class By{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=He(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Dy(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return Ry(t)?Oy(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):zy(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const ko=fe("hpl");class Ny{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(ko()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(ko("c")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(ko("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Lh(new we([t,100,100],"hsv"));const i=Le(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class jy{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Ny(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=Le(nt(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new we([i,s,o,a],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=bt(di(!1),mn(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,a]=i.getComponents("hsv");this.value.setRawValue(new we([r+t,s,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){bt(di(!1),mn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const So=fe("svp"),Mc=64;class Fy{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(So()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=Mc,i.width=Mc,i.classList.add(So("c")),this.element.appendChild(i),this.canvasElement=i;const r=e.createElement("div");r.classList.add(So("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=jg(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,r,s),a=o.data;for(let d=0;d<s;d++)for(let h=0;h<r;h++){const p=Le(h,0,r,0,100),m=Le(d,0,s,100,0),v=mh(i[0],p,m),b=(d*r+h)*4;a[b]=v[0],a[b+1]=v[1],a[b+2]=v[2],a[b+3]=255}e.putImageData(o,0,0);const c=Le(i[1],0,100,0,100);this.markerElem_.style.left=`${c}%`;const u=Le(i[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}}class Uy{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Fy(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bi(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=Le(e.point.x,0,e.bounds.width,0,100),r=Le(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new we([s,i,r,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){uh(e.key)&&e.preventDefault();const[t,i,r,s]=this.value.rawValue.getComponents("hsv"),o=di(!1),a=bt(o,mn(e)),c=bt(o,Dr(e));a===0&&c===0||this.value.setRawValue(new we([t,i+a,r+c,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=di(!1),i=bt(t,mn(e)),r=bt(t,Dr(e));i===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class qy{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new jy(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Uy(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new Ay(e,{value:this.value,viewProps:this.viewProps}),text:new es(e,{parser:pn,props:ce.fromObject({pointerScale:.01,keyScale:.1,formatter:gt(2)}),value:He(0,{constraint:new Wr({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&er({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,r)=>{const s=i.getComponents();return s[3]=r,new we(s,i.mode)}}),this.textsC_=new By(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new iy(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const Lo=fe("colsw");class Hy{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Lo()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Lo("sw")),this.element.appendChild(i),this.swatchElem_=i;const r=e.createElement("button");r.classList.add(Lo("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=ol(e)}onValueChange_(){this.update_()}}class Ky{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Hy(e,{value:this.value,viewProps:this.viewProps})}}class al{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Xr.create(t.expanded),this.swatchC_=new Ky(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Mr(e,{parser:t.parser,props:ce.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Y0(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new ah(e,{viewProps:this.viewProps}):null;const r=new qy(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),er({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ja(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Jd(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!Ka(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Gy(n){return tn(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function Wy(n){return n.getComponents("rgb").reduce((e,t,i)=>{const r=Math.floor(i===3?t*255:t)&255;return e<<8|r},0)>>>0}function Yy(n){return new we([n>>16&255,n>>8&255,n&255],"rgb")}function Xy(n){return new we([n>>24&255,n>>16&255,n>>8&255,Le(n&255,0,255,0,1)],"rgb")}function Zy(n){return typeof n!="number"?we.black():Yy(n)}function Jy(n){return typeof n!="number"?we.black():Xy(n)}function gs(n,e){return typeof n!="object"||Ie(n)?!1:e in n&&typeof n[e]=="number"}function Dh(n){return gs(n,"r")&&gs(n,"g")&&gs(n,"b")}function $h(n){return Dh(n)&&gs(n,"a")}function Th(n){return Dh(n)}function ll(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let r=0;r<t.length;r++)if(t[r]!==i[r])return!1;return!0}function Dc(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function Qy(n){const e=Mh(n);return e?(t,i)=>{ts(t,e(i))}:null}function eC(n){const e=n?Wy:Gy;return(t,i)=>{ts(t,e(i))}}function tC(n,e,t){const r=mt(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b),n.writeProperty("a",r.a)}function nC(n,e,t){const r=mt(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b)}function iC(n,e){return(t,i)=>{n?tC(t,i,e):nC(t,i,e)}}function rC(n){var e;return!!(!((e=n?.color)===null||e===void 0)&&e.alpha)}function sC(n){return n?e=>ol(e,"0x"):e=>sl(e,"0x")}function oC(n){return"color"in n||n.view==="color"}const aC=vt({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!oC(e))return null;const t=nl(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:rC(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?Jy:Zy,equals:ll,writer:n=>eC(n.params.supportsAlpha)},controller:n=>{var e,t;return new al(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:sC(n.params.supportsAlpha),parser:ns("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function lC(n,e){if(!Th(n))return mt(we.black(),e);if(e==="int"){const t=Dc(n);return new we(t,"rgb")}if(e==="float"){const t=Dc(n);return new il(t,"rgb")}return mt(we.black(),"int")}function cC(n){return $h(n)}function uC(n){return e=>{const t=lC(e,n);return mt(t,"int")}}function dC(n,e){return t=>n?Ah(t,e):Vh(t,e)}const hC=vt({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!Th(n))return null;const i=nl(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=bh(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>uC(n.params.colorType),equals:ll,writer:n=>iC(cC(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=$h(n.initialValue);return new al(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:dC(i,n.params.colorType),parser:ns("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}}),pC=vt({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=Cy(n,bh(e));if(!t)return null;const i=Mh(t);if(!i)return null;const r=nl(e);return r?{initialValue:n,params:Object.assign(Object.assign({},r),{format:t,stringifier:i})}:null},binding:{reader:()=>xy,equals:ll,writer:n=>{const e=Qy(n.params.format);if(!e)throw Ye.notBindable();return e}},controller:n=>{var e,t;return new al(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:ns("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class cl{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,r)=>{var s,o;return(o=(s=this.components[r])===null||s===void 0?void 0:s.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}}const $c=fe("pndtxt");class mC{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add($c()),this.textViews.forEach(i=>{const r=e.createElement("div");r.classList.add($c("a")),r.appendChild(i.element),this.element.appendChild(r)})}}function vC(n,e,t){return new es(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:He(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class ul{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,r)=>vC(e,t,r)),this.acs_.forEach((i,r)=>{er({primary:this.value,secondary:i.value,forward:s=>t.assembly.toComponents(s)[r],backward:(s,o)=>{const a=t.assembly.toComponents(s);return a[r]=o,t.assembly.fromComponents(a)}})}),this.view=new mC(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class fC extends Ar{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function bC(n,e){const t=[],i=Hd(n,e);i&&t.push(i);const r=Kd(n);r&&t.push(r);const s=tl(n.options);return s&&t.push(s),new Zr(t)}const _C=vt({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=Ge(e,i=>Object.assign(Object.assign({},Wd(i)),{options:i.optional.custom(Qr),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>jd,constraint:n=>bC(n.params,n.initialValue),writer:n=>ts},controller:n=>{const e=n.value,t=n.constraint,i=t&&As(t,Jr);if(i)return new Tn(n.document,{props:new ce({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const r=Gd(n.params,e.rawValue),s=t&&As(t,Wr);return s?new Ds(n.document,Object.assign(Object.assign({},dh(Object.assign(Object.assign({},r),{keyScale:He(r.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:pn,value:e,viewProps:n.viewProps})):new es(n.document,{parser:pn,props:ce.fromObject(r),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof Ds?new fC(n.controller):n.controller.valueController instanceof Tn?new Qa(n.controller):null}});class Vn{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(Ie(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const Ih={toComponents:n=>n.getComponents(),fromComponents:n=>new Vn(...n)},Pi=fe("p2d");class wC{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Pi()),t.viewProps.bindClassModifiers(this.element),hn(t.expanded,Zi(this.element,Pi(void 0,"expanded")));const i=e.createElement("div");i.classList.add(Pi("h")),this.element.appendChild(i);const r=e.createElement("button");r.classList.add(Pi("b")),r.appendChild(Ws(e,"p2dpad")),t.viewProps.bindDisabled(r),i.appendChild(r),this.buttonElement=r;const s=e.createElement("div");if(s.classList.add(Pi("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(Pi("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const Cn=fe("p2dp");class gC{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Cn()),t.layout==="popup"&&this.element.classList.add(Cn(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Cn("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const r=e.createElementNS(Xt,"svg");r.classList.add(Cn("g")),this.padElement.appendChild(r),this.svgElem_=r;const s=e.createElementNS(Xt,"line");s.classList.add(Cn("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(Xt,"line");o.classList.add(Cn("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const a=e.createElementNS(Xt,"line");a.classList.add(Cn("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;const c=e.createElement("div");c.classList.add(Cn("m")),this.padElement.appendChild(c),this.markerElem_=c,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),r=Le(e,-i,+i,0,100),s=Le(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Tc(n,e,t){return[bt(e[0],mn(n)),bt(e[1],Dr(n))*(t?1:-1)]}class yC{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new gC(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bi(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),r=Le(e.point.x,0,e.bounds.width,-i,+i),s=Le(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new Vn(r,s),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){uh(e.key)&&e.preventDefault();const[t,i]=Tc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new Vn(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=Tc(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class CC{constructor(e,t){var i,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Xr.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new ah(e,{viewProps:this.viewProps}):null;const s=new yC(e,{layout:t.pickerLayout,props:new ce({invertsY:He(t.invertsY),max:He(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new ul(e,{assembly:Ih,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new wC(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),er({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,a)=>a})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Ja(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Jd(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!Ka(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function xC(n){return Vn.isObject(n)?new Vn(n.x,n.y):new Vn}function PC(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function EC(n,e){return new cl({assembly:Ih,components:[dn(Object.assign(Object.assign({},n),n.x),e.x),dn(Object.assign(Object.assign({},n),n.y),e.y)]})}function Ic(n,e){var t,i;if(!Ie(n.min)||!Ie(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const r=Ud(n);return Math.max(Math.abs(r)*10,Math.abs(e)*10)}function kC(n,e){var t,i;const r=Ic(ci(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),s=Ic(ci(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(r,s)}function SC(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}const LC=vt({id:"input-point2d",type:"input",accept:(n,e)=>{if(!Vn.isObject(n))return null;const t=Ge(e,i=>Object.assign(Object.assign({},$r(i)),{expanded:i.optional.boolean,picker:i.optional.custom(ph),readonly:i.optional.constant(!1),x:i.optional.custom(Sn),y:i.optional.object(Object.assign(Object.assign({},$r(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>xC,constraint:n=>EC(n.params,n.initialValue),equals:Vn.equals,writer:()=>PC},controller:n=>{var e,t;const i=n.document,r=n.value,s=n.constraint,o=[n.params.x,n.params.y];return new CC(i,{axes:r.rawValue.getComponents().map((a,c)=>{var u;return Ha({constraint:s.components[c],initialValue:a,params:ci(n.params,(u=o[c])!==null&&u!==void 0?u:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:SC(n.params),max:kC(n.params,r.rawValue),parser:pn,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:r,viewProps:n.viewProps})}});class Ni{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Ie(e))return!1;const t=e.x,i=e.y,r=e.z;return!(typeof t!="number"||typeof i!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Oh={toComponents:n=>n.getComponents(),fromComponents:n=>new Ni(...n)};function VC(n){return Ni.isObject(n)?new Ni(n.x,n.y,n.z):new Ni}function AC(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function MC(n,e){return new cl({assembly:Oh,components:[dn(Object.assign(Object.assign({},n),n.x),e.x),dn(Object.assign(Object.assign({},n),n.y),e.y),dn(Object.assign(Object.assign({},n),n.z),e.z)]})}const DC=vt({id:"input-point3d",type:"input",accept:(n,e)=>{if(!Ni.isObject(n))return null;const t=Ge(e,i=>Object.assign(Object.assign({},$r(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(Sn),y:i.optional.custom(Sn),z:i.optional.custom(Sn)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>VC,constraint:n=>MC(n.params,n.initialValue),equals:Ni.equals,writer:n=>AC},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new ul(n.document,{assembly:Oh,axes:e.rawValue.getComponents().map((r,s)=>{var o;return Ha({constraint:t.components[s],initialValue:r,params:ci(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:pn,value:e,viewProps:n.viewProps})}});class ji{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.z=i,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Ie(e))return!1;const t=e.x,i=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof i!="number"||typeof r!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const zh={toComponents:n=>n.getComponents(),fromComponents:n=>new ji(...n)};function $C(n){return ji.isObject(n)?new ji(n.x,n.y,n.z,n.w):new ji}function TC(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function IC(n,e){return new cl({assembly:zh,components:[dn(Object.assign(Object.assign({},n),n.x),e.x),dn(Object.assign(Object.assign({},n),n.y),e.y),dn(Object.assign(Object.assign({},n),n.z),e.z),dn(Object.assign(Object.assign({},n),n.w),e.w)]})}const OC=vt({id:"input-point4d",type:"input",accept:(n,e)=>{if(!ji.isObject(n))return null;const t=Ge(e,i=>Object.assign(Object.assign({},$r(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(Sn),x:i.optional.custom(Sn),y:i.optional.custom(Sn),z:i.optional.custom(Sn)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>$C,constraint:n=>IC(n.params,n.initialValue),equals:ji.equals,writer:n=>TC},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new ul(n.document,{assembly:zh,axes:e.rawValue.getComponents().map((r,s)=>{var o;return Ha({constraint:t.components[s],initialValue:r,params:ci(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:pn,value:e,viewProps:n.viewProps})}});function zC(n){const e=[],t=tl(n.options);return t&&e.push(t),new Zr(e)}const RC=vt({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=Ge(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(Qr)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>ch,constraint:n=>zC(n.params),writer:n=>ts},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&As(i,Jr);return r?new Tn(e,{props:new ce({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new Mr(e,{parser:s=>s,props:ce.fromObject({formatter:ia}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof Tn?new Qa(n.controller):null}}),is={monitor:{defaultInterval:200,defaultRows:3}},Oc=fe("mll");class BC{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Oc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(Oc("i")),i.style.height=`calc(var(${hh("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(r=>{r!==void 0&&i.push(this.formatter_(r))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class dl{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new BC(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const zc=fe("sgl");class NC{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(zc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(zc("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class hl{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new NC(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}const jC=vt({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=Ge(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>lh},controller:n=>{var e;return n.value.rawValue.length===1?new hl(n.document,{formatter:Vc,value:n.value,viewProps:n.viewProps}):new dl(n.document,{formatter:Vc,rows:(e=n.params.rows)!==null&&e!==void 0?e:is.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class FC extends Ar{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const xn=fe("grl");class UC{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(xn()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(Xt,"svg");i.classList.add(xn("g")),i.style.height=`calc(var(${hh("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const r=e.createElementNS(Xt,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const s=e.createElement("div");s.classList.add(xn("t"),fe("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,r=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((h,p)=>{if(h===void 0)return;const m=Le(p,0,i,0,e),v=Le(h,r,s,t,0);o.push([m,v].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const a=this.tooltipElem_,c=this.value.rawValue[this.cursor_.rawValue];if(c===void 0){a.classList.remove(xn("t","a"));return}const u=Le(this.cursor_.rawValue,0,i,0,e),d=Le(c,r,s,t,0);a.style.left=`${u}px`,a.style.top=`${d}px`,a.textContent=`${this.formatter_(c)}`,a.classList.contains(xn("t","a"))||(a.classList.add(xn("t","a"),xn("t","in")),Vs(a),a.classList.remove(xn("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Rh{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=He(-1),this.view=new UC(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Ka(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new bi(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return St(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Lt(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(Le(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Le(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function ra(n){return Ie(n.format)?gt(2):n.format}function qC(n){var e;return n.value.rawValue.length===1?new hl(n.document,{formatter:ra(n.params),value:n.value,viewProps:n.viewProps}):new dl(n.document,{formatter:ra(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:is.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function HC(n){var e,t,i;return new Rh(n.document,{formatter:ra(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:is.monitor.defaultRows,props:ce.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function Rc(n){return n.view==="graph"}const KC=vt({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=Ge(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>Rc(n)?64:1,reader:n=>jd},controller:n=>Rc(n.params)?HC(n):qC(n),api:n=>n.controller.valueController instanceof Rh?new FC(n.controller):null}),GC=vt({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=Ge(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>ch},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new dl(n.document,{formatter:ia,rows:(e=n.params.rows)!==null&&e!==void 0?e:is.monitor.defaultRows,value:t,viewProps:n.viewProps}):new hl(n.document,{formatter:ia,value:t,viewProps:n.viewProps})}});class WC{constructor(){this.map_=new Map}get(e){var t;return(t=this.map_.get(e))!==null&&t!==void 0?t:null}has(e){return this.map_.has(e)}add(e,t){return this.map_.set(e,t),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),t}}class YC{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function XC(n,e){var t;const i=n.accept(e.target.read(),e.params);if(Ie(i))return null;const r={target:e.target,initialValue:i.initialValue,params:i.params},s=Ge(e.params,h=>({disabled:h.optional.boolean,hidden:h.optional.boolean,label:h.optional.string,tag:h.optional.string})),o=n.binding.reader(r),a=n.binding.constraint?n.binding.constraint(r):void 0,c=new YC({reader:o,target:e.target,writer:n.binding.writer(r)}),u=new $g(He(o(i.initialValue),{constraint:a,equals:n.binding.equals}),c),d=n.controller({constraint:a,document:e.document,initialValue:i.initialValue,params:i.params,value:u,viewProps:fn.create({disabled:s?.disabled,hidden:s?.hidden})});return new Wg(e.document,{blade:Qi(),props:ce.fromObject({label:"label"in e.params?(t=s?.label)!==null&&t!==void 0?t:null:e.target.key}),tag:s?.tag,value:u,valueController:d})}class ZC{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function JC(n,e){return e===0?new A0:new M0(n,e??is.monitor.defaultInterval)}function QC(n,e){var t,i,r;const s=n.accept(e.target.read(),e.params);if(Ie(s))return null;const o={target:e.target,initialValue:s.initialValue,params:s.params},a=Ge(e.params,p=>({bufferSize:p.optional.number,disabled:p.optional.boolean,hidden:p.optional.boolean,interval:p.optional.number,label:p.optional.string})),c=n.binding.reader(o),u=(i=(t=a?.bufferSize)!==null&&t!==void 0?t:n.binding.defaultBufferSize&&n.binding.defaultBufferSize(s.params))!==null&&i!==void 0?i:1,d=new Qg({binding:new ZC({reader:c,target:e.target}),bufferSize:u,ticker:JC(e.document,a?.interval)}),h=n.controller({document:e.document,params:s.params,value:d,viewProps:fn.create({disabled:a?.disabled,hidden:a?.hidden})});return h.viewProps.bindDisabled(d.ticker),h.viewProps.handleDispose(()=>{d.ticker.dispose()}),new t0(e.document,{blade:Qi(),props:ce.fromObject({label:"label"in e.params?(r=a?.label)!==null&&r!==void 0?r:null:e.target.key}),value:d,valueController:h})}class ex{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,t){if(!q0(t.core))throw Ye.notCompatible(e,t.id);t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput_(e,t,i){return this.pluginsMap_.inputs.reduce((r,s)=>r??XC(s,{document:e,target:t,params:i}),null)}createMonitor_(e,t,i){return this.pluginsMap_.monitors.reduce((r,s)=>r??QC(s,{document:e,params:i,target:t}),null)}createBinding(e,t,i){const r=t.read();if(Ie(r))throw new Ye({context:{key:t.key},type:"nomatchingcontroller"});const s=this.createInput_(e,t,i);if(s)return s;const o=this.createMonitor_(e,t,i);if(o)return o;throw new Ye({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const i=this.pluginsMap_.blades.reduce((r,s)=>r??V0(s,{document:e,params:t}),null);if(!i)throw new Ye({type:"nomatchingview",context:{params:t}});return i}createInputBindingApi_(e){const t=this.pluginsMap_.inputs.reduce((i,r)=>{var s,o;return i||((o=(s=r.api)===null||s===void 0?void 0:s.call(r,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new Ar(e))}createMonitorBindingApi_(e){const t=this.pluginsMap_.monitors.reduce((i,r)=>{var s,o;return i||((o=(s=r.api)===null||s===void 0?void 0:s.call(r,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new Ar(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Yg(e))return this.createInputBindingApi_(e);if(n0(e))return this.createMonitorBindingApi_(e);throw Ye.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(Gg(e))return this.createBindingApi(e);const t=this.pluginsMap_.blades.reduce((i,r)=>i??r.api({controller:e,pool:this}),null);if(!t)throw Ye.shouldNeverHappen();return this.apiCache_.add(e,t)}}const tx=new WC;function nx(){const n=new ex(tx);return[LC,DC,OC,RC,_C,pC,hC,aC,W0,jC,GC,KC,a0,g0,oh].forEach(e=>{n.register("core",e)}),n}class ix extends fi{constructor(e){super(e),this.emitter_=new Je,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Yr(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class rx extends fi{}class sx extends fi{constructor(e){super(e),this.emitter_=new Je,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Yr(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}class ox extends fi{constructor(e){super(e),this.emitter_=new Je,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Yr(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)},{key:t}),this}off(e,t){return this.emitter_.off(e,t),this}}const ax=function(){return{id:"list",type:"blade",core:Ji,accept(n){const e=Ge(n,t=>({options:t.required.custom(Qr),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}));return e?{params:e}:null},controller(n){const e=new Jr(el(n.params.options)),t=He(n.params.value,{constraint:e}),i=new Tn(n.document,{props:new ce({options:e.values.value("options")}),value:t,viewProps:n.viewProps});return new ui(n.document,{blade:n.blade,props:ce.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof ui)||!(n.controller.valueController instanceof Tn)?null:new ix(n.controller)}}}();class lx extends rh{constructor(e,t){super(e,t)}get element(){return this.controller.view.element}}class cx extends ta{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const Bc=fe("spr");class ux{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Bc()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("hr");i.classList.add(Bc("r")),this.element.appendChild(i)}}class Nc extends Ys{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new ux(e,{viewProps:t.viewProps})}))}}const dx={id:"separator",type:"blade",core:Ji,accept(n){const e=Ge(n,t=>({view:t.required.constant("separator")}));return e?{params:e}:null},controller(n){return new Nc(n.document,{blade:n.blade,viewProps:n.viewProps})},api(n){return n.controller instanceof Nc?new rx(n.controller):null}},hx={id:"slider",type:"blade",core:Ji,accept(n){const e=Ge(n,t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}));return e?{params:e}:null},controller(n){var e,t;const i=(e=n.params.value)!==null&&e!==void 0?e:0,r=new Wr({max:n.params.max,min:n.params.min}),s=He(i,{constraint:r}),o=new Ds(n.document,Object.assign(Object.assign({},dh({formatter:(t=n.params.format)!==null&&t!==void 0?t:Lg,keyScale:He(1),max:r.values.value("max"),min:r.values.value("min"),pointerScale:qd(n.params,i)})),{parser:pn,value:s,viewProps:n.viewProps}));return new ui(n.document,{blade:n.blade,props:ce.fromObject({label:n.params.label}),value:s,valueController:o})},api(n){return!(n.controller instanceof ui)||!(n.controller.valueController instanceof Ds)?null:new sx(n.controller)}},px=function(){return{id:"text",type:"blade",core:Ji,accept(n){const e=Ge(n,t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}));return e?{params:e}:null},controller(n){var e;const t=He(n.params.value),i=new Mr(n.document,{parser:n.params.parse,props:ce.fromObject({formatter:(e=n.params.format)!==null&&e!==void 0?e:r=>String(r)}),value:t,viewProps:n.viewProps});return new ui(n.document,{blade:n.blade,props:ce.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof ui)||!(n.controller.valueController instanceof Mr)?null:new ox(n.controller)}}}();function mx(n){const e=n.createElement("div");return e.classList.add(fe("dfw")()),n.body&&n.body.appendChild(e),e}function vx(n,e,t){if(n.querySelector(`style[data-tp-style=${e}]`))return;const i=n.createElement("style");i.dataset.tpStyle=e,i.textContent=t,n.head.appendChild(i)}let fx=class extends lx{constructor(e){var t,i;const r=e??{},s=(t=r.document)!==null&&t!==void 0?t:Ng(),o=nx(),a=new cx(s,{expanded:r.expanded,blade:Qi(),props:ce.fromObject({title:r.title}),viewProps:fn.create()});super(a,o),this.pool_=o,this.containerElem_=(i=r.container)!==null&&i!==void 0?i:mx(s),this.containerElem_.appendChild(this.element),this.doc_=s,this.usesDefaultWrapper_=!r.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Ye.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw Ye.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&vx(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(i=>{this.pool_.register(e.id,i)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{display:block;height:16px;inset:0;margin:auto;opacity:0;position:absolute;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{inset:0;position:absolute}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;inset:0;position:absolute}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);content:"";display:block;inset:0;position:absolute}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin:auto;position:absolute}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;content:"";display:block;height:2px;inset:0;margin-bottom:auto;margin-top:auto;position:absolute}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);content:"";inset:0 0 2px;pointer-events:none;position:absolute}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[ax,dx,hx,oh,px]})}};new ih("4.0.5");function pl(n,e){Ae(e,!1);const[t,i]=pi(),r=()=>wt(v,"$existingParentStore",t),s=()=>wt(m,"$parentStore",t);let o=y(e,"title",24,()=>{}),a=y(e,"userExpandable",8,!0),c=y(e,"expanded",12,!0),u=y(e,"theme",24,()=>{}),d=y(e,"scale",8,1),h=y(e,"userCreatedPane",8,!0),p=y(e,"tpPane",28,()=>{});const m=$t(),v=_t("parentStore");let b=[];ri("registerPlugin",D=>{p()===void 0?console.warn(`tpPane is undefined, failed to register plugin "${D.id}"`):b.includes(D.id)||(p()?.registerPlugin(D),b.push(D.id))}),ri("userCreatedPane",h()),r()!==void 0&&console.warn("<Panes> must not be nested"),Eu(m,new fx({expanded:c(),title:o()})),s().on("fold",()=>{s().expanded!==void 0&&c()!==s().expanded&&c(s().expanded)}),p(s()),ri("parentStore",m),mi(()=>{s().dispose()});function C(D){if(p())if(D===1)p().element.style.removeProperty("transform-origin"),p().element.style.removeProperty("transform"),p().element.style.removeProperty("width");else{const x=Math.max(0,D);p(p().element.style.transformOrigin="0 0",!0),p(p().element.style.transform=`scale(${x})`,!0),p(p().element.style.width=`${100/x}%`,!0)}}function E(D){Pu().then(()=>{p()?.expanded!==void 0&&D!==void 0&&p().expanded!==D&&p(p().expanded=D,!0)})}X(()=>R(p()),()=>{p()?.element&&p()?.element.classList.add("svelte-tweakpane-ui")}),X(()=>(R(p()),R(d())),()=>{p()&&C(d())}),X(()=>(R(p()),R(a())),()=>{p()&&zd(a(),p().element,"tp-rotv_b","tp-rotv_m")}),X(()=>(R(p()),R(o())),()=>{p()&&o()!==void 0&&p(p().title=o().length>0?o():" ",!0)}),X(()=>(R(p()),R(u())),()=>{p()&&Hw(p().element,u())}),X(()=>(R(p()),R(c())),()=>{p()&&E(c())}),Ut(),rt();var _=ve(),T=K(_);{var U=D=>{var x=ve(),g=K(x);Rt(g,e,"default",{},null),L(D,x)};Y(T,D=>{D(U)})}L(n,_),Me(),i()}var bx=j("<div><!></div>");function ml(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["expanded","width","tpPane","theme"]);Ae(e,!1);let r=y(e,"expanded",28,()=>{}),s=y(e,"width",24,()=>{}),o=y(e,"tpPane",28,()=>{}),a=y(e,"theme",24,()=>({baseBorderRadius:"0px",baseShadowColor:"hsla(0, 0%, 0%, 0)"})),c=he();On(()=>{if(o()){const m=o().element.parentElement;l(c).append(o().element),m?.remove()}else console.warn("tpPane is undefined")}),rt();var u=bx();let d;var h=H(u),p=oe(()=>Ks(i,"position"));pl(h,Gt({get theme(){return a()}},()=>l(p),{get expanded(){return r()},set expanded(m){r(m)},get tpPane(){return o()},set tpPane(m){o(m)},children:(m,v)=>{var b=ve(),f=K(b);Rt(f,e,"default",{},null),L(m,b)},$$slots:{default:!0},$$legacy:!0})),q(u),kt(u,m=>N(c,m),()=>l(c)),ne(()=>d=Jt(u,"",d,{width:s()===void 0?null:`${s()}px`})),L(n,u),Me()}class _x{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller_.emitter.on(e,()=>{i(new vi(this))}),this}}class wx extends vi{constructor(e,t,i){super(e),this.cell=t,this.index=i}}class gx extends zn{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new lt;const t=this.controller.valueController;t.cellControllers.forEach((i,r)=>{const s=new _x(i);this.cellToApiMap_.set(i,s),i.emitter.on("click",()=>{const o=r%t.size[0],a=Math.floor(r/t.size[0]);this.emitter_.emit("click",{event:new wx(this,s,[o,a])})})})}cell(e,t){const i=this.controller.valueController,r=i.cellControllers[t*i.size[0]+e];return this.cellToApiMap_.get(r)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r.event)}),this}}class yx{constructor(e,t){this.size=t.size;const[i,r]=this.size,s=[];for(let o=0;o<r;o++)for(let a=0;a<i;a++){const c=new id(e,{props:Q.fromObject(Object.assign({},t.cellConfig(a,o))),viewProps:ai.create()});s.push(c)}this.cellCs_=s,this.viewProps=ai.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(o=>{o.viewProps.set("disposed",!0)})}),this.view=new hd(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${i}, 1fr)`,this.cellCs_.forEach(o=>{this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}}class jc extends Wi{constructor(e,t){const i=t.valueController,r=new qr(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:r.view,viewProps:i.viewProps}),this.valueController=i,this.labelController=r}}Pe({id:"buttongrid",type:"blade",accept(n){const e=ge(n,t=>({cells:t.required.function,size:t.required.array(t.required.number),view:t.required.constant("buttongrid"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new jc(n.document,{blade:n.blade,labelProps:Q.fromObject({label:n.params.label}),valueController:new yx(n.document,{cellConfig:n.params.cells,size:n.params.size})})},api(n){return n.controller instanceof jc?new gx(n.controller):null}});class Cx extends zn{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,t){const i=t.bind(this);return this.controller.valueController.value.emitter.on(e,r=>{i(new zs(this,r.rawValue,r.options.last))}),this}}function Mt(n,e,t){return n*(1-t)+e*t}const xx=20,Px=.001,Vo=100;function Ex(n,e){let t=.25,i=.5,r=-1;for(let s=0;s<xx;s++){const[o,a]=n.curve(i);if(i+=t*(o<e?1:-1),r=a,t*=.5,Math.abs(e-o)<Px)break}return r}class hi{constructor(e=0,t=0,i=1,r=1){this.cache_=[],this.comps_=[e,t,i,r]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return $e(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,t){return e.x1===t.x1&&e.y1===t.y1&&e.x2===t.x2&&e.y2===t.y2}curve(e){const t=Mt(0,this.x1,e),i=Mt(0,this.y1,e),r=Mt(this.x1,this.x2,e),s=Mt(this.y1,this.y2,e),o=Mt(this.x2,1,e),a=Mt(this.y2,1,e),c=Mt(t,r,e),u=Mt(i,s,e),d=Mt(r,o,e),h=Mt(s,a,e);return[Mt(c,d,e),Mt(u,h,e)]}y(e){if(this.cache_.length===0){const t=[];for(let i=0;i<Vo;i++)t.push(Ex(this,ie(i,0,Vo-1,0,1)));this.cache_=t}return this.cache_[Math.round(ie(Fe(e,0,1),0,1,0,Vo-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const Bh={toComponents:n=>n.toObject(),fromComponents:n=>new hi(...n)};function kx(n){const e=Ze(2);return`cubic-bezier(${n.toObject().map(i=>e(i)).join(", ")})`}const Fc=[0,.5,.5,1];function Sx(n){const e=n.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new hi(...Fc);const t=[e[1],e[2],e[3],e[4]].reduce((i,r)=>{if(!i)return null;const s=Number(r);return isNaN(s)?null:[...i,s]},[]);return new hi(...t??Fc)}const Wn=G("cbz");class Lx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Wn()),t.viewProps.bindClassModifiers(this.element),t.foldable.bindExpandedClass(this.element,Wn(void 0,"expanded")),Et(t.foldable,"completed",vn(this.element,Wn(void 0,"cpl")));const i=e.createElement("div");i.classList.add(Wn("h")),this.element.appendChild(i);const r=e.createElement("button");r.classList.add(Wn("b")),t.viewProps.bindDisabled(r);const s=e.createElementNS(xe,"svg");s.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',r.appendChild(s),i.appendChild(r),this.buttonElement=r;const o=e.createElement("div");if(o.classList.add(Wn("t")),i.appendChild(o),this.textElement=o,t.pickerLayout==="inline"){const a=e.createElement("div");a.classList.add(Wn("p")),this.element.appendChild(a),this.pickerElement=a}else this.pickerElement=null}}const Ao=G("cbzp");class Vx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ao()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Ao("g")),this.element.appendChild(i),this.graphElement=i;const r=e.createElement("div");r.classList.add(Ao("t")),this.element.appendChild(r),this.textElement=r}}function Nh(n,e){const t=new MutationObserver(r=>{for(const s of r)s.type==="childList"&&s.addedNodes.forEach(o=>{o.contains(o)&&(e(),t.disconnect())})}),i=n.ownerDocument;t.observe(i.body,{attributes:!0,childList:!0,subtree:!0})}const Pn=G("cbzg");function Ax(n,e){return t=>e(n(t))}class Mx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Pn()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Pn("p")),this.element.appendChild(i),this.previewElement=i;const r=e.createElementNS(xe,"svg");r.classList.add(Pn("g")),this.element.appendChild(r),this.svgElem_=r;const s=e.createElementNS(xe,"path");s.classList.add(Pn("u")),this.svgElem_.appendChild(s),this.guideElem_=s;const o=e.createElementNS(xe,"polyline");o.classList.add(Pn("l")),this.svgElem_.appendChild(o),this.lineElem_=o,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(a=>{a.classList.add(Pn("h")),this.element.appendChild(a)}),this.vectorElems_=[e.createElementNS(xe,"line"),e.createElementNS(xe,"line")],this.vectorElems_.forEach(a=>{a.classList.add(Pn("v")),this.svgElem_.appendChild(a)}),this.value_=t.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=t.selection,this.handleElems_.forEach((a,c)=>{Bt(this.sel_,Ax(u=>u===c,vn(a,Pn("h","sel"))))}),Nh(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,t){const{clientWidth:i,clientHeight:r}=this.element,s=this.getVertMargin_(r);return{x:ie(e,0,1,0,i),y:ie(t,0,1,r-s,s)}}positionToValue(e,t){const i=this.element.getBoundingClientRect(),r=i.width,s=i.height,o=this.getVertMargin_(s);return{x:Fe(ie(e,0,r,0,1),0,1),y:ie(t,s-o,o,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(s=>{const o=this.valueToPosition(0,s),a=this.valueToPosition(1,s);return[`M ${o.x},${o.y}`,`L ${a.x},${a.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,t=[];let i=0;for(;;){const s=this.valueToPosition(...e.curve(i));if(t.push([s.x,s.y].join(",")),i>=1)break;i=Math.min(i+.05,1)}this.lineElem_.setAttributeNS(null,"points",t.join(" "));const r=e.toObject();[0,1].forEach(s=>{const o=this.valueToPosition(s,s),a=this.valueToPosition(r[s*2],r[s*2+1]),c=this.vectorElems_[s];c.setAttributeNS(null,"x1",String(o.x)),c.setAttributeNS(null,"y1",String(o.y)),c.setAttributeNS(null,"x2",String(a.x)),c.setAttributeNS(null,"y2",String(a.y));const u=this.handleElems_[s];u.style.left=`${a.x}px`,u.style.top=`${a.y}px`})}onValueChange_(){this.refresh()}}const Uc=24,qc=400,Hc=1e3,Ei=G("cbzprv");class Dx{constructor(e,t){this.stopped_=!0,this.startTime_=-1,this.requestId_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ei()),t.viewProps.bindClassModifiers(this.element);const i=e.createElementNS(xe,"svg");i.classList.add(Ei("g")),this.element.appendChild(i),this.svgElem_=i;const r=e.createElementNS(xe,"path");r.classList.add(Ei("t")),this.svgElem_.appendChild(r),this.ticksElem_=r;const s=e.createElement("div");s.classList.add(Ei("m")),this.element.appendChild(s),this.markerElem_=s,this.value_=t.value,this.value_.emitter.on("change",this.onValueChange_),t.viewProps.handleDispose(this.onDispose_),Nh(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(Ei("m","a")),this.startTime_=new Date().getTime()+qc,this.stopped_=!1,this.requestId_=requestAnimationFrame(this.onTimer_)}stop(){cancelAnimationFrame(this.requestId_),this.stopped_=!0,this.markerElem_.classList.remove(Ei("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const t=this.value_.rawValue.y(Fe(e,0,1));this.markerElem_.style.left=`${t*100}%`}refresh(){const{clientWidth:e,clientHeight:t}=this.svgElem_,i=[],r=this.value_.rawValue;for(let s=0;s<Uc;s++){const o=ie(s,0,Uc-1,0,1),a=ie(r.y(o),0,1,0,e);i.push(`M ${a},0 v${t}`)}this.ticksElem_.setAttributeNS(null,"d",i.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,t=e/Hc;this.updateMarker_(t),e>Hc+qc&&this.stop(),this.stopped_||(this.requestId_=requestAnimationFrame(this.onTimer_))}onValueChange_(){this.refresh(),this.play()}}function sa(n,e,t,i){const r=t-n,s=i-e;return Math.sqrt(r*r+s*s)}function $x(n,e,t,i){const r=sa(n,e,t,i),s=Math.atan2(i-e,t-n),o=Math.round(s/(Math.PI/4))*Math.PI/4;return{x:n+Math.cos(o)*r,y:e+Math.sin(o)*r}}class Tx{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=t.keyScale,this.value=t.value,this.sel_=qe(0),this.viewProps=t.viewProps,this.view=new Mx(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new Dx(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",r=>{r.stopImmediatePropagation(),r.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const i=new tt(this.view.element);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,t,i){const r=this.sel_.rawValue,s=this.value.rawValue.toObject(),o=this.view.positionToValue(e.x,e.y),a=t?$x(r,r,o.x,o.y):o;s[r*2]=a.x,s[r*2+1]=a.y,this.value.setRawValue(new hi(...s),i)}onPointerDown_(e){const t=e.data;if(!t.point)return;const i=this.value.rawValue,r=this.view.valueToPosition(i.x1,i.y1),s=sa(t.point.x,t.point.y,r.x,r.y),o=this.view.valueToPosition(i.x2,i.y2),a=sa(t.point.x,t.point.y,o.x,o.y);this.sel_.rawValue=s<=a?0:1,this.updateValue_(t.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const t=e.data;t.point&&this.updateValue_(t.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const t=e.data;t.point&&this.updateValue_(t.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){kr(e.key)&&e.preventDefault();const t=this.sel_.rawValue,i=this.value.rawValue.toObject(),r=this.keyScale_.rawValue;i[t*2]+=Xe(r,Ft(e)),i[t*2+1]+=Xe(r,Dn(e)),this.value.setRawValue(new hi(...i),{forceEmit:!1,last:!1})}onKeyUp_(e){kr(e.key)&&e.preventDefault();const t=this.keyScale_.rawValue,i=Xe(t,Ft(e)),r=Xe(t,Dn(e));i===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ix{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Vx(e,{viewProps:this.viewProps}),this.gc_=new Tx(e,{keyScale:t.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const i=Object.assign(Object.assign({},t.axis),{constraint:new Os({max:1,min:0})}),r=Object.assign(Object.assign({},t.axis),{constraint:void 0});this.tc_=new Bn(e,{assembly:Bh,axes:[i,r,i,r],parser:at,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class Kc{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Hr.create(t.expanded),this.view=new Lx(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new Us(e,{parser:Sx,props:Q.fromObject({formatter:kx}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=t.pickerLayout==="popup"?new Fs(e,{viewProps:this.viewProps}):null;const i=new Ix(e,{axis:t.axis,value:this.value,viewProps:this.viewProps});i.allFocusableElements.forEach(r=>{r.addEventListener("blur",this.onPopupChildBlur_),r.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Bt(this.popC_.shows,r=>{r&&i.refresh()}),Rn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:r=>r,backward:(r,s)=>s})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Kr(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const t=e.relatedTarget;(!t||!this.popC_.view.element.contains(t))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Bs(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!Ur(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function Ox(){return new $n({assembly:Bh,components:[0,1,2,3].map(n=>n%2===0?new Os({min:0,max:1}):void 0)})}Pe({id:"cubicbezier",type:"blade",accept(n){const e=ge(n,t=>({value:t.required.array(t.required.number),view:t.required.constant("cubicbezier"),expanded:t.optional.boolean,label:t.optional.string,picker:t.optional.custom(i=>i==="inline"||i==="popup"?i:void 0)}));return e?{params:e}:null},controller(n){var e,t;const i=new hi(...n.params.value),r=qe(i,{constraint:Ox(),equals:hi.equals}),s=new Kc(n.document,{axis:{textProps:Q.fromObject({keyScale:.1,pointerScale:.01,formatter:Ze(2)})},expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:r,viewProps:n.viewProps});return new Es(n.document,{blade:n.blade,props:Q.fromObject({label:n.params.label}),value:r,valueController:s})},api(n){return!(n.controller instanceof Es)||!(n.controller.valueController instanceof Kc)?null:new Cx(n.controller)}});class zx extends zn{get fps(){return this.controller.valueController.fps}get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}on(e,t){const i=t.bind(this);return this.controller.valueController.ticker.emitter.on(e,()=>{i(new vi(this))}),this}}const Gc=20;class Rx{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const t=this.timestamps_[0];return 1e3*(this.frameCount_-t.frameCount)/(e-t.time)}compactTimestamps_(){if(this.timestamps_.length<=Gc)return;const e=this.timestamps_.length-Gc;this.timestamps_.splice(0,e);const t=this.timestamps_[0].frameCount;this.timestamps_.forEach(i=>{i.frameCount-=t}),this.frameCount_-=t}end(e){if(this.start_===null)return;const t=e.getTime();this.duration_=t-this.start_,this.start_=null,this.fps_=this.calculateFps_(t),this.timestamps_.push({frameCount:this.frameCount_,time:t}),++this.frameCount_,this.compactTimestamps_()}}const mr=G("fps");class Bx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(mr()),t.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(mr("g")),this.element.appendChild(this.graphElement);const i=e.createElement("div");i.classList.add(mr("l")),this.element.appendChild(i);const r=e.createElement("span");r.classList.add(mr("v")),r.textContent="--",i.appendChild(r),this.valueElement=r;const s=e.createElement("span");s.classList.add(mr("u")),s.textContent="FPS",i.appendChild(s)}}class Nx{constructor(e,t){this.stopwatch_=new Rx,this.onTick_=this.onTick_.bind(this),this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.props=t.props,this.value_=t.value,this.viewProps=t.viewProps,this.view=new Bx(e,{viewProps:this.viewProps}),this.graphC_=new Na(e,{formatter:Ze(0),props:this.props,rows:t.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker.dispose()})}get fps(){return this.stopwatch_.fps}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.fps;if(e!==null){const t=this.value_.rawValue;this.value_.rawValue=hb(t,e),this.view.valueElement.textContent=e.toFixed(0)}}}class Wc extends Wi{constructor(e,t){const i=t.valueController,r=new qr(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:r.view,viewProps:i.viewProps}),this.valueController=i,this.labelController=r}}function jx(n,e){return e===0?new ld:new cd(n,e??Xi.monitor.defaultInterval)}Pe({id:"fpsgraph",type:"blade",accept(n){const e=ge(n,t=>({view:t.required.constant("fpsgraph"),interval:t.optional.number,label:t.optional.string,rows:t.optional.number,max:t.optional.number,min:t.optional.number}));return e?{params:e}:null},controller(n){var e,t,i,r;const s=(e=n.params.interval)!==null&&e!==void 0?e:500;return new Wc(n.document,{blade:n.blade,labelProps:Q.fromObject({label:n.params.label}),valueController:new Nx(n.document,{props:Q.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:90,min:(i=n.params.min)!==null&&i!==void 0?i:0}),rows:(r=n.params.rows)!==null&&r!==void 0?r:2,ticker:jx(n.document,s),value:qe(ub(80)),viewProps:n.viewProps})})},api(n){return n.controller instanceof Wc?new zx(n.controller):null}});class Nt{constructor(e,t){this.min=e,this.max=t}static isObject(e){if(typeof e!="object"||e===null)return!1;const t=e.min,i=e.max;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.min===t.min&&e.max===t.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const jh={fromComponents:n=>new Nt(n[0],n[1]),toComponents:n=>[n.min,n.max]};class Fh{constructor(e){this.edge=e}constrain(e){var t,i,r,s,o,a,c,u;if(e.min<=e.max)return new Nt((i=(t=this.edge)===null||t===void 0?void 0:t.constrain(e.min))!==null&&i!==void 0?i:e.min,(s=(r=this.edge)===null||r===void 0?void 0:r.constrain(e.max))!==null&&s!==void 0?s:e.max);const d=(e.min+e.max)/2;return new Nt((a=(o=this.edge)===null||o===void 0?void 0:o.constrain(d))!==null&&a!==void 0?a:d,(u=(c=this.edge)===null||c===void 0?void 0:c.constrain(d))!==null&&u!==void 0?u:d)}}const Mo=G("rsltxt");class Fx{constructor(e,t){this.sliderView_=t.sliderView,this.textView_=t.textView,this.element=e.createElement("div"),this.element.classList.add(Mo());const i=e.createElement("div");i.classList.add(Mo("s")),i.appendChild(this.sliderView_.element),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Mo("t")),r.appendChild(this.textView_.element),this.element.appendChild(r)}}const Yn=G("rsl");class Ux{constructor(e,t){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=t.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(Yn()),t.viewProps.bindClassModifiers(this.element),this.value_=t.value,this.value_.emitter.on("change",this.onValueChange_);const i=e.createElement("div");i.classList.add(Yn("t")),this.element.appendChild(i),this.trackElement=i;const r=e.createElement("div");r.classList.add(Yn("b")),i.appendChild(r),this.barElement=r;const s=["min","max"].map(o=>{const a=e.createElement("div");return a.classList.add(Yn("k"),Yn("k",o)),i.appendChild(a),a});this.knobElements=[s[0],s[1]],this.update_()}valueToX_(e){const t=this.sliderProps_.get("min"),i=this.sliderProps_.get("max");return Fe(ie(e,t,i,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(Yn(void 0,"zero")):this.element.classList.remove(Yn(void 0,"zero"));const t=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${t[0]}%`,this.barElement.style.right=`${100-t[1]}%`,this.knobElements.forEach((i,r)=>{i.style.left=`${t[r]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class qx{constructor(e,t){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=t.sliderProps,this.viewProps=t.viewProps,this.value=t.value,this.view=new Ux(e,{sliderProps:this.sliderProps,value:this.value,viewProps:t.viewProps});const i=new tt(this.view.trackElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const t=(e.point.x+this.ofs_())/e.bounds.width,i=this.sliderProps.get("min"),r=this.sliderProps.get("max");return ie(t,0,1,i,r)}onPointerDown_(e){if(!e.data.point)return;const t=e.data.point.x/e.data.bounds.width,i=this.value.rawValue,r=this.sliderProps.get("min"),s=this.sliderProps.get("max"),o=ie(i.min,r,s,0,1),a=ie(i.max,r,s,0,1);Math.abs(a-t)<=.025?this.grabbing_="max":Math.abs(o-t)<=.025?this.grabbing_="min":t>=o&&t<=a?(this.grabbing_="length",this.grabOffset_=ie(t-o,0,1,0,s-r)):t<o?(this.grabbing_="min",this.onPointerMove_(e)):t>a&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,t){const i=this.valueFromData_(e);if(i===null)return;const r=this.sliderProps.get("min"),s=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new Nt(i,this.value.rawValue.max),t);else if(this.grabbing_==="max")this.value.setRawValue(new Nt(this.value.rawValue.min,i),t);else if(this.grabbing_==="length"){const o=this.value.rawValue.length;let a=i-this.grabOffset_,c=a+o;a<r?(a=r,c=r+o):c>s&&(a=s-o,c=s),this.value.setRawValue(new Nt(a,c),t)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class Hx{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sc_=new qx(e,t);const i={constraint:t.constraint,textProps:t.textProps};this.tc_=new Bn(e,{assembly:jh,axes:[i,i],parser:t.parser,value:this.value,viewProps:t.viewProps}),this.view=new Fx(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function Kx(n){return Nt.isObject(n)?new Nt(n.min,n.max):new Nt(0,0)}function Gx(n,e){n.writeProperty("max",e.max),n.writeProperty("min",e.min)}function Wx(n){const e=[],t=jr(n);t&&e.push(t);const i=Nr(n);return i&&e.push(i),new Fh(new nn(e))}Pe({id:"input-interval",type:"input",accept:(n,e)=>{if(!Nt.isObject(n))return null;const t=ge(e,i=>Object.assign(Object.assign({},Fr(i)),{readonly:i.optional.constant(!1)}));return t?{initialValue:new Nt(n.min,n.max),params:t}:null},binding:{reader:n=>Kx,constraint:n=>Wx(n.params),equals:Nt.equals,writer:n=>Gx},controller(n){const e=n.value,t=n.constraint;if(!(t instanceof Fh))throw jt.shouldNeverHappen();const i=(e.rawValue.min+e.rawValue.max)/2,r=Q.fromObject(Gi(n.params,i)),s=t.edge&&Er(t.edge,Rr);if(s)return new Hx(n.document,{constraint:t.edge,parser:at,sliderProps:new Q({keyScale:r.value("keyScale"),max:s.values.value("max"),min:s.values.value("min")}),textProps:r,value:e,viewProps:n.viewProps});const o={constraint:t.edge,textProps:r};return new Bn(n.document,{assembly:jh,axes:[o,o],parser:at,value:e,viewProps:n.viewProps})}});class Yx{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class Xx extends zs{constructor(e,t,i,r,s){super(e,r,s),this.cell=t,this.index=i}}class Zx extends zn{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(i=>{const r=new Yx(i);this.cellToApiMap_.set(i,r)})}get value(){return this.controller.value}cell(e,t){const i=this.controller.valueController,r=i.cellControllers[t*i.size[0]+e];return this.cellToApiMap_.get(r)}on(e,t){const i=t.bind(this);this.controller.value.emitter.on(e,r=>{const s=this.controller.valueController,o=s.findCellByValue(r.rawValue);if(!o)return;const a=this.cellToApiMap_.get(o);if(!a)return;const c=s.cellControllers.indexOf(o);i(new Xx(this,a,[c%s.size[0],Math.floor(c/s.size[0])],r.rawValue))})}}const vr=G("rad");class Jx{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(vr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(vr("l")),this.element.appendChild(i);const r=e.createElement("input");r.classList.add(vr("i")),r.name=t.name,r.type="radio",t.viewProps.bindDisabled(r),i.appendChild(r),this.inputElement=r;const s=e.createElement("div");s.classList.add(vr("b")),i.appendChild(s);const o=e.createElement("div");o.classList.add(vr("t")),s.appendChild(o),Et(t.props,"title",a=>{o.textContent=a})}}class Qx{constructor(e,t){this.props=t.props,this.viewProps=t.viewProps,this.view=new Jx(e,{name:t.name,props:this.props,viewProps:this.viewProps})}}class oa{constructor(e,t){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=t.size;const[i,r]=this.size;for(let s=0;s<r;s++)for(let o=0;o<i;o++){const a=new Qx(e,{name:t.groupName,props:Q.fromObject(Object.assign({},t.cellConfig(o,s))),viewProps:ai.create()});this.cellCs_.push(a),this.cellValues_.push(t.cellConfig(o,s).value)}this.value=t.value,Bt(this.value,s=>{const o=this.findCellByValue(s);o&&(o.view.inputElement.checked=!0)}),this.viewProps=ai.create(),this.view=new hd(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${i}, 1fr)`,this.cellCs_.forEach(s=>{s.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(s.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const t=this.cellValues_.findIndex(i=>i===e);return t<0?null:this.cellCs_[t]}onCellInputChange_(e){const t=e.currentTarget,i=this.cellCs_.findIndex(r=>r.view.inputElement===t);i<0||(this.value.rawValue=this.cellValues_[i])}}(function(){return Pe({id:"radiogrid",type:"blade",accept(n){const e=ge(n,t=>({cells:t.required.function,groupName:t.required.string,size:t.required.array(t.required.number),value:t.required.raw,view:t.required.constant("radiogrid"),label:t.optional.string}));return e?{params:e}:null},controller(n){const e=qe(n.params.value);return new Es(n.document,{blade:n.blade,props:Q.fromObject({label:n.params.label}),value:e,valueController:new oa(n.document,{groupName:n.params.groupName,cellConfig:n.params.cells,size:n.params.size,value:e})})},api(n){return!(n.controller instanceof Es)||!(n.controller.valueController instanceof oa)?null:new Zx(n.controller)}})})();function vl(n){return Pe({id:"input-radiogrid",type:"input",accept(e,t){if(!n.isType(e))return null;const i=ge(t,r=>({cells:r.required.function,groupName:r.required.string,size:r.required.array(r.required.number),view:r.required.constant("radiogrid")}));return i?{initialValue:e,params:i}:null},binding:n.binding,controller:e=>new oa(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}vl({isType:n=>typeof n=="number",binding:{reader:n=>Br,writer:n=>rn}});vl({isType:n=>typeof n=="string",binding:{reader:n=>La,writer:n=>rn}});vl({isType:n=>typeof n=="boolean",binding:{reader:n=>Sa,writer:n=>rn}});var eP=Function.prototype.toString,Do=Object.create,tP=Object.prototype.toString,nP=function(){function n(){this._keys=[],this._values=[]}return n.prototype.has=function(e){return!!~this._keys.indexOf(e)},n.prototype.get=function(e){return this._values[this._keys.indexOf(e)]},n.prototype.set=function(e,t){this._keys.push(e),this._values.push(t)},n}();function iP(){return new nP}function rP(){return new WeakMap}var sP=typeof WeakMap<"u"?rP:iP;function fl(n){if(!n)return Do(null);var e=n.constructor;if(e===Object)return n===Object.prototype?{}:Do(n);if(e&&~eP.call(e).indexOf("[native code]"))try{return new e}catch{}return Do(n)}function oP(n){var e="";return n.global&&(e+="g"),n.ignoreCase&&(e+="i"),n.multiline&&(e+="m"),n.unicode&&(e+="u"),n.sticky&&(e+="y"),e}function aP(n){return n.flags}var lP=/test/g.flags==="g"?aP:oP;function Uh(n){var e=tP.call(n);return e.substring(8,e.length-1)}function cP(n){return n[Symbol.toStringTag]||Uh(n)}var uP=typeof Symbol<"u"?cP:Uh,dP=Object.defineProperty,hP=Object.getOwnPropertyDescriptor,qh=Object.getOwnPropertyNames,bl=Object.getOwnPropertySymbols,Hh=Object.prototype,Kh=Hh.hasOwnProperty,pP=Hh.propertyIsEnumerable,Gh=typeof bl=="function";function mP(n){return qh(n).concat(bl(n))}var vP=Gh?mP:qh;function Zs(n,e,t){for(var i=vP(n),r=0,s=i.length,o=void 0,a=void 0;r<s;++r)if(o=i[r],!(o==="callee"||o==="caller")){if(a=hP(n,o),!a){e[o]=t.copier(n[o],t);continue}!a.get&&!a.set&&(a.value=t.copier(a.value,t));try{dP(e,o,a)}catch{e[o]=a.value}}return e}function fP(n,e){var t=new e.Constructor;e.cache.set(n,t);for(var i=0,r=n.length;i<r;++i)t[i]=e.copier(n[i],e);return t}function bP(n,e){var t=new e.Constructor;return e.cache.set(n,t),Zs(n,t,e)}function Wh(n,e){return n.slice(0)}function _P(n,e){return n.slice(0,n.size,n.type)}function wP(n,e){return new e.Constructor(Wh(n.buffer))}function gP(n,e){return new e.Constructor(n.getTime())}function Yh(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(i,r){t.set(r,e.copier(i,e))}),t}function yP(n,e){return Zs(n,Yh(n,e),e)}function CP(n,e){var t=fl(e.prototype);e.cache.set(n,t);for(var i in n)Kh.call(n,i)&&(t[i]=e.copier(n[i],e));return t}function xP(n,e){var t=fl(e.prototype);e.cache.set(n,t);for(var i in n)Kh.call(n,i)&&(t[i]=e.copier(n[i],e));for(var r=bl(n),s=0,o=r.length,a=void 0;s<o;++s)a=r[s],pP.call(n,a)&&(t[a]=e.copier(n[a],e));return t}var PP=Gh?xP:CP;function EP(n,e){var t=fl(e.prototype);return e.cache.set(n,t),Zs(n,t,e)}function $o(n,e){return new e.Constructor(n.valueOf())}function kP(n,e){var t=new e.Constructor(n.source,lP(n));return t.lastIndex=n.lastIndex,t}function ys(n,e){return n}function Xh(n,e){var t=new e.Constructor;return e.cache.set(n,t),n.forEach(function(i){t.add(e.copier(i,e))}),t}function SP(n,e){return Zs(n,Xh(n,e),e)}var LP=Array.isArray,_l=Object.assign,VP=Object.getPrototypeOf||function(n){return n.__proto__},Zh={array:fP,arrayBuffer:Wh,blob:_P,dataView:wP,date:gP,error:ys,map:Yh,object:PP,regExp:kP,set:Xh},AP=_l({},Zh,{array:bP,map:yP,object:EP,set:SP});function MP(n){return{Arguments:n.object,Array:n.array,ArrayBuffer:n.arrayBuffer,Blob:n.blob,Boolean:$o,DataView:n.dataView,Date:n.date,Error:n.error,Float32Array:n.arrayBuffer,Float64Array:n.arrayBuffer,Int8Array:n.arrayBuffer,Int16Array:n.arrayBuffer,Int32Array:n.arrayBuffer,Map:n.map,Number:$o,Object:n.object,Promise:ys,RegExp:n.regExp,Set:n.set,String:$o,WeakMap:ys,WeakSet:ys,Uint8Array:n.arrayBuffer,Uint8ClampedArray:n.arrayBuffer,Uint16Array:n.arrayBuffer,Uint32Array:n.arrayBuffer,Uint64Array:n.arrayBuffer}}function Jh(n){var e=_l({},Zh,n),t=MP(e),i=t.Array,r=t.Object;function s(o,a){if(a.prototype=a.Constructor=void 0,!o||typeof o!="object")return o;if(a.cache.has(o))return a.cache.get(o);if(a.prototype=VP(o),a.Constructor=a.prototype&&a.prototype.constructor,!a.Constructor||a.Constructor===Object)return r(o,a);if(LP(o))return i(o,a);var c=t[uP(o)];return c?c(o,a):typeof o.then=="function"?o:r(o,a)}return function(a){return s(a,{Constructor:void 0,cache:sP(),copier:s,prototype:void 0})}}function DP(n){return Jh(_l({},AP,n))}DP({});var $P=Jh({}),TP=Object.getOwnPropertyNames,IP=Object.getOwnPropertySymbols,OP=Object.prototype.hasOwnProperty;function Yc(n,e){return function(i,r,s){return n(i,r,s)&&e(i,r,s)}}function cs(n){return function(t,i,r){if(!t||!i||typeof t!="object"||typeof i!="object")return n(t,i,r);var s=r.cache,o=s.get(t),a=s.get(i);if(o&&a)return o===i&&a===t;s.set(t,i),s.set(i,t);var c=n(t,i,r);return s.delete(t),s.delete(i),c}}function Xc(n){return TP(n).concat(IP(n))}var zP=Object.hasOwn||function(n,e){return OP.call(n,e)};function _i(n,e){return n===e||!n&&!e&&n!==n&&e!==e}var RP="__v",BP="__o",NP="_owner",Zc=Object.getOwnPropertyDescriptor,Jc=Object.keys;function jP(n,e,t){var i=n.length;if(e.length!==i)return!1;for(;i-- >0;)if(!t.equals(n[i],e[i],i,i,n,e,t))return!1;return!0}function FP(n,e){return _i(n.getTime(),e.getTime())}function UP(n,e){return n.name===e.name&&n.message===e.message&&n.cause===e.cause&&n.stack===e.stack}function qP(n,e){return n===e}function Qc(n,e,t){var i=n.size;if(i!==e.size)return!1;if(!i)return!0;for(var r=new Array(i),s=n.entries(),o,a,c=0;(o=s.next())&&!o.done;){for(var u=e.entries(),d=!1,h=0;(a=u.next())&&!a.done;){if(r[h]){h++;continue}var p=o.value,m=a.value;if(t.equals(p[0],m[0],c,h,n,e,t)&&t.equals(p[1],m[1],p[0],m[0],n,e,t)){d=r[h]=!0;break}h++}if(!d)return!1;c++}return!0}var HP=_i;function KP(n,e,t){var i=Jc(n),r=i.length;if(Jc(e).length!==r)return!1;for(;r-- >0;)if(!Qh(n,e,t,i[r]))return!1;return!0}function fr(n,e,t){var i=Xc(n),r=i.length;if(Xc(e).length!==r)return!1;for(var s,o,a;r-- >0;)if(s=i[r],!Qh(n,e,t,s)||(o=Zc(n,s),a=Zc(e,s),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function GP(n,e){return _i(n.valueOf(),e.valueOf())}function WP(n,e){return n.source===e.source&&n.flags===e.flags}function eu(n,e,t){var i=n.size;if(i!==e.size)return!1;if(!i)return!0;for(var r=new Array(i),s=n.values(),o,a;(o=s.next())&&!o.done;){for(var c=e.values(),u=!1,d=0;(a=c.next())&&!a.done;){if(!r[d]&&t.equals(o.value,a.value,o.value,a.value,n,e,t)){u=r[d]=!0;break}d++}if(!u)return!1}return!0}function YP(n,e){var t=n.length;if(e.length!==t)return!1;for(;t-- >0;)if(n[t]!==e[t])return!1;return!0}function XP(n,e){return n.hostname===e.hostname&&n.pathname===e.pathname&&n.protocol===e.protocol&&n.port===e.port&&n.hash===e.hash&&n.username===e.username&&n.password===e.password}function Qh(n,e,t,i){return(i===NP||i===BP||i===RP)&&(n.$$typeof||e.$$typeof)?!0:zP(e,i)&&t.equals(n[i],e[i],i,i,n,e,t)}var ZP="[object Arguments]",JP="[object Boolean]",QP="[object Date]",eE="[object Error]",tE="[object Map]",nE="[object Number]",iE="[object Object]",rE="[object RegExp]",sE="[object Set]",oE="[object String]",aE="[object URL]",lE=Array.isArray,tu=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,nu=Object.assign,cE=Object.prototype.toString.call.bind(Object.prototype.toString);function uE(n){var e=n.areArraysEqual,t=n.areDatesEqual,i=n.areErrorsEqual,r=n.areFunctionsEqual,s=n.areMapsEqual,o=n.areNumbersEqual,a=n.areObjectsEqual,c=n.arePrimitiveWrappersEqual,u=n.areRegExpsEqual,d=n.areSetsEqual,h=n.areTypedArraysEqual,p=n.areUrlsEqual;return function(v,b,f){if(v===b)return!0;if(v==null||b==null)return!1;var C=typeof v;if(C!==typeof b)return!1;if(C!=="object")return C==="number"?o(v,b,f):C==="function"?r(v,b,f):!1;var E=v.constructor;if(E!==b.constructor)return!1;if(E===Object)return a(v,b,f);if(lE(v))return e(v,b,f);if(tu!=null&&tu(v))return h(v,b,f);if(E===Date)return t(v,b,f);if(E===RegExp)return u(v,b,f);if(E===Map)return s(v,b,f);if(E===Set)return d(v,b,f);var _=cE(v);return _===QP?t(v,b,f):_===rE?u(v,b,f):_===tE?s(v,b,f):_===sE?d(v,b,f):_===iE?typeof v.then!="function"&&typeof b.then!="function"&&a(v,b,f):_===aE?p(v,b,f):_===eE?i(v,b,f):_===ZP?a(v,b,f):_===JP||_===nE||_===oE?c(v,b,f):!1}}function dE(n){var e=n.circular,t=n.createCustomConfig,i=n.strict,r={areArraysEqual:i?fr:jP,areDatesEqual:FP,areErrorsEqual:UP,areFunctionsEqual:qP,areMapsEqual:i?Yc(Qc,fr):Qc,areNumbersEqual:HP,areObjectsEqual:i?fr:KP,arePrimitiveWrappersEqual:GP,areRegExpsEqual:WP,areSetsEqual:i?Yc(eu,fr):eu,areTypedArraysEqual:i?fr:YP,areUrlsEqual:XP};if(t&&(r=nu({},r,t(r))),e){var s=cs(r.areArraysEqual),o=cs(r.areMapsEqual),a=cs(r.areObjectsEqual),c=cs(r.areSetsEqual);r=nu({},r,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:c})}return r}function hE(n){return function(e,t,i,r,s,o,a){return n(e,t,a)}}function pE(n){var e=n.circular,t=n.comparator,i=n.createState,r=n.equals,s=n.strict;if(i)return function(c,u){var d=i(),h=d.cache,p=h===void 0?e?new WeakMap:void 0:h,m=d.meta;return t(c,u,{cache:p,equals:r,meta:m,strict:s})};if(e)return function(c,u){return t(c,u,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};var o={cache:void 0,equals:r,meta:void 0,strict:s};return function(c,u){return t(c,u,o)}}Nn();Nn({strict:!0});Nn({circular:!0});Nn({circular:!0,strict:!0});var ep=Nn({createInternalComparator:function(){return _i}});Nn({strict:!0,createInternalComparator:function(){return _i}});Nn({circular:!0,createInternalComparator:function(){return _i}});Nn({circular:!0,createInternalComparator:function(){return _i},strict:!0});function Nn(n){n===void 0&&(n={});var e=n.circular,t=e===void 0?!1:e,i=n.createInternalComparator,r=n.createState,s=n.strict,o=s===void 0?!1:s,a=dE(n),c=uE(a),u=i?i(c):hE(c);return pE({circular:t,comparator:c,createState:r,equals:u,strict:o})}var mE=j('<div style="display: none;"></div>');function tp(n,e){Ae(e,!1);const[t,i]=pi(),r=()=>wt(v,"$parentStore",t);let s=y(e,"object",12),o=y(e,"key",12),a=y(e,"disabled",12,!1),c=y(e,"label",28,()=>{}),u=y(e,"options",28,()=>{}),d=y(e,"theme",24,()=>{}),h=y(e,"ref",28,()=>{}),p=y(e,"plugin",28,()=>{});const m=_t("registerPlugin"),v=_t("parentStore"),b=_t("userCreatedPane");let f=he(),C=he(),E=he();function _(){l(f)&&l(f).dispose(),p()!==void 0&&m(p()),N(f,r().addBinding(s(),o(),{index:l(E),label:c(),...u(),disabled:a()})),h(l(f)),l(f).on("change",S)}On(()=>{N(E,l(C)?Od(l(C)):0)}),mi(()=>{l(f)?.dispose()});const T=Lu();function U(z){if(z instanceof File)return new File([z],z.name,{lastModified:z.lastModified,type:z.type});if(z instanceof HTMLImageElement){const B=new Image;return B.src=z.src,B}return $P(z)}let D=s(),x=U(s()[o()]),g=!1;function w(z){D!==z&&(g=!1),ep(z[o()],x)||(x=U(z[o()]),T("change",{value:U(z[o()]),origin:g?"internal":"external"}),!g&&l(f)&&(l(f).off("change",S),l(f).refresh(),l(f).on("change",S))),g=!1,D!==z&&(D=z,_())}function S(){g=!0,s(s()[o()]=U(s()[o()]),!0)}X(()=>(l(f),R(h())),()=>{}),X(()=>(R(u()),r(),l(E)),()=>{u(),r()!==void 0&&l(E)!==void 0&&_()}),X(()=>(l(f),R(a())),()=>{l(f)!==void 0&&le(f,l(f).disabled=a())}),X(()=>(l(f),R(c())),()=>{l(f)!==void 0&&le(f,l(f).label=c())}),X(()=>(r(),R(s())),()=>{r()!==void 0&&w(s())}),X(()=>(R(d()),r(),Ss),()=>{d()&&r()!==void 0&&(b||!Ss(r()))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Binding> components for a theme prop.)")}),Ut(),rt();var $=ve(),M=K($);{var P=z=>{var B=ve(),ue=K(B);{var V=A=>{var k=mE();kt(k,W=>N(C,W),()=>l(C)),L(A,k)};Y(ue,A=>{A(V)})}L(z,B)},O=z=>{ml(z,{get theme(){return d()},userCreatedPane:!1,children:(B,ue)=>{var V=ve(),A=K(V);tp(A,{get disabled(){return a()},set disabled(k){a(k)},get key(){return o()},set key(k){o(k)},get label(){return c()},set label(k){c(k)},get object(){return s()},set object(k){s(k)},get options(){return u()},set options(k){u(k)},get plugin(){return p()},set plugin(k){p(k)},get ref(){return h()},set ref(k){h(k)},$$events:{change(k){Ir.call(this,e,k)}},$$legacy:!0}),L(B,V)},$$slots:{default:!0}})};Y(M,z=>{v?z(P):z(O,!1)})}L(n,$),Me(),i()}function vE(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["value","ref","options"]);Ae(e,!1);const r=he();let s=y(e,"value",12),o=y(e,"ref",28,()=>{}),a=y(e,"options",24,()=>{});const c=Symbol("key");function u(){return s()}function d(){ep(s(),l(r)[c])||le(r,l(r)[c]=s())}X(()=>{},()=>{N(r,{[c]:u()})}),X(()=>l(r),()=>{s(l(r)[c])}),X(()=>R(s()),()=>{s(),d()}),Ut(),rt(),tp(n,Gt({key:c,get options(){return a()}},()=>i,{get object(){return l(r)},set object(h){N(r,h)},get ref(){return o()},set ref(h){o(h)},$$events:{change(h){Ir.call(this,e,h)}},$$legacy:!0})),Me()}function wl(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["options","ref","value"]);Ae(e,!1);let r=y(e,"options",24,()=>{}),s=y(e,"ref",28,()=>{}),o=y(e,"value",12),a=he();X(()=>R(r()),()=>{N(a,{...r(),readonly:!1})}),Ut(),vE(n,Gt({get options(){return l(a)}},()=>i,{get value(){return o()},set value(c){o(c)},get ref(){return s()},set ref(c){s(c)},$$events:{change(c){Ir.call(this,e,c)}},$$legacy:!0})),Me()}function fE(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["value"]);let r=y(e,"value",12);wl(n,Gt(()=>i,{get value(){return r()},set value(s){r(s)},$$events:{change(s){Ir.call(this,e,s)}},$$legacy:!0}))}const ki=G("ctn"),bE=G("input"),_E=G("btn");class wE{constructor(e,t){this.element=e.createElement("div"),this.container=e.createElement("div"),this.container.classList.add(ki()),t.viewProps.bindClassModifiers(this.container),this.input=e.createElement("input"),this.input.classList.add(bE()),this.input.setAttribute("type","file"),this.input.setAttribute("accept",t.filetypes?t.filetypes.join(","):"*"),this.input.style.height=`calc(20px * ${t.lineCount})`,this.fileIcon=e.createElement("div"),this.fileIcon.classList.add(ki("icon")),this.text=e.createElement("span"),this.text.classList.add(ki("text")),this.warning=e.createElement("span"),this.warning.classList.add(ki("warning")),this.warning.innerHTML=t.invalidFiletypeMessage,this.warning.style.display="none",this.deleteButton=e.createElement("button"),this.deleteButton.classList.add(_E("b")),this.deleteButton.innerHTML="Delete",this.deleteButton.style.display="none",this.container.appendChild(this.input),this.container.appendChild(this.fileIcon),this.element.appendChild(this.container),this.element.appendChild(this.warning),this.element.appendChild(this.deleteButton)}changeDraggingState(e){var t,i;e?(t=this.container)===null||t===void 0||t.classList.add(ki("input_area_dragging")):(i=this.container)===null||i===void 0||i.classList.remove(ki("input_area_dragging"))}}class gE{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new wE(e,{viewProps:this.viewProps,value:t.value,invalidFiletypeMessage:t.invalidFiletypeMessage,lineCount:t.lineCount,filetypes:t.filetypes}),this.config=t,this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDeleteClick=this.onDeleteClick.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.view.deleteButton.addEventListener("click",this.onDeleteClick),this.value.emitter.on("change",()=>this.handleValueChange()),this.viewProps.handleDispose(()=>{this.view.input.removeEventListener("change",this.onFile),this.view.element.removeEventListener("drop",this.onDrop),this.view.element.removeEventListener("dragover",this.onDragOver),this.view.element.removeEventListener("dragleave",this.onDragLeave),this.view.deleteButton.removeEventListener("click",this.onDeleteClick)})}onFile(e){const t=this.view.input;if(t.files&&t.files.length>0){const i=t.files[0];this.isFileValid(i)?this.value.setRawValue(i):this.showWarning()}}showWarning(){this.view.warning.style.display="block",setTimeout(()=>{this.view.warning.style.display="none"},5e3)}isFileValid(e){var t;const i=this.config.filetypes,r="."+((t=e.name.split(".").pop())===null||t===void 0?void 0:t.toLowerCase());return!(i&&i.length>0&&!i.includes(r)&&r)}onDeleteClick(){this.value.rawValue&&(this.value.setRawValue(null),this.view.input.value="",this.view.warning.style.display="none")}onDragOver(e){e.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}onDrop(e){if(e instanceof DragEvent&&(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files)){const t=[e.dataTransfer.files][0];if(t.length==1){const i=t.item(0);i&&(this.isFileValid(i)?this.value.setRawValue(i):this.showWarning())}}this.view.changeDraggingState(!1)}handleValueChange(){const e=this.value.rawValue,t=this.view.container,i=this.view.text,r=this.view.fileIcon,s=this.view.deleteButton;e?(i.textContent=e.name,t.appendChild(i),t.contains(r)&&t.removeChild(r),this.view.warning.style.display="none",s.style.display="block",t.style.border="unset"):(i.textContent="",t.appendChild(r),t.removeChild(i),this.view.warning.style.display="none",s.style.display="none",t.style.border="1px dashed #717070")}}Pe({id:"file-input",type:"input",accept(n,e){if(typeof n!="string")return null;const t=ge(e,i=>({view:i.required.constant("file-input"),invalidFiletypeMessage:i.optional.string,lineCount:i.optional.number,filetypes:i.optional.array(i.required.string)}));return t?{initialValue:n,params:t}:null},binding:{reader(n){return e=>e instanceof File?e:null},constraint(n){return new nn([])},writer(n){return(e,t)=>{e.write(t)}}},controller(n){var e,t;const r="Unaccepted file type.";return new gE(n.document,{value:n.value,viewProps:n.viewProps,invalidFiletypeMessage:(e=n.params.invalidFiletypeMessage)!==null&&e!==void 0?e:r,lineCount:(t=n.params.lineCount)!==null&&t!==void 0?t:3,filetypes:n.params.filetypes})}});function yE(){const n=`
	<svg width="320" height="50" xmlns="http://www.w3.org/2000/svg">
  <style>
    text {
      font-family: "Menlo", monospace;
      font-size: 12px;
			fill: gray;
    }
  </style>
  <text x="50%" y="55%" text-anchor="middle">
    No Image
  </text>
</svg>`,e=new Blob([n],{type:"image/svg+xml"}),t=new Image;return t.src=URL.createObjectURL(e),t}function iu(n){const e=new Image;return e.crossOrigin="anonymous",e.src=n,e}const Xn=G("img");class CE{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Xn()),t.viewProps.bindClassModifiers(this.element),this.input=e.createElement("input"),this.input.classList.add(Xn("input")),this.input.setAttribute("type","file"),this.input.setAttribute("accept",t.extensions.join(",")),this.image_=e.createElement("img"),this.image_.id="tpimg_"+Math.random().toString(36).slice(2),this.image_.classList.add(Xn("image")),this.image_.classList.add(Xn(`image_${t.imageFit}`)),this.image_.crossOrigin="anonymous",this.image_.onclick=i=>t.clickCallback?t.clickCallback(i,this.input):this.input.click(),this.element.classList.add(Xn("area_root")),this.element.appendChild(this.image_),this.element.appendChild(this.input)}changeImage(e){this.image_.src=e}changeDraggingState(e){const t=this.element;e?t?.classList.add(Xn("area_dragging")):t?.classList.remove(Xn("area_dragging"))}}let To=null;class xE{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new CE(e,{viewProps:this.viewProps,extensions:t.extensions,imageFit:t.imageFit,clickCallback:t.clickCallback}),this.onFile=this.onFile.bind(this),this.onDrop=this.onDrop.bind(this),this.onDragStart=this.onDragStart.bind(this),this.onDragOver=this.onDragOver.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.view.input.addEventListener("change",this.onFile),this.view.element.addEventListener("drop",this.onDrop),this.view.element.addEventListener("dragstart",this.onDragStart),this.view.element.addEventListener("dragover",this.onDragOver),this.view.element.addEventListener("dragleave",this.onDragLeave),this.viewProps.handleDispose(()=>{this.view.input.removeEventListener("change",this.onFile),this.view.element.removeEventListener("drop",this.onDrop),this.view.element.removeEventListener("dragstart",this.onDragStart),this.view.element.removeEventListener("dragover",this.onDragOver),this.view.element.removeEventListener("dragleave",this.onDragLeave)}),this.value.emitter.on("change",()=>this.handleValueChange()),this.handleValueChange()}onFile(e){const t=(e?.target).files;if(!t||!t.length)return;const i=t[0];this.setValue(i)}onDrop(e){e.preventDefault();try{const{dataTransfer:t}=e,i=t?.files[0];if(i)this.setValue(i);else{const r=t?.getData("img-id");if(r){const s=document.getElementById(r);this.setValue(s)}else{const s=t?.getData("url");if(!s)throw new Error("No url");this.setValue(s)}}}catch(t){console.error("Could not parse the dropped image",t)}finally{this.view.changeDraggingState(!1)}}onDragStart(e){var t,i;(t=e.dataTransfer)===null||t===void 0||t.setData("img-id",this.view.image_.id),(i=e.dataTransfer)===null||i===void 0||i.setDragImage(this.view.image_,0,0)}onDragOver(e){e.preventDefault(),this.view.changeDraggingState(!0)}onDragLeave(){this.view.changeDraggingState(!1)}handleImage(e){e instanceof HTMLImageElement?this.updateImage(e.src):typeof e=="string"||!e?((e==="placeholder"||!e)&&(e=this.handlePlaceholderImage().src),this.updateImage(e)):this.setValue(e)}updateImage(e){this.view.changeImage(e)}setValue(e){if(e instanceof HTMLImageElement)this.value.setRawValue(e);else if(e instanceof File){const t=URL.createObjectURL(e)+"#"+e.name;e.src=t;const i=iu(t);this.value.setRawValue(i||e)}else e?this.value.setRawValue(iu(e)):this.value.setRawValue(this.handlePlaceholderImage())}handleValueChange(){this.handleImage(this.value.rawValue)}handlePlaceholderImage(){return To||(To=yE()),To}}const PE=[".jpg",".png",".gif"];Pe({id:"input-image",type:"input",accept(n,e){if(!(n instanceof HTMLImageElement||typeof n=="string"))return null;const t=ge(e,i=>({view:i.required.constant("input-image"),acceptUrl:i.optional.boolean,clickCallback:i.optional.function,imageFit:i.optional.custom(r=>r==="contain"||r==="cover"?r:void 0),extensions:i.optional.array(i.required.string)}));return t?{initialValue:n,params:t}:null},binding:{reader(n){return e=>e.src!==void 0?e.src===""?"placeholder":e.src:e},writer(n){return(e,t)=>{e.write(t)}}},controller(n){var e,t;return new xE(n.document,{value:n.value,imageFit:(e=n.params.imageFit)!==null&&e!==void 0?e:"cover",clickCallback:n.params.clickCallback,viewProps:n.viewProps,extensions:(t=n.params.extensions)!==null&&t!==void 0?t:PE})}});const Ht=G("ckr");class EE{constructor(e,t){this.tickElems_=[],this.labelElems_=[],this.boundsWidth_=-1,this.onShowsTooltipChange_=this.onShowsTooltipChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.formatters_=t.formatters,this.unit_=t.unit,this.element=e.createElement("div"),this.element.classList.add(Ht(),Ht(void 0,`m${t.seriesId}`)),t.viewProps.bindClassModifiers(this.element),this.value_=t.value,this.value_.emitter.on("change",this.onValueChange_),t.showsTooltip.emitter.on("change",this.onShowsTooltipChange_);const i=e.createElement("div");i.classList.add(Ht("w")),this.element.appendChild(i),this.offsetElem_=e.createElement("div"),this.offsetElem_.classList.add(Ht("o")),i.appendChild(this.offsetElem_),this.svgElem_=e.createElementNS(xe,"svg"),this.svgElem_.classList.add(Ht("g")),this.offsetElem_.appendChild(this.svgElem_),this.tooltipElem_=e.createElement("div"),this.tooltipElem_.classList.add(G("tt")(),Ht("tt")),this.element.appendChild(this.tooltipElem_),this.waitToBeAdded_()}waitToBeAdded_(){const e=new IntersectionObserver(t=>{t.forEach(i=>{i.target!==this.element||i.intersectionRatio===0||(this.update(),e.disconnect())})},{root:null});e.observe(this.element)}rebuildScaleIfNeeded_(e){if(this.boundsWidth_===e)return;this.boundsWidth_=e,this.tickElems_.forEach(u=>{Pr(u)}),this.tickElems_=[],this.labelElems_.forEach(u=>{Pr(u)}),this.labelElems_=[];const t=this.element.ownerDocument,i=this.unit_.ticks,r=this.unit_.pixels,a=((Math.ceil(e/2/r)+1)*2+1)*i,c=r/i;for(let u=0;u<a;u++){const d=u*c;if(u%i===0){const h=t.createElementNS(xe,"line");h.classList.add(Ht("mjt")),h.setAttributeNS(null,"x1",String(d)),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2",String(d)),h.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(h),this.tickElems_.push(h);const p=t.createElement("div");p.classList.add(Ht("l")),p.style.left=`${d}px`,this.offsetElem_.appendChild(p),this.labelElems_.push(p)}else{const h=t.createElementNS(xe,"line");h.classList.add(Ht("mnt")),h.setAttributeNS(null,"x1",String(d)),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2",String(d)),h.setAttributeNS(null,"y2","2"),this.svgElem_.appendChild(h),this.tickElems_.push(h)}}}updateScale_(e){const t=this.unit_.value,i=this.unit_.pixels,r=this.value_.rawValue,s=Math.ceil(e/2/i)+1,o=r-r%t-t*s,a=u=>1-Math.pow(Fe(Math.abs(r-u)/(e/2*(t/i)),0,1),10);this.labelElems_.forEach((u,d)=>{const h=o+d*t;u.textContent=this.formatters_.ring(h),u.style.opacity=String(a(h))});const c=this.unit_.ticks;this.tickElems_.forEach((u,d)=>{const h=o+d/c*t;u.style.opacity=String(a(h))})}update(){const e=this.element.getBoundingClientRect().width,t=this.unit_.value,i=this.unit_.pixels,r=this.value_.rawValue,s=Math.ceil(e/2/i)+1,o=(r%t+t*s)*(i/t),a=e/2-o;this.offsetElem_.style.transform=`translateX(${a}px)`,this.tooltipElem_.textContent=this.formatters_.text(r),this.rebuildScaleIfNeeded_(e),this.updateScale_(e)}onValueChange_(){this.update()}onShowsTooltipChange_(e){e.rawValue?this.element.classList.add(Ht(void 0,"tt")):this.element.classList.remove(Ht(void 0,"tt"))}}class gl{constructor(e,t){this.ox_=0,this.ov_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.tooltipEnabled_=t.tooltipEnabled,this.unit_=t.unit,this.showsTooltip_=qe(!1),this.view=new EE(e,{formatters:t.formatters,seriesId:t.seriesId,showsTooltip:this.showsTooltip_,unit:t.unit,value:this.value,viewProps:this.viewProps});const i=new tt(this.view.element);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}onPointerDown_(e){const t=e.data;t.point&&(this.ox_=t.point.x,this.ov_=this.value.rawValue,this.tooltipEnabled_&&(this.showsTooltip_.rawValue=!0))}onPointerMove_(e){const t=e.data;if(!t.point)return;const i=t.point.x-this.ox_,r=this.unit_.pixels,s=this.unit_.value;this.value.setRawValue(this.ov_-i/r*s,{forceEmit:!1,last:!1})}onPointerUp_(){this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0}),this.showsTooltip_.rawValue=!1}}const Io=G("ckrtxt");class kE{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Io());const i=e.createElement("div");i.classList.add(Io("r")),i.appendChild(t.ringView.element),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Io("t")),r.appendChild(t.textView.element),this.element.appendChild(r)}}class np{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.rc_=new gl(e,{formatters:{ring:t.ringFormatter,text:t.textProps.get("formatter")},seriesId:t.seriesId,tooltipEnabled:!1,unit:t.ringUnit,value:this.value,viewProps:this.viewProps}),this.tc_=new Yi(e,{parser:t.parser,props:t.textProps,value:this.value,viewProps:this.viewProps}),this.view=new kE(e,{ringView:this.rc_.view,textView:this.tc_.view})}}function ip(n){const e=[],t=jr(n);t&&e.push(t);const i=Nr(n);return i&&e.push(i),new nn(e)}function SE(n){return n===0||n===1||n===2?n:void 0}function ru(n){return n!==void 0?String(n):"0"}function LE(n){const e=Ze(Ho(n.value));return t=>{const i=e(t),r=i.substr(0,1);return i+(r==="-"||r==="+"?" ":"")}}Pe({id:"input-ring",type:"input",accept(n,e){if(typeof n!="number")return null;const t=ge(e,i=>Object.assign(Object.assign({},Fr(i)),{series:i.optional.custom(SE),unit:i.optional.object({pixels:i.required.number,ticks:i.required.number,value:i.required.number}),view:i.required.constant("cameraring"),wide:i.optional.boolean}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Br,constraint:n=>ip(n.params),writer:n=>rn},controller(n){var e,t,i;const r=(e=n.params.unit)!==null&&e!==void 0?e:{ticks:5,pixels:40,value:10},s=LE(r),o=Gi(n.params,n.initialValue);if(n.params.wide)return new gl(n.document,{formatters:{ring:s,text:o.formatter},seriesId:(t=ru(n.params.series))!==null&&t!==void 0?t:"0",tooltipEnabled:!0,unit:r,value:n.value,viewProps:n.viewProps});const a=Q.fromObject(o);return new np(n.document,{parser:at,ringFormatter:s,ringUnit:r,seriesId:(i=ru(n.params.series))!==null&&i!==void 0?i:"0",textProps:a,value:n.value,viewProps:n.viewProps})}});Pe({id:"input-wheel",type:"input",accept(n,e){if(typeof n!="number")return null;const t=ge(e,i=>Object.assign(Object.assign({},Fr(i)),{amount:i.optional.number,view:i.required.constant("camerawheel"),wide:i.optional.boolean}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Br,constraint:n=>ip(n.params),writer:n=>rn},controller(n){var e,t;const i=Ze(0),r=Gi(n.params,n.initialValue);return n.params.wide?new gl(n.document,{formatters:{ring:i,text:r.formatter},seriesId:"w",tooltipEnabled:!0,unit:{ticks:10,pixels:40,value:((e=n.params.amount)!==null&&e!==void 0?e:r.pointerScale)*40},value:n.value,viewProps:n.viewProps}):new np(n.document,{parser:at,ringFormatter:i,ringUnit:{ticks:10,pixels:40,value:((t=n.params.amount)!==null&&t!==void 0?t:r.pointerScale)*40},seriesId:"w",textProps:Q.fromObject(r),value:n.value,viewProps:n.viewProps})}});class rp{multiply(e){return this.format(this.quat.multiply(e.quat))}premultiply(e){return this.format(e.multiply(this))}slerp(e,t){return this.format(this.quat.slerp(e.quat,t))}}function sp(n,e,t){return Math.min(Math.max(n,e),t)}function VE(n,e){return Math.floor(n/e)*e}function AE(n,e){return n-VE(n,e)}function gr(n){return AE(n+Math.PI,Math.PI*2)-Math.PI}class An extends rp{static fromQuaternion(e,t,i){const r=e.toMat3(),[s,o,a,c]=t==="XYZ"?[0,1,2,1]:t==="XZY"?[0,2,1,-1]:t==="YXZ"?[1,0,2,-1]:t==="YZX"?[1,2,0,1]:t==="ZXY"?[2,0,1,1]:[2,1,0,-1],u=[0,0,0],d=r[a+s*3];return u[o]=-c*Math.asin(sp(d,-1,1)),Math.abs(d)<.999999?(u[s]=c*Math.atan2(r[a+o*3],r[a*4]),u[a]=c*Math.atan2(r[o+s*3],r[s*4])):u[s]=c*Math.atan2(-r[o+a*3],r[o*4]),Math.abs(u[s])+Math.abs(u[a])>Math.PI&&(u[s]=gr(u[s]+Math.PI),u[o]=gr(Math.PI-u[o]),u[a]=gr(u[a]+Math.PI)),new An(...u,t).reunit(i)}constructor(e,t,i,r,s){super(),this.x=e??0,this.y=t??0,this.z=i??0,this.order=r??"XYZ",this.unit=s??"rad"}get quat(){return be.fromEuler(this)}getComponents(){return[this.x,this.y,this.z]}toEuler(e,t){return this.reorder(e).reunit(t)}format(e){return e instanceof An?e.reorder(this.order):e.toEuler(this.order,this.unit)}reorder(e){return e===this.order?this:this.quat.toEuler(e,this.unit)}reunit(e){const t={deg:Math.PI/180,rad:1,turn:2*Math.PI}[this.unit],i={deg:180/Math.PI,rad:1,turn:.5/Math.PI}[e],r=t*i;return new An(r*this.x,r*this.y,r*this.z,this.order,e)}}class be extends rp{static fromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return new be(e.x*r,e.y*r,e.z*r,Math.cos(i))}static fromEuler(e){const t=e.reunit("rad"),[i,r,s,o]=t.order==="XYZ"?[0,1,2,1]:t.order==="XZY"?[0,2,1,-1]:t.order==="YXZ"?[1,0,2,-1]:t.order==="YZX"?[1,2,0,1]:t.order==="ZXY"?[2,0,1,1]:[2,1,0,-1],a=t.getComponents(),c=.5*a[i],u=.5*o*a[r],d=.5*a[s],h=Math.cos(c),p=Math.cos(u),m=Math.cos(d),v=Math.sin(c),b=Math.sin(u),f=Math.sin(d),C=[0,0,0,m*p*h+f*b*v];return C[i]=m*p*v-f*b*h,C[r]=o*(m*b*h+f*p*v),C[s]=f*p*h-m*b*v,new be(...C)}static lookRotation(e,t){const{normal:i,tangent:r,binormal:s}=e.orthoNormalize(t),o=s.x,a=r.x,c=i.x,u=s.y,d=r.y,h=i.y,p=s.z,m=r.z,v=i.z,b=o+d+v;if(b>0){const f=.5/Math.sqrt(b+1);return new be((m-h)*f,(c-p)*f,(u-a)*f,.25/f)}else if(o>d&&o>v){const f=2*Math.sqrt(1+o-d-v);return new be(.25*f,(a+u)/f,(c+p)/f,(m-h)/f)}else if(d>v){const f=2*Math.sqrt(1+d-o-v);return new be((a+u)/f,.25*f,(h+m)/f,(c-p)/f)}else{const f=2*Math.sqrt(1+v-o-d);return new be((c+p)/f,(h+m)/f,.25*f,(u-a)/f)}}constructor(e,t,i,r){super(),this.x=e??0,this.y=t??0,this.z=i??0,this.w=r??1}get quat(){return this}getComponents(){return[this.x,this.y,this.z,this.w]}toEuler(e,t){return An.fromQuaternion(this,e,t)}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const e=this.length;return e===0?new be:new be(this.x/e,this.y/e,this.z/e,this.w/e)}get negated(){return new be(-this.x,-this.y,-this.z,-this.w)}get ban360s(){return this.w<0?this.negated:this}multiply(e){const t=e.quat;return new be(this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,this.w*t.y-this.x*t.z+this.y*t.w+this.z*t.x,this.w*t.z+this.x*t.y-this.y*t.x+this.z*t.w,this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z)}format(e){return e.quat}slerp(e,t){let i=e.quat;if(t===0)return this;if(t===1)return i;const r=this.ban360s;i=i.ban360s;let s=r.w*i.w+r.x*i.x+r.y*i.y+r.z*i.z;if(s<0&&(i=i.negated,s=-s),s>=1)return r;const o=1-s*s;if(o<=Number.EPSILON){const h=1-t;return new be(h*r.x+t*i.x,h*r.y+t*i.y,h*r.z+t*i.z,h*r.w+t*i.w).normalized}const a=Math.sqrt(o),c=Math.atan2(a,s),u=Math.sin((1-t)*c)/a,d=Math.sin(t*c)/a;return new be(r.x*u+i.x*d,r.y*u+i.y*d,r.z*u+i.z*d,r.w*u+i.w*d)}toMat3(){const{x:e,y:t,z:i,w:r}=this;return[1-2*t*t-2*i*i,2*e*t+2*i*r,2*e*i-2*t*r,2*e*t-2*i*r,1-2*e*e-2*i*i,2*t*i+2*e*r,2*e*i+2*t*r,2*t*i-2*e*r,1-2*e*e-2*t*t]}}class op{constructor(){this.offset=[0,0,-5],this.fov=30,this.aspect=1,this.viewport=[0,0,1,1]}project(e){const t=(this.viewport[0]+this.viewport[2])*.5,i=(this.viewport[1]+this.viewport[3])*.5,r=this.viewport[2]-this.viewport[0],s=this.viewport[3]-this.viewport[1],o=1/Math.tan(this.fov*Math.PI/360),a=-(e.z+this.offset[2]),c=t+(e.x+this.offset[0])/a*o*r*.5/this.aspect,u=i-(e.y+this.offset[1])/a*o*s*.5;return[c,u]}}class Ne{constructor(e,t,i){this.element=e.createElementNS(xe,"path"),this.vertices=t,this.projector=i}setRotation(e){let t="";return this.vertices.forEach((i,r)=>{const s=i.applyQuaternion(e),[o,a]=this.projector.project(s);t+=`${r===0?"M":"L"}${o} ${a}`}),this.element.setAttributeNS(null,"d",t),this}}class _e{constructor(e,t,i){this.x=e??0,this.y=t??0,this.z=i??0}getComponents(){return[this.x,this.y,this.z]}get lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}get length(){return Math.sqrt(this.lengthSq)}get normalized(){const e=this.length;return e===0?new _e:new _e(this.x/e,this.y/e,this.z/e)}get negated(){return new _e(-this.x,-this.y,-this.z)}add(e){return new _e(this.x+e.x,this.y+e.y,this.z+e.z)}sub(e){return new _e(this.x-e.x,this.y-e.y,this.z-e.z)}scale(e){return new _e(this.x*e,this.y*e,this.z*e)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}cross(e){return new _e(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}orthoNormalize(e){const t=this.normalized;e=e.normalized;let i=t.dot(e);i===1&&(Math.abs(t.y)>Math.abs(t.z)?e=new _e(0,0,1):e=new _e(0,1,0),i=t.dot(e)),e=e.sub(t.scale(i)).normalized;const r=e.cross(t);return{normal:t,tangent:e,binormal:r}}applyQuaternion(e){const t=e.w*this.x+e.y*this.z-e.z*this.y,i=e.w*this.y+e.z*this.x-e.x*this.z,r=e.w*this.z+e.x*this.y-e.y*this.x,s=-e.x*this.x-e.y*this.y-e.z*this.z;return new _e(t*e.w+s*-e.x+i*-e.z-r*-e.y,i*e.w+s*-e.y+r*-e.x-t*-e.z,r*e.w+s*-e.z+t*-e.y-i*-e.x)}}function dt(n,e){const t=e.z>0?new be(0,0,0,1):new be(0,0,1,0);return Math.abs(n.z)>.9999?t:be.lookRotation(n,e)}function $s(n,e,t,i,r,s=1){const o=[];for(let a=0;a<t;a++){const c=n+e*a/(t-1),u=new _e;u[i]=s*Math.cos(c),u[r]=s*Math.sin(c),o.push(u)}return o}const J=G("rotationgizmo"),Si=new _e(0,0,0),ME=new _e(1,0,0),DE=new _e(0,1,0),Zn=new _e(0,0,1),Li=new _e(0,0,-1),su=new _e(.7,0,0),ou=new _e(0,.7,0),au=new _e(0,0,.7),lu=new _e(-.7,0,0),cu=new _e(0,-.7,0),uu=new _e(0,0,-.7),du=new be(0,0,0,1);function Vi(n,e,t){const i=n.createElementNS(xe,"g"),r=n.createElementNS(xe,"circle");r.classList.add(J(e)),r.setAttributeNS(null,"cx","0"),r.setAttributeNS(null,"cy","0"),r.setAttributeNS(null,"r","8"),i.appendChild(r);const s=n.createElementNS(xe,"text");return s.classList.add(J("labeltext")),s.setAttributeNS(null,"y","4"),s.setAttributeNS(null,"text-anchor","middle"),s.setAttributeNS(null,"font-size","10"),s.textContent=t,i.appendChild(s),i}class $E{get xArcBElement(){return this.xArcBC_.element}get yArcBElement(){return this.yArcBC_.element}get zArcBElement(){return this.zArcBC_.element}get xArcFElement(){return this.xArcFC_.element}get yArcFElement(){return this.yArcFC_.element}get zArcFElement(){return this.zArcFC_.element}get rArcElement(){return this.rArcC_.element}constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.onModeChange_=this.onModeChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(J()),t.pickerLayout==="popup"&&this.element.classList.add(J(void 0,"p"));const i=e.createElement("div");i.classList.add(J("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const r=e.createElementNS(xe,"svg");r.classList.add(J("g")),this.padElement.appendChild(r),this.svgElem_=r,this.projector_=new op,this.projector_.viewport=[0,0,136,136];const s=$s(0,Math.PI,33,"x","y"),o=$s(0,2*Math.PI,65,"x","y",1.1);this.xArcB_=new Ne(e,s,this.projector_),this.xArcB_.element.classList.add(J("arcx")),this.svgElem_.appendChild(this.xArcB_.element),this.yArcB_=new Ne(e,s,this.projector_),this.yArcB_.element.classList.add(J("arcy")),this.svgElem_.appendChild(this.yArcB_.element),this.zArcB_=new Ne(e,s,this.projector_),this.zArcB_.element.classList.add(J("arcz")),this.svgElem_.appendChild(this.zArcB_.element),this.xArcBC_=new Ne(e,s,this.projector_),this.xArcBC_.element.classList.add(J("arcc")),this.svgElem_.appendChild(this.xArcBC_.element),this.yArcBC_=new Ne(e,s,this.projector_),this.yArcBC_.element.classList.add(J("arcc")),this.svgElem_.appendChild(this.yArcBC_.element),this.zArcBC_=new Ne(e,s,this.projector_),this.zArcBC_.element.classList.add(J("arcc")),this.svgElem_.appendChild(this.zArcBC_.element);const a=e.createElementNS(xe,"g");r.classList.add(J("axes")),this.svgElem_.appendChild(a),this.axesElem_=a,this.xAxis_=new Ne(e,[Si,su],this.projector_),this.xAxis_.element.classList.add(J("axisx")),this.axesElem_.appendChild(this.xAxis_.element),this.yAxis_=new Ne(e,[Si,ou],this.projector_),this.yAxis_.element.classList.add(J("axisy")),this.axesElem_.appendChild(this.yAxis_.element),this.zAxis_=new Ne(e,[Si,au],this.projector_),this.zAxis_.element.classList.add(J("axisz")),this.axesElem_.appendChild(this.zAxis_.element),this.xnAxis_=new Ne(e,[Si,lu],this.projector_),this.xnAxis_.element.classList.add(J("axisn")),this.axesElem_.appendChild(this.xnAxis_.element),this.ynAxis_=new Ne(e,[Si,cu],this.projector_),this.ynAxis_.element.classList.add(J("axisn")),this.axesElem_.appendChild(this.ynAxis_.element),this.znAxis_=new Ne(e,[Si,uu],this.projector_),this.znAxis_.element.classList.add(J("axisn")),this.axesElem_.appendChild(this.znAxis_.element),this.xArcF_=new Ne(e,s,this.projector_),this.xArcF_.element.classList.add(J("arcx")),this.svgElem_.appendChild(this.xArcF_.element),this.yArcF_=new Ne(e,s,this.projector_),this.yArcF_.element.classList.add(J("arcy")),this.svgElem_.appendChild(this.yArcF_.element),this.zArcF_=new Ne(e,s,this.projector_),this.zArcF_.element.classList.add(J("arcz")),this.svgElem_.appendChild(this.zArcF_.element),this.xArcFC_=new Ne(e,s,this.projector_),this.xArcFC_.element.classList.add(J("arcc")),this.svgElem_.appendChild(this.xArcFC_.element),this.yArcFC_=new Ne(e,s,this.projector_),this.yArcFC_.element.classList.add(J("arcc")),this.svgElem_.appendChild(this.yArcFC_.element),this.zArcFC_=new Ne(e,s,this.projector_),this.zArcFC_.element.classList.add(J("arcc")),this.svgElem_.appendChild(this.zArcFC_.element),this.rArc_=new Ne(e,o,this.projector_),this.rArc_.element.classList.add(J("arcr")),this.rArc_.setRotation(du),this.svgElem_.appendChild(this.rArc_.element),this.rArcC_=new Ne(e,o,this.projector_),this.rArcC_.element.classList.add(J("arcc")),this.rArcC_.setRotation(du),this.svgElem_.appendChild(this.rArcC_.element);const c=e.createElementNS(xe,"g");r.classList.add(J("labels")),this.svgElem_.appendChild(c),this.labelsElem_=c,this.xLabel=Vi(e,"labelcirclex","X"),this.labelsElem_.appendChild(this.xLabel),this.yLabel=Vi(e,"labelcircley","Y"),this.labelsElem_.appendChild(this.yLabel),this.zLabel=Vi(e,"labelcirclez","Z"),this.labelsElem_.appendChild(this.zLabel),this.xnLabel=Vi(e,"labelcirclen","-X"),this.labelsElem_.appendChild(this.xnLabel),this.ynLabel=Vi(e,"labelcirclen","-Y"),this.labelsElem_.appendChild(this.ynLabel),this.znLabel=Vi(e,"labelcirclen","-Z"),this.labelsElem_.appendChild(this.znLabel);const u=()=>{this.xArcB_.element.classList.add(J("arcx_hover")),this.xArcF_.element.classList.add(J("arcx_hover"))},d=()=>{this.xArcB_.element.classList.remove(J("arcx_hover")),this.xArcF_.element.classList.remove(J("arcx_hover"))};this.xArcBC_.element.addEventListener("mouseenter",u),this.xArcBC_.element.addEventListener("mouseleave",d),this.xArcFC_.element.addEventListener("mouseenter",u),this.xArcFC_.element.addEventListener("mouseleave",d);const h=()=>{this.yArcB_.element.classList.add(J("arcy_hover")),this.yArcF_.element.classList.add(J("arcy_hover"))},p=()=>{this.yArcB_.element.classList.remove(J("arcy_hover")),this.yArcF_.element.classList.remove(J("arcy_hover"))};this.yArcBC_.element.addEventListener("mouseenter",h),this.yArcBC_.element.addEventListener("mouseleave",p),this.yArcFC_.element.addEventListener("mouseenter",h),this.yArcFC_.element.addEventListener("mouseleave",p);const m=()=>{this.zArcB_.element.classList.add(J("arcz_hover")),this.zArcF_.element.classList.add(J("arcz_hover"))},v=()=>{this.zArcB_.element.classList.remove(J("arcz_hover")),this.zArcF_.element.classList.remove(J("arcz_hover"))};this.zArcBC_.element.addEventListener("mouseenter",m),this.zArcBC_.element.addEventListener("mouseleave",v),this.zArcFC_.element.addEventListener("mouseenter",m),this.zArcFC_.element.addEventListener("mouseleave",v);const b=()=>{this.rArc_.element.classList.add(J("arcr_hover"))},f=()=>{this.rArc_.element.classList.remove(J("arcr_hover"))};this.rArcC_.element.addEventListener("mouseenter",b),this.rArcC_.element.addEventListener("mouseleave",f),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,t.mode.emitter.on("change",this.onModeChange_),this.mode_=t.mode,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const e=this.value.rawValue.quat.normalized;this.xAxis_.setRotation(e),this.yAxis_.setRotation(e),this.zAxis_.setRotation(e),this.xnAxis_.setRotation(e),this.ynAxis_.setRotation(e),this.znAxis_.setRotation(e);const t=ME.applyQuaternion(e),i=DE.applyQuaternion(e),r=Zn.applyQuaternion(e),s=t.negated,o=i.negated,a=r.negated;[{el:this.xAxis_.element,v:t},{el:this.yAxis_.element,v:i},{el:this.zAxis_.element,v:r},{el:this.xnAxis_.element,v:s},{el:this.ynAxis_.element,v:o},{el:this.znAxis_.element,v:a}].map(({el:c,v:u})=>(this.axesElem_.removeChild(c),{el:c,v:u})).sort((c,u)=>c.v.z-u.v.z).forEach(({el:c})=>{this.axesElem_.appendChild(c)}),this.xArcB_.setRotation(dt(t,Li)),this.yArcB_.setRotation(dt(i,Li)),this.zArcB_.setRotation(dt(r,Li)),this.xArcBC_.setRotation(dt(t,Li)),this.yArcBC_.setRotation(dt(i,Li)),this.zArcBC_.setRotation(dt(r,Li)),this.xArcF_.setRotation(dt(t,Zn)),this.yArcF_.setRotation(dt(i,Zn)),this.zArcF_.setRotation(dt(r,Zn)),this.xArcFC_.setRotation(dt(t,Zn)),this.yArcFC_.setRotation(dt(i,Zn)),this.zArcFC_.setRotation(dt(r,Zn)),[{el:this.xLabel,v:su},{el:this.yLabel,v:ou},{el:this.zLabel,v:au},{el:this.xnLabel,v:lu},{el:this.ynLabel,v:cu},{el:this.znLabel,v:uu}].forEach(({el:c,v:u})=>{const[d,h]=this.projector_.project(u.applyQuaternion(e));c.setAttributeNS(null,"transform",`translate( ${d}, ${h} )`)}),[{el:this.xLabel,v:t},{el:this.yLabel,v:i},{el:this.zLabel,v:r},{el:this.xnLabel,v:s},{el:this.ynLabel,v:o},{el:this.znLabel,v:a}].map(({el:c,v:u})=>(this.labelsElem_.removeChild(c),{el:c,v:u})).sort((c,u)=>c.v.z-u.v.z).forEach(({el:c})=>{this.labelsElem_.appendChild(c)})}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}onModeChange_(){const e=this.mode_.rawValue,t=e==="angle-x"?"add":"remove",i=e==="angle-y"?"add":"remove",r=e==="angle-z"?"add":"remove",s=e==="angle-r"?"add":"remove";this.xArcB_.element.classList[t](J("arcx_active")),this.yArcB_.element.classList[i](J("arcy_active")),this.zArcB_.element.classList[r](J("arcz_active")),this.xArcF_.element.classList[t](J("arcx_active")),this.yArcF_.element.classList[i](J("arcy_active")),this.zArcF_.element.classList[r](J("arcz_active")),this.rArc_.element.classList[s](J("arcr_active"))}}function ap(n){return sp(n,0,1)}function TE(n){if(n<=0)return 0;if(n>=1)return 1;const e=1-n,t=e*(e*(e*(e*(e*(e*(e*-6+7))))));return ap(1-t)}function IE(n,e,t){return ap((t-n)/(e-n))}const In=1/Math.sqrt(2),OE=new _e(1,0,0),zE=new _e(0,1,0),RE=new _e(0,0,1),BE=new be(0,0,0,1),NE=new be(In,0,0,In),jE=new be(0,-In,0,In),FE=new be(-In,0,0,In),UE=new be(0,In,0,In),qE=new be(0,1,0,0);class HE{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.mode_=qe("free"),this.view=new $E(e,{value:this.value,mode:this.mode_,viewProps:this.viewProps,pickerLayout:t.pickerLayout}),this.ptHandler_=new tt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_);const i=new tt(this.view.xArcBElement);i.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),i.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const r=new tt(this.view.xArcFElement);r.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-x")),r.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const s=new tt(this.view.yArcBElement);s.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),s.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const o=new tt(this.view.yArcFElement);o.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-y")),o.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const a=new tt(this.view.zArcBElement);a.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),a.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const c=new tt(this.view.zArcFElement);c.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-z")),c.emitter.on("up",()=>this.changeModeIfNotAuto_("free"));const u=new tt(this.view.rArcElement);u.emitter.on("down",()=>this.changeModeIfNotAuto_("angle-r")),u.emitter.on("up",()=>this.changeModeIfNotAuto_("free")),[{el:this.view.xLabel,q:jE},{el:this.view.yLabel,q:NE},{el:this.view.zLabel,q:BE},{el:this.view.xnLabel,q:UE},{el:this.view.ynLabel,q:FE},{el:this.view.znLabel,q:qE}].forEach(({el:d,q:h})=>{new tt(d).emitter.on("down",()=>this.autoRotate_(h))}),this.px_=null,this.py_=null,this.angleState_=null}handlePointerEvent_(e){if(!e.point)return;const t=this.mode_.rawValue,i=e.point.x,r=e.point.y;if(t!=="auto")if(t==="free"){if(this.px_!=null&&this.py_!=null){const s=i-this.px_,o=r-this.py_,a=Math.sqrt(s*s+o*o);if(a===0)return;const c=new _e(o/a,s/a,0),u=be.fromAxisAngle(c,a/68);this.value.rawValue=this.value.rawValue.premultiply(u)}this.px_=i,this.py_=r}else if(t==="angle-r"){const s=e.bounds.width/2,o=e.bounds.height/2,a=Math.atan2(r-o,i-s);if(this.angleState_==null){const c=new _e(0,0,1);this.angleState_={initialRotation:this.value.rawValue,initialAngle:a,axis:c,reverseAngle:!0}}else{const{initialRotation:c,initialAngle:u,axis:d}=this.angleState_,h=-gr(a-u),p=be.fromAxisAngle(d,h);this.value.rawValue=c.premultiply(p)}}else{const s=e.bounds.width/2,o=e.bounds.height/2,a=Math.atan2(r-o,i-s);if(this.angleState_==null){const c=t==="angle-x"?OE:t==="angle-y"?zE:RE,u=c.applyQuaternion(this.value.rawValue.quat).z>0;this.angleState_={initialRotation:this.value.rawValue,initialAngle:a,axis:c,reverseAngle:u}}else{const{initialRotation:c,initialAngle:u,axis:d,reverseAngle:h}=this.angleState_;let p=gr(a-u);p=h?-p:p;const m=be.fromAxisAngle(d,p);this.value.rawValue=c.multiply(m)}}}onPointerDown_(e){this.handlePointerEvent_(e.data)}onPointerMove_(e){this.handlePointerEvent_(e.data)}onPointerUp_(){this.px_=null,this.py_=null,this.angleState_=null}onPadKeyDown_(e){kr(e.key)&&e.preventDefault();const t=Xe(1,Ft(e)),i=Xe(1,Dn(e));if(t!==0||i!==0){const r=new _e(-i,t,0),s=be.fromAxisAngle(r,Math.PI/16);this.value.rawValue=this.value.rawValue.premultiply(s)}}changeModeIfNotAuto_(e){this.mode_.rawValue!=="auto"&&(this.mode_.rawValue=e)}autoRotate_(e){this.mode_.rawValue="auto";const t=this.value.rawValue,i=Date.now(),r=()=>{const s=Date.now(),o=TE(IE(0,300,s-i));if(this.value.rawValue=t.slerp(e,o),o===1){this.mode_.rawValue="free";return}requestAnimationFrame(r)};requestAnimationFrame(r)}}const Jn=G("rotationswatch"),KE=new _e(1,0,0),GE=new _e(0,1,0),us=new _e(0,0,1),WE=new be(0,0,0,1);class YE{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(Jn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(Jn("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElementNS(xe,"svg");r.classList.add(Jn("g")),i.appendChild(r),this.svgElem_=r,this.projector_=new op,this.projector_.viewport=[0,0,20,20];const s=$s(0,Math.PI,33,"x","y"),o=$s(0,2*Math.PI,65,"x","y");this.rArc_=new Ne(e,o,this.projector_),this.rArc_.element.classList.add(Jn("arcr")),r.appendChild(this.rArc_.element),this.rArc_.setRotation(WE),this.xArc_=new Ne(e,s,this.projector_),this.xArc_.element.classList.add(Jn("arc")),r.appendChild(this.xArc_.element),this.yArc_=new Ne(e,s,this.projector_),this.yArc_.element.classList.add(Jn("arc")),r.appendChild(this.yArc_.element),this.zArc_=new Ne(e,s,this.projector_),this.zArc_.element.classList.add(Jn("arc")),r.appendChild(this.zArc_.element),this.update_()}update_(){const e=this.value.rawValue.quat.normalized,t=KE.applyQuaternion(e),i=GE.applyQuaternion(e),r=us.applyQuaternion(e);this.xArc_.setRotation(dt(t,us)),this.yArc_.setRotation(dt(i,us)),this.zArc_.setRotation(dt(r,us))}onValueChange_(){this.update_()}}class XE{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new YE(e,{value:this.value,viewProps:this.viewProps})}}const En=G("rotation");class ZE{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(En()),t.foldable.bindExpandedClass(this.element,En(void 0,"expanded")),Et(t.foldable,"completed",vn(this.element,En(void 0,"cpl"))),t.rotationMode==="quaternion"&&this.element.classList.add(En("quat"));const i=e.createElement("div");i.classList.add(En("h")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(En("s")),i.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(En("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(En("g")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}class lp{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=Hr.create(t.expanded),this.swatchC_=new XE(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new Bn(e,{assembly:t.assembly,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new ZE(e,{rotationMode:t.rotationMode,foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Fs(e,{viewProps:this.viewProps}):null;const r=new HE(e,{value:this.value,viewProps:this.viewProps,pickerLayout:t.pickerLayout});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.gizmoC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Rn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.gizmoC_.view.element),Kr(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.gizmoC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Bs(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!Ur(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function Oo(n,e){const t=Math.pow(.1,n);return{baseStep:t,constraint:e,textProps:Q.fromObject({formatter:Ze(n),keyScale:t,pointerScale:t})}}function ii(n){if(!n)return;const e=[];return $e(n.step)||e.push(new Gu(n.step)),(!$e(n.max)||!$e(n.min))&&e.push(new Os({max:n.max,min:n.min})),new nn(e)}function hu(n,e){return{toComponents:t=>t.getComponents(),fromComponents:t=>new An(t[0],t[1],t[2],n,e)}}function pu(n,e,t){return typeof n?.x=="number"&&typeof n?.y=="number"&&typeof n?.z=="number"?new An(n.x,n.y,n.z,e,t):new An(0,0,0,e,t)}function JE(n){switch(n){case"XYZ":case"XZY":case"YXZ":case"YZX":case"ZXY":case"ZYX":return n;default:return}}function QE(n){switch(n){case"rad":case"deg":case"turn":return n;default:return}}Pe({id:"rotation",type:"input",accept(n,e){var t,i;const r=ge(e,s=>({view:s.required.constant("rotation"),label:s.optional.string,picker:s.optional.custom(qs),expanded:s.optional.boolean,rotationMode:s.required.constant("euler"),x:s.optional.custom(ht),y:s.optional.custom(ht),z:s.optional.custom(ht),order:s.optional.custom(JE),unit:s.optional.custom(QE)}));return r?{initialValue:pu(n,(t=r.order)!==null&&t!==void 0?t:"XYZ",(i=r.unit)!==null&&i!==void 0?i:"rad"),params:r}:null},binding:{reader({params:n}){return e=>{var t,i;return pu(e,(t=n.order)!==null&&t!==void 0?t:"XYZ",(i=n.unit)!==null&&i!==void 0?i:"rad")}},constraint({params:n}){var e,t;return new $n({assembly:hu((e=n.order)!==null&&e!==void 0?e:"XYZ",(t=n.unit)!==null&&t!==void 0?t:"rad"),components:[ii("x"in n?n.x:void 0),ii("y"in n?n.y:void 0),ii("z"in n?n.z:void 0)]})},writer(n){return(e,t)=>{e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z)}}},controller({document:n,value:e,constraint:t,params:i,viewProps:r}){var s,o;if(!(t instanceof $n))throw jt.shouldNeverHappen();const a="expanded"in i?i.expanded:void 0,c="picker"in i?i.picker:void 0,u=(s=i.unit)!==null&&s!==void 0?s:"rad",d={rad:2,deg:0,turn:2}[u];return new lp(n,{axes:[Oo(d,t.components[0]),Oo(d,t.components[1]),Oo(d,t.components[2])],assembly:hu((o=i.order)!==null&&o!==void 0?o:"XYZ",u),rotationMode:"euler",expanded:a??!1,parser:at,pickerLayout:c??"popup",value:e,viewProps:r})}});const mu={toComponents:n=>[n.x,n.y,n.z,n.w],fromComponents:n=>new be(n[0],n[1],n[2],n[3])};function ds(n){return{baseStep:.01,constraint:n,textProps:Q.fromObject({formatter:e=>Math.abs(e)<.995?e.toFixed(2).replace("0.","."):e.toFixed(1),keyScale:.01,pointerScale:.01})}}function vu(n){return typeof n?.x=="number"&&typeof n?.y=="number"&&typeof n?.z=="number"&&typeof n?.w=="number"?new be(n.x,n.y,n.z,n.w):new be(0,0,0,1)}Pe({id:"rotation",type:"input",accept(n,e){const t=ge(e,i=>({view:i.required.constant("rotation"),label:i.optional.string,picker:i.optional.custom(qs),expanded:i.optional.boolean,rotationMode:i.optional.constant("quaternion"),x:i.optional.custom(ht),y:i.optional.custom(ht),z:i.optional.custom(ht),w:i.optional.custom(ht)}));return t?{initialValue:vu(n),params:t}:null},binding:{reader(n){return e=>vu(e)},constraint({params:n}){return new $n({assembly:mu,components:[ii("x"in n?n.x:void 0),ii("y"in n?n.y:void 0),ii("z"in n?n.z:void 0),ii("w"in n?n.w:void 0)]})},writer(n){return(e,t)=>{e.writeProperty("x",t.x),e.writeProperty("y",t.y),e.writeProperty("z",t.z),e.writeProperty("w",t.w)}}},controller({document:n,value:e,constraint:t,params:i,viewProps:r}){if(!(t instanceof $n))throw jt.shouldNeverHappen();const s="expanded"in i?i.expanded:void 0,o="picker"in i?i.picker:void 0;return new lp(n,{axes:[ds(t.components[0]),ds(t.components[1]),ds(t.components[2]),ds(t.components[3])],assembly:mu,rotationMode:"quaternion",expanded:s??!1,parser:at,pickerLayout:o??"popup",value:e,viewProps:r})}});class fu{constructor(e,t){this.step=e,this.edge=t}constrain(e){var t,i;return(i=(t=this.edge)===null||t===void 0?void 0:t.constrain(e))!==null&&i!==void 0?i:e}}const e1={fromComponents:n=>n[0],toComponents:n=>[n]},zo=G("step");class t1{constructor(e,t){this.buttonsView_=t.buttonsView,this.textView_=t.textView,this.element=e.createElement("div"),this.element.classList.add(zo());const i=e.createElement("div");i.classList.add(zo("s")),i.appendChild(this.buttonsView_.element),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(zo("t")),r.appendChild(this.textView_.element),this.element.appendChild(r)}}const Ro=G("step");class n1{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ro()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.textContent="-",i.classList.add(Ro("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.btnMinus=i;const r=e.createElement("button");r.textContent="+",r.classList.add(Ro("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.btnPlus=r}}class i1{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.step=t.constraint?t.constraint.step:1,this.view=new n1(e,{value:this.value,viewProps:t.viewProps}),this.view.btnMinus.addEventListener("click",()=>{var i;const r=(i=this.value.rawValue)!==null&&i!==void 0?i:0;this.value.setRawValue(r-this.step,{forceEmit:!0,last:!0})}),this.view.btnPlus.addEventListener("click",()=>{var i;const r=(i=this.value.rawValue)!==null&&i!==void 0?i:0;this.value.setRawValue(r+this.step,{forceEmit:!0,last:!0})})}}class r1{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sc_=new i1(e,t);const i={constraint:t.constraint.edge,textProps:t.textProps};this.tc_=new Bn(e,{assembly:e1,axes:[i],parser:t.parser,value:this.value,viewProps:t.viewProps}),this.view=new t1(e,{buttonsView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}Pe({id:"input-stepper",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=ge(e,i=>{var r;return{view:i.required.constant("stepper"),max:i.optional.number,min:i.optional.number,step:(r=i.optional.number)!==null&&r!==void 0?r:1}});return t?{initialValue:n,params:t}:null},binding:{reader(n){return e=>typeof e=="number"?e:0},writer(n){return(e,t)=>{e.write(t)}},constraint(n){const e=[],t=jr(n.params);t&&e.push(t);const i=Nr(n.params);return i&&e.push(i),new fu(n.params.step?n.params.step:1,new nn(e))}},controller(n){const e=n.value,t=n.constraint;if(!(t instanceof fu))throw jt.shouldNeverHappen();const i=Q.fromObject(Gi(n.params,e.rawValue));return new r1(n.document,{constraint:t,parser:at,textProps:i,value:e,viewProps:n.viewProps})}});function Qn(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["value","live"]);Ae(e,!1);let r=y(e,"value",12),s=y(e,"live",8,!0);const o={view:"text"};let a=he();mi(()=>{u(s()??!0,!0)});function c(d){d.target?.dispatchEvent(new Event("change"))}function u(d,h=!1){const p=l(a)?.controller.valueController.view.element.querySelector("input");p?.removeEventListener("input",c),!h&&d&&p?.addEventListener("input",c)}X(()=>(l(a),R(s())),()=>{l(a)&&s()!==void 0&&u(s())}),Ut(),rt(),wl(n,Gt({options:o},()=>i,{get value(){return r()},set value(d){r(d)},get ref(){return l(a)},set ref(d){N(a,d)},$$events:{change(d){Ir.call(this,e,d)}},$$legacy:!0})),Me()}const bu=G("txtr");class s1{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(bu()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.rows=t.rows,i.cols=22,i.placeholder=t.placeholder,i.classList.add(bu("i")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){this.inputElement.value=this.value_.rawValue}onChange_(){this.refresh()}}class o1{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.rows=t.rows,this.placeholder=t.placeholder,this.view=new s1(e,{value:this.value,viewProps:this.viewProps,rows:this.rows,placeholder:this.placeholder}),this.view.inputElement.addEventListener("keyup",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value;this.value.rawValue=i,this.view.refresh()}}const a1=Pe({id:"input-template",type:"input",accept(n,e){if(typeof n!="string")return null;const t=ge(e,i=>({view:i.required.constant("textarea"),rows:i.optional.number,placeholder:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{reader(n){return e=>typeof e=="string"?e:""},writer(n){return(e,t)=>{e.write(t)}}},controller(n){var e,t;return new o1(n.document,{value:n.value,rows:(e=n.params.rows)!==null&&e!==void 0?e:3,placeholder:(t=n.params.placeholder)!==null&&t!==void 0?t:"Enter text here",viewProps:n.viewProps})}}),l1="textarea",c1=".tp-txtrv{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-txtrv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtrv:hover{background-color:var(--in-bg-h)}.tp-txtrv:focus{background-color:var(--in-bg-f)}.tp-txtrv:active{background-color:var(--in-bg-a)}.tp-txtrv:disabled{opacity:.5}.tp-txtrv{display:block;height:auto;padding-bottom:0;overflow:hidden;position:relative}.tp-txtrv.tp-v-disabled{opacity:.5}.tp-txtrv .tp-txtrv_i{font-family:var(--font-family);background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-size:11px;padding:4px;line-height:16px;min-width:0;width:100%;border:none;height:100%;resize:none;margin-bottom:-8px}.tp-txtrv .tp-txtrv_i:focus{outline:none}",u1=[a1],d1=Object.freeze(Object.defineProperty({__proto__:null,css:c1,id:l1,plugins:u1},Symbol.toStringTag,{value:"Module"}));var h1=j("<!> <!>",1);function Bo(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["value","live","rows","placeholder"]);Ae(e,!1);let r=y(e,"value",12),s=y(e,"live",8,!0),o=y(e,"rows",24,()=>{}),a=y(e,"placeholder",24,()=>{});const c=Lu();let u=he(r()),d=he(),h=he();mi(()=>{v(s()??!0,!0)});function p(T){r(T.target.value),b=r(),c("change",{value:r(),origin:"internal"})}function m(T){r(T.target.value),b=r(),c("change",{value:r(),origin:"internal"})}function v(T,U=!1){const D=l(d)?.controller.valueController.view.element.querySelector("textarea");D?.removeEventListener("blur",p),D?.removeEventListener("input",m),!U&&T&&D?.addEventListener("input",m),!U&&!T&&D?.addEventListener("blur",p)}let b=r();function f(T){T!==b&&(c("change",{value:T,origin:"external"}),b=T)}X(()=>R(r()),()=>{N(u,r())}),X(()=>(l(d),R(s())),()=>{l(d)&&s()!==void 0&&v(s())}),X(()=>(R(a()),R(o())),()=>{N(h,{placeholder:a(),rows:o(),view:"textarea"})}),X(()=>(l(d),l(u)),()=>{l(d)&&f(l(u))}),Ut(),rt();var C=h1(),E=K(C);wl(E,Gt({get value(){return l(u)},get options(){return l(h)},plugin:d1},()=>i,{get ref(){return l(d)},set ref(T){N(d,T)},$$legacy:!0}));var _=I(E,2);Y(_,T=>{}),L(n,C),Me()}var p1=j('<div style="display: none;"><!></div>');function Cs(n,e){Ae(e,!1);const[t,i]=pi(),r=()=>wt(p,"$folderStore",t),s=()=>wt(h,"$parentStore",t);let o=y(e,"title",8,"Folder"),a=y(e,"disabled",8,!1),c=y(e,"expanded",12,!0),u=y(e,"userExpandable",8,!0),d=y(e,"theme",24,()=>{});const h=_t("parentStore"),p=$t(),m=_t("userCreatedPane");let v=he(),b=he(),f=he(void 0);ri("parentStore",p);function C(){Eu(p,s().addFolder({disabled:a(),expanded:c(),index:l(b),title:o()})),r().on("fold",()=>{c(r().expanded)}),N(f,r())}On(()=>{N(b,l(v)?Od(l(v)):0)}),mi(()=>{r()?.dispose()}),X(()=>(s(),l(f),l(b)),()=>{s()&&!l(f)&&l(b)!==void 0&&C()}),X(()=>(l(f),R(u())),()=>{l(f)&&zd(u(),l(f).element,"tp-fldv_b","tp-fldv_m")}),X(()=>(l(f),R(o())),()=>{l(f)&&le(f,l(f).title=o())}),X(()=>(l(f),R(a())),()=>{l(f)&&le(f,l(f).disabled=a())}),X(()=>(l(f),R(c())),()=>{l(f)&&c()!==void 0&&le(f,l(f).expanded=c())}),X(()=>(R(d()),s(),Ss),()=>{d()&&s()&&(m||!Ss(s()))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Folder> components for a theme prop.)")}),Ut(),rt();var E=ve(),_=K(E);{var T=D=>{var x=ve(),g=K(x);{var w=S=>{var $=p1(),M=H($);Rt(M,e,"default",{},null),q($),kt($,P=>N(v,P),()=>l(v)),L(S,$)};Y(g,S=>{S(w)})}L(D,x)},U=D=>{ml(D,{get theme(){return d()},userCreatedPane:!1,children:(x,g)=>{var w=ve(),S=K(w);Cs(S,{get disabled(){return a()},get title(){return o()},get userExpandable(){return u()},get expanded(){return c()},set expanded($){c($)},children:($,M)=>{var P=ve(),O=K(P);Rt(O,e,"default",{},null),L($,P)},$$slots:{default:!0},$$legacy:!0}),L(x,w)},$$slots:{default:!0}})};Y(_,D=>{h?D(T):D(U,!1)})}L(n,E),Me(),i()}var No={local:{},session:{}};function m1(n){return n==="local"?localStorage:sessionStorage}function _u(n,e,t){var i,r,s,o,a,c,u,d;const h=(i=void 0)!=null?i:JSON,p=(r=void 0)!=null?r:"local",m=(s=void 0)!=null?s:!0,v=(a=(o=void 0)!=null?o:void 0)!=null?a:D=>console.error(`Error when writing value from persisted store "${n}" to ${p}`,D),b=(c=void 0)!=null?c:(D,x)=>console.error(`Error when parsing ${D?'"'+D+'"':"value"} from persisted store "${n}"`,x),f=(u=void 0)!=null?u:D=>D,C=(d=void 0)!=null?d:D=>D,E=typeof window<"u"&&typeof document<"u",_=E?m1(p):null;function T(D,x){const g=C(x);try{_?.setItem(D,h.stringify(g))}catch(w){v(w)}}function U(){function D(S){try{return h.parse(S)}catch($){b(S,$)}}const x=_?.getItem(n);if(x==null)return e;const g=D(x);return g==null?e:f(g)}if(!No[p][n]){const D=U(),x=$t(D,S=>{if(E&&p=="local"&&m){const $=M=>{if(M.key===n&&M.newValue){let P;try{P=h.parse(M.newValue)}catch(z){b(M.newValue,z);return}const O=f(P);S(O)}};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)}}),{subscribe:g,set:w}=x;No[p][n]={set(S){w(S),T(n,S)},update(S){return x.update($=>{const M=S($);return T(n,M),M})},reset(){this.set(e)},subscribe:g}}return No[p][n]}const hs="svelte-tweakpane-ui-draggable-position-",v1="1",Ai=[];let jo=1e3;var f1=j("<div><!></div>");function b1(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["storePositionLocally","localStoreId","tpPane","expanded","collapseChildrenToFit","x","y","width","resizable","userExpandable","minWidth","maxWidth","title","scale","padding"]);Ae(e,!1);const[r,s]=pi(),o=()=>wt(l(v),"$positionStore",r),a=he(),c=!0,u=3;let d,h=y(e,"storePositionLocally",8,!0),p=y(e,"localStoreId",8,v1),m=y(e,"tpPane",28,()=>{}),v=he();h()&&Pl(N(v,_u(`${hs}${p()}`,{x:0,y:0,expanded:!0,width:350})),"$positionStore",r);let b=y(e,"expanded",28,()=>o()?.expanded??!0),f=y(e,"collapseChildrenToFit",8,!1),C=y(e,"x",28,()=>o()?.x??0),E=y(e,"y",28,()=>o()?.y??0),_=y(e,"width",28,()=>o()?.width??256),T=y(e,"resizable",8,!0),U=y(e,"userExpandable",8,!0),D=y(e,"minWidth",8,200),x=y(e,"maxWidth",8,600),g=y(e,"title",8,"Tweakpane"),w=y(e,"scale",8,1),S=y(e,"padding",8,"0"),$=he(),M,P,O=he(),z=he(),B=he(),ue=he(),V=he(),A=he(jo);function k(){p()!==void 0&&(Ai.includes(p())&&console.warn('Multiple instances of <Pane> with `mode="draggable"` and `storePositionLocally=true` detected. You must explicitly set unique localStoreId property on each component to avoid collisions.'),Ai.push(p()))}function W(){p()&&(Ai.splice(Ai.indexOf(p()),1),localStorage.removeItem(`${hs}${p()}`))}function Z(F){F!==void 0&&l(v)!==void 0&&b()!==void 0&&_()!==void 0&&C()!==void 0&&E()!==void 0&&Pl(N(v,_u(`${hs}${p()}`,{x:C(),y:E(),expanded:b(),width:_()})),"$positionStore",r)}function ee(){if(C()!==void 0&&E()!==void 0&&_()!==void 0){const F=l(ue),st=l(V);N(ue,document.documentElement.clientWidth),N(V,document.documentElement.clientHeight);const ot=l(ue)-F,sn=l(V)-st,nr=(C()+_()/2)/l(ue),eo=(E()+l(z)/2)/l(V);!Number.isNaN(ot)&&nr>=.5&&C(C()+ot),!Number.isNaN(sn)&&eo>=.5&&E(E()+sn)}}const ye=F=>{F.stopPropagation()};let Qe=0,pe=0,ae=0,De=0;const se=F=>{F.stopPropagation(),F.target&&_()!==void 0&&F.target===P&&_(_()<l(a)?l(a):D())},Ce=F=>{C()!==void 0&&E()!==void 0&&F.button===0&&F.target instanceof HTMLElement&&(De=0,d=F,et(),te(),F.target===M&&(M.style.cursor="grabbing"),le($,l($).style.transition="width 0s ease"),F.target.setPointerCapture(F.pointerId),Qe=_()??0,pe=C()-F.pageX,ae=E()-F.pageY)},Ee=F=>{F.target instanceof HTMLElement&&_()!==void 0&&D()!==void 0&&C()!==void 0&&E()!==void 0&&(F.target===M?(De+=Math.hypot(F.movementX,F.movementY),C(F.pageX+pe),E(F.pageY+ae)):F.target===P&&_(go(F.pageX+pe+Qe-C(),D(),l(a))))},ke=()=>{if(d?.target instanceof HTMLElement){const{target:F}=d,st=F.getBoundingClientRect(),ot=new PointerEvent("pointercancel",{bubbles:!0,clientX:st.left+st.width/2,clientY:st.top+st.height/2,composed:!0,pointerId:d.pointerId,pointerType:d.pointerType});F.dispatchEvent(ot)}},me=F=>{F.stopImmediatePropagation(),F.target instanceof HTMLElement&&(F.target.hasPointerCapture(F.pointerId)&&F.target.releasePointerCapture(F.pointerId),F.target===M&&M.style.removeProperty("cursor"),l($).style.removeProperty("transition"),F.type==="pointerup"&&c&&F.target===M&&De<u&&U()&&m()&&m(m().expanded=!m().expanded,!0),d=void 0,de(),Be())},Be=()=>{M.addEventListener("pointerdown",Ce),P?.addEventListener("pointerdown",Ce)},et=()=>{M.removeEventListener("pointerdown",Ce),P?.removeEventListener("pointerdown",Ce)},te=()=>{window.addEventListener("blur",ke),M.addEventListener("pointermove",Ee),M.addEventListener("pointerup",me),M.addEventListener("pointercancel",me),P?.addEventListener("pointermove",Ee),P?.addEventListener("pointerup",me),P?.addEventListener("pointercancel",me)},de=()=>{window.removeEventListener("blur",ke),M.removeEventListener("pointermove",Ee),M.removeEventListener("pointerup",me),M.removeEventListener("pointercancel",me),P?.removeEventListener("pointermove",Ee),P?.removeEventListener("pointerup",me),P?.removeEventListener("pointercancel",me)},Oe=F=>{F.preventDefault()};On(()=>{ee(),m()?l($).append(m().element):console.warn("no tpPane in draggable"),l($).addEventListener("touchmove",Oe,{passive:!1});const F=l($).querySelector(".tp-rotv_t");F&&(M=F,M.addEventListener("click",ye),M.addEventListener("dblclick",se),P=M.parentElement?.appendChild(document.createElement("div")),P&&(P.className="tp-custom-width-handle",P.textContent="↔",P.addEventListener("click",ye),P.addEventListener("dblclick",se)),Be())}),mi(()=>{et(),de(),M.removeEventListener("click",ye),M.removeEventListener("dblclick",se),P?.removeEventListener("click",ye),P?.removeEventListener("dblclick",se),l($)?.removeEventListener("touchmove",Oe),p()!==void 0&&Ai.splice(Ai.indexOf(p()),1)});function qt(F){P&&(P.style.display=F?"block":"none")}function ft(F,st=Number.MAX_SAFE_INTEGER){if(st>0)for(const ot of F)if("expanded"in ot)ot.expanded&&(st--,ot.expanded=!1),"children"in ot&&ft(ot.children,st);else{const sn=Gw(ot);sn&&Kw(ot)&&(st--,sn.click())}}X(()=>(R(m()),R(T())),()=>{m()&&T()&&qt(T())}),X(()=>(l($),R(w()),l(O)),()=>{if(l($))if(w()===void 0||w()===1)N(z,l(O));else{const F=window.getComputedStyle(l($)),st=Number.parseFloat(F.paddingTop)+Number.parseFloat(F.paddingBottom);N(z,(l(O)-st)*w()+st)}}),X(()=>(l(z),l(ue),l(V),R(C()),R(E()),R(_()),R(D()),R(x()),R(f()),R(m()),l(B)),()=>{l(z)!==void 0&&l(ue)!==void 0&&l(V)!==void 0&&C()!==void 0&&E()!==void 0&&_()!==void 0&&D()!==void 0&&x()!==void 0&&(f()&&l(z)>l(V)&&m()&&ft(m().children),C(go(C(),0,Math.max(0,l(ue)-l(B)))),E(go(E(),0,Math.max(0,l(V)-l(z)))),l(ue)<l(B)&&_(Math.max(D(),Math.min(x(),l(ue)))))}),X(()=>(R(x()),l(ue),R(C())),()=>{N(a,Math.min(x()??600,l(ue)-(C()??0)))}),X(()=>(R(p()),R(h())),()=>{p(),h()&&k()}),X(()=>(R(p()),R(h())),()=>{p(),!h()&&W()}),X(()=>R(p()),()=>{p()!==`${hs}${p()}`&&Z(p())}),X(()=>(R(h()),R(p()),R(C()),R(E()),R(_()),R(b()),l(v)),()=>{h()&&p()!==void 0&&C()!==void 0&&E()!==void 0&&_()!==void 0&&b()!==void 0&&l(v)?.set({x:C(),y:E(),expanded:b(),width:_()})}),Ut(),rt();var ct=f1();je("resize",Zt,ee);let rs,tr;var Js=H(ct),Qs=oe(()=>Ks(i,"position"));pl(Js,Gt({get scale(){return w()},get title(){return g()}},()=>l(Qs),{get expanded(){return b()},set expanded(F){b(F)},get tpPane(){return m()},set tpPane(F){m(F)},children:(F,st)=>{var ot=ve(),sn=K(ot);Rt(sn,e,"default",{},null),L(F,ot)},$$slots:{default:!0},$$legacy:!0})),q(ct),kt(ct,F=>N($,F),()=>l($)),ne(F=>{rs=Tr(ct,1,"draggable-container svelte-ex9mcb",null,rs,F),tr=Jt(ct,"",tr,{left:`${C()??""}px`,padding:S(),top:`${E()??""}px`,width:`${_()??""}px`,"z-index":l(A)})},[()=>({"not-collapsable":!U(),"not-resizable":!T()})],ca),Ll(ct,"clientHeight",F=>N(O,F)),Ll(ct,"clientWidth",F=>N(B,F)),je("focus",ct,()=>{N(A,++jo)},!0),je("pointerdown",ct,()=>{N(A,++jo)},!0),L(n,ct),Me(),s()}var _1=j('<div style="display: none;"><!></div>');function w1(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["expanded","x","y","width","title","tpPane"]);Ae(e,!1);let r=y(e,"expanded",28,()=>{}),s=y(e,"x",24,()=>{}),o=y(e,"y",24,()=>{}),a=y(e,"width",24,()=>{}),c=y(e,"title",8,"Tweakpane"),u=y(e,"tpPane",28,()=>{}),d=he();X(()=>R(u()),()=>{u()?.element.parentElement&&N(d,u().element.parentElement)}),X(()=>(l(d),R(s())),()=>{l(d)!==void 0&&s()!==void 0&&(l(d).style.setProperty("right","unset"),l(d).style.setProperty("left",`${s()}px`))}),X(()=>(l(d),R(o())),()=>{l(d)!==void 0&&o()!==void 0&&l(d).style.setProperty("top",`${o()}px`)}),X(()=>(l(d),R(a())),()=>{l(d)!==void 0&&a()!==void 0&&l(d).style.setProperty("width",`${a()}px`)}),Ut(),rt();var h=_1(),p=H(h),m=oe(()=>Ks(i,"position"));pl(p,Gt({get title(){return c()}},()=>l(m),{get expanded(){return r()},set expanded(v){r(v)},get tpPane(){return u()},set tpPane(v){u(v)},children:(v,b)=>{var f=ve(),C=K(f);Rt(C,e,"default",{},null),L(v,f)},$$slots:{default:!0},$$legacy:!0})),q(h),L(n,h),Me()}function g1(n,e){const t=Ue(e,["children","$$slots","$$events","$$legacy"]),i=Ue(t,["expanded","position","width","tpPane","x","y"]);Ae(e,!1);let r=y(e,"expanded",28,()=>{}),s=y(e,"position",24,()=>{}),o=y(e,"width",28,()=>{}),a=y(e,"tpPane",28,()=>{}),c=y(e,"x",28,()=>{}),u=y(e,"y",28,()=>{});lm(()=>{(t.position==="inline"||t.position==="fixed")&&(c(t.x),u(t.y),o(t.width),r(t.expanded))}),rt();var d=ve(),h=K(d);{var p=v=>{var b=ve(),f=K(b);{var C=E=>{b1(E,Gt(()=>i,{get expanded(){return r()},set expanded(_){r(_)},get tpPane(){return a()},set tpPane(_){a(_)},get width(){return o()},set width(_){o(_)},get x(){return c()},set x(_){c(_)},get y(){return u()},set y(_){u(_)},children:(_,T)=>{var U=ve(),D=K(U);Rt(D,e,"default",{},null),L(_,U)},$$slots:{default:!0},$$legacy:!0}))};Y(f,E=>{E(C)})}L(v,b)},m=(v,b)=>{{var f=E=>{var _=oe(()=>Ks(i,"storePositionLocally"));ml(E,Gt({get width(){return o()}},()=>l(_),{get expanded(){return r()},set expanded(T){r(T)},get tpPane(){return a()},set tpPane(T){a(T)},children:(T,U)=>{var D=ve(),x=K(D);Rt(x,e,"default",{},null),L(T,D)},$$slots:{default:!0},$$legacy:!0}))},C=(E,_)=>{{var T=U=>{var D=ve(),x=K(D);{var g=w=>{w1(w,Gt({get width(){return o()}},()=>i,{get expanded(){return r()},set expanded(S){r(S)},get tpPane(){return a()},set tpPane(S){a(S)},get x(){return c()},set x(S){c(S)},get y(){return u()},set y(S){u(S)},children:(S,$)=>{var M=ve(),P=K(M);Rt(P,e,"default",{},null),L(S,M)},$$slots:{default:!0},$$legacy:!0}))};Y(x,w=>{w(g)})}L(U,D)};Y(E,U=>{s()==="fixed"&&U(T)},_)}};Y(v,E=>{s()==="inline"?E(f):E(C,!1)},b)}};Y(h,v=>{s()===void 0||s()==="draggable"?v(p):v(m,!1)})}L(n,d),Me()}class y1 extends zn{measureStart(e){this.controller.valueController.measureStart(e)}measureEnd(){return this.controller.valueController.measureEnd()}measure(e,t){this.controller.valueController.measure(e,t)}measureAsync(e,t){return this.controller.valueController.measureAsync(e,t)}get measureHandler(){return this.controller.valueController.measureHandler}set measureHandler(e){this.controller.valueController.measureHandler=e}}class wu extends Wi{constructor(e,t){const i=t.valueController,r=new qr(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:r.view,viewProps:i.viewProps}),this.valueController=i,this.labelController=r}}class C1{measureStart(){const e=performance.now();return()=>performance.now()-e}}function gu(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(i.next(d))}catch(h){o(h)}}function c(d){try{u(i.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):r(d.value).then(a,c)}u((i=i.apply(n,[])).next())})}class cp{constructor(){this.map=new Map,this.keySet=new Set}get(e){return this.map.get(e)}getOrCreate(e,t){this.keySet.has(e)||this.keySet.add(e);let i=this.map.get(e);return i==null&&(i=t(),this.map.set(e,i)),i}set(e,t){this.keySet.has(e)||this.keySet.add(e),this.map.set(e,t)}resetUsedSet(){this.keySet.clear()}vaporize(e){for(const[t,i]of this.map.entries())this.keySet.has(t)||(this.map.delete(t),e?.([t,i]))}}function x1(n){n.splice(0,n.length)}function ps(n){let e=0;return n.forEach(t=>e+=t),e}class P1{constructor(e){this.__recalcForEach=0,this.__countUntilRecalc=0,this.__history=[],this.__index=0,this.__count=0,this.__cache=0,this.__length=e,this.__recalcForEach=e;for(let t=0;t<e;t++)this.__history[t]=0}get mean(){const e=Math.min(this.__count,this.__length);return e===0?0:this.__cache/e}get recalcForEach(){return this.__recalcForEach}set recalcForEach(e){const t=e-this.__recalcForEach;this.__recalcForEach=e,this.__countUntilRecalc=Math.max(0,this.__countUntilRecalc+t)}reset(){this.__index=0,this.__count=0,this.__cache=0,this.__countUntilRecalc=0;for(let e=0;e<this.__length;e++)this.__history[e]=0}push(e){const t=this.__history[this.__index];this.__history[this.__index]=e,this.__count++,this.__index=(this.__index+1)%this.__length,this.__countUntilRecalc===0?this.recalc():(this.__countUntilRecalc--,this.__cache-=t,this.__cache+=e)}recalc(){this.__countUntilRecalc=this.__recalcForEach;const e=this.__history.slice(0,Math.min(this.__count,this.__length)).reduce((t,i)=>t+i,0);this.__cache=e}}function aa(n,e){if(typeof e!="function")return aa(n,s=>s<e);const t=e;let i=0,r=n.length;for(;i<r;){const s=i+r>>1,o=n[s];t(o)?i=s+1:r=s}return i}class E1{constructor(e){this.__history=[],this.__sorted=[],this.__index=0,this.__length=e}get median(){return this.percentile(50)}percentile(e){return this.__history.length===0?0:this.__sorted[Math.round(e*.01*(this.__history.length-1))]}reset(){this.__index=0,this.__history=[],this.__sorted=[]}push(e){const t=this.__history[this.__index];if(this.__history[this.__index]=e,this.__index=(this.__index+1)%this.__length,this.__sorted.length===this.__length){const r=aa(this.__sorted,t);this.__sorted.splice(r,1)}const i=aa(this.__sorted,e);this.__sorted.splice(i,0,e)}}function Mi(n,e){let t=0;for(let i=0;i<n.length;i++)t+=n[i]*e[i];return t}function yl(n){return Math.min(Math.max(n,0),1)}function k1(n){return`rgb( ${n.map(t=>yl(t)*256).join(", ")} )`}function S1(n){const e=[.13572138,4.6153926,-42.66032258,132.13108234],t=[.09140261,2.19418839,4.84296658,-14.18503333],i=[.1066733,12.64194608,-60.58204836,110.36276771],r=[-152.94239396,59.28637943],s=[4.27729857,2.82956604],o=[-89.90310912,27.34824973];n=yl(n);const a=[1,n,n*n,n*n*n],c=[a[2],a[3]].map(d=>d*a[2]),u=[Mi(a,e)+Mi(c,r),Mi(a,t)+Mi(c,s),Mi(a,i)+Mi(c,o)];return k1(u)}const kn=G("profiler");class L1{constructor(e,t){this.targetDelta=t.targetDelta,this.deltaUnit=t.deltaUnit,this.fractionDigits=t.fractionDigits,this.calcMode=t.calcMode,this.element=e.createElement("div"),this.element.classList.add(kn()),t.viewProps.bindClassModifiers(this.element),this.svgRootElement_=e.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgRootElement_.classList.add(kn("root")),this.element.appendChild(this.svgRootElement_),this.entryContainerElement_=e.createElementNS("http://www.w3.org/2000/svg","g"),this.entryContainerElement_.classList.add(kn("container")),this.entryContainerElement_.setAttribute("transform","translate( 1, 1 )"),this.svgRootElement_.appendChild(this.entryContainerElement_),this.tooltipElement_=e.createElement("div"),this.tooltipElement_.classList.add(kn("tooltip")),this.tooltipElement_.style.display="none",this.element.appendChild(this.tooltipElement_),this.tooltipInsideElement_=e.createElement("div"),this.tooltipInsideElement_.classList.add(kn("tooltipinside")),this.tooltipElement_.appendChild(this.tooltipInsideElement_),this.labelElement_=e.createElement("div"),this.labelElement_.classList.add(kn("label")),this.labelElement_.textContent=this.deltaToDisplayDelta_(0),this.element.appendChild(this.labelElement_),this.entryElementCacheMap_=new cp,this.hoveringEntry_=null}update(e){const t=this.entryToDelta_(e);this.labelElement_.textContent=this.deltaToDisplayDelta_(t),this.entryElementCacheMap_.resetUsedSet();const i=160/Math.max(this.targetDelta,t);let r=0;for(const s of e.children)this.addEntry_(s,"",this.entryContainerElement_,i).setAttribute("transform",`translate( ${r}, 0 )`),r+=this.entryToDelta_(s)*i;this.entryElementCacheMap_.vaporize(([s,o])=>{o.remove(),this.hoveringEntry_===s&&(this.hoveringEntry_=null)}),this.updateTooltip_()}updateTooltip_(){const e=this.hoveringEntry_;if(e){const t=this.entryElementCacheMap_.get(e),i=t?.getAttribute("data-delta"),r=this.deltaToDisplayDelta_(parseFloat(i??"0.0")),s=`${e}
${r}`;this.tooltipElement_.style.display="block",this.tooltipInsideElement_.textContent=s}else this.tooltipElement_.style.display="none"}addEntry_(e,t,i,r){const s=`${t}/${e.name}`,o=this.entryElementCacheMap_.getOrCreate(s,()=>{const d=document.createElementNS("http://www.w3.org/2000/svg","g");d.classList.add(kn("entry")),i.appendChild(d),this.entryElementCacheMap_.set(s,d);const h=document.createElementNS("http://www.w3.org/2000/svg","rect");return h.classList.add(kn("entryrect")),d.appendChild(h),h.addEventListener("mouseenter",()=>{this.hoveringEntry_=s,this.updateTooltip_()}),h.addEventListener("mouseleave",()=>{this.hoveringEntry_=null,this.updateTooltip_()}),d}),a=this.entryToDelta_(e);o.setAttribute("data-delta",`${a}`);const c=o.childNodes[0];c.setAttribute("width",`${Math.max(.01,a*r-1)}px`),c.setAttribute("height","9px");const u=.15+.7*yl(a/this.targetDelta);if(c.setAttribute("fill",S1(u)),e.children.length>0){let d=0;e.children.forEach(h=>{this.addEntry_(h,s,o,r).setAttribute("transform",`translate( ${d}, 10 )`),d+=this.entryToDelta_(h)*r})}return o}entryToDelta_(e){if(this.calcMode==="frame")return e.delta;if(this.calcMode==="mean")return e.deltaMean;if(this.calcMode==="median")return e.deltaMedian;throw new Error('Unreachable! calcMode must be one of "frame", "mean", or "median"')}deltaToDisplayDelta_(e){return`${e.toFixed(this.fractionDigits)} ${this.deltaUnit}`}}class V1{constructor(e,t){this.targetDelta=t.targetDelta,this.bufferSize=t.bufferSize,this.onTick_=this.onTick_.bind(this),this.ticker_=t.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.viewProps=t.viewProps,this.view=new L1(e,{targetDelta:this.targetDelta,deltaUnit:t.deltaUnit,fractionDigits:t.fractionDigits,calcMode:t.calcMode,viewProps:this.viewProps}),this.viewProps.handleDispose(()=>{this.ticker_.dispose()}),this.measureHandler=t.measureHandler,this.rootCalcCacheStack_=[this.createNewEntryCalcCache_()]}measureStart(e){const i=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1].childrenCacheMap.getOrCreate(e,()=>this.createNewEntryCalcCache_());i.childrenCacheMap.resetUsedSet(),x1(i.childrenPromiseDelta),this.rootCalcCacheStack_.push(i),i.measureEnd=this.measureHandler.measureStart()}measureEnd(){return gu(this,void 0,void 0,function*(){const e=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-1],t=this.rootCalcCacheStack_[this.rootCalcCacheStack_.length-2],i=Promise.resolve(e.measureEnd());e.measureEnd=null,t.childrenPromiseDelta.push(i),this.rootCalcCacheStack_.pop(),e.childrenCacheMap.vaporize();const r=yield Promise.all(e.childrenPromiseDelta),s=ps(r),o=(yield i)-s;e.meanCalc.push(o),e.medianCalc.push(o),e.latest=o})}measure(e,t){this.measureStart(e),t(),this.measureEnd()}measureAsync(e,t){return gu(this,void 0,void 0,function*(){this.measureStart(e),yield t(),this.measureEnd()})}renderEntry(){return this.renderEntryFromCalcCache_("",this.rootCalcCacheStack_[0])}renderEntryFromCalcCache_(e,t){const i=[];for(const m of t.childrenCacheMap.keySet){const v=t.childrenCacheMap.get(m);i.push(this.renderEntryFromCalcCache_(m,v))}const r=t.latest,s=t.meanCalc.mean,o=t.medianCalc.median,a=ps(i.map(m=>m.delta)),c=ps(i.map(m=>m.deltaMean)),u=ps(i.map(m=>m.deltaMedian)),d=r+a,h=s+c,p=o+u;return{name:e,delta:d,deltaMean:h,deltaMedian:p,selfDelta:r,selfDeltaMean:s,selfDeltaMedian:o,children:i}}onTick_(){this.view.update(this.renderEntry())}createNewEntryCalcCache_(){return{meanCalc:new P1(this.bufferSize),medianCalc:new E1(this.bufferSize),latest:0,measureEnd:null,childrenCacheMap:new cp,childrenPromiseDelta:[]}}}function A1(n,e){return e===0?new ld:new cd(n,e??Xi.monitor.defaultInterval)}function M1(n){switch(n){case"frame":case"mean":case"median":return n;default:return}}function D1(n){if(typeof n=="object"&&n!=null&&"measureStart"in n)return n;typeof n=="object"&&n!=null&&"measure"in n&&console.warn("The API of `ProfilerBladeDefaultMeasureHandler` has been changed in v0.4.0! Please define `measureStart` instead of `measure`. Fallback to the default measure handler.")}Pe({id:"profiler",type:"blade",accept(n){const e=ge(n,t=>({view:t.required.constant("profiler"),targetDelta:t.optional.number,bufferSize:t.optional.number,deltaUnit:t.optional.string,fractionDigits:t.optional.number,calcMode:t.optional.custom(M1),label:t.optional.string,interval:t.optional.number,measureHandler:t.optional.custom(D1)}));return e?{params:e}:null},controller(n){var e,t,i,r,s,o,a;const c=(e=n.params.interval)!==null&&e!==void 0?e:500,u=(t=n.params.targetDelta)!==null&&t!==void 0?t:16.67,d=(i=n.params.bufferSize)!==null&&i!==void 0?i:30,h=(r=n.params.deltaUnit)!==null&&r!==void 0?r:"ms",p=(s=n.params.fractionDigits)!==null&&s!==void 0?s:2,m=(o=n.params.calcMode)!==null&&o!==void 0?o:"mean",v=(a=n.params.measureHandler)!==null&&a!==void 0?a:new C1;return new wu(n.document,{blade:n.blade,labelProps:Q.fromObject({label:n.params.label}),valueController:new V1(n.document,{ticker:A1(n.document,c),targetDelta:u,bufferSize:d,deltaUnit:h,fractionDigits:p,calcMode:m,viewProps:n.viewProps,measureHandler:v})})},api(n){return n.controller instanceof wu?new y1(n.controller):null}});class yu{constructor(){this.drawer=e=>`L ${e[0]} ${e[1]}`}}class $1{constructor(){this.drawer=(e,t,i)=>{const[r,s]=this.controlPoint(i[t-1],i[t-2],e),[o,a]=this.controlPoint(e,i[t-1],i[t+1],!0);return`C ${r},${s} ${o},${a} ${e[0]},${e[1]}`}}controlPoint(e,t,i,r){const s=t||e,o=i||e,a=.2,c=o[0]-s[0],u=o[1]-s[1],d=Math.sqrt(Math.pow(c,2)+Math.pow(u,2))*a,h=Math.atan2(u,c)+(r?Math.PI:0),p=e[0]+Math.cos(h)*d,m=e[1]+Math.sin(h)*d;return[p,m]}}const Cu=G("wfm");class T1{constructor(e,t){switch(this.element=e.createElement("div"),this.element.classList.add(Cu()),t.viewProps.bindClassModifiers(this.element),this.svgElem=e.createElementNS(xe,"svg"),this.svgElem.classList.add(Cu("g")),this.element.appendChild(this.svgElem),this.pathElem=e.createElementNS(xe,"path"),this.svgElem.appendChild(this.pathElem),this.props=t.props,this.value=t.value,this.value.emitter.on("change",this.onValueChange_.bind(this)),this.props.get("lineStyle")){case"linear":this.lineDrawerProvider=new yu;break;case"bezier":this.lineDrawerProvider=new $1;break;default:this.lineDrawerProvider=new yu;break}this.refresh(),t.viewProps.handleDispose(()=>{this.value.emitter.off("change",this.onValueChange_)})}svgPath(e,t){return e.reduce((r,s,o,a)=>o===0?`M ${s[0]},${s[1]}`:`${r} ${t(s,o,a)}`,"")}refresh(){var e,t;const i=this.svgElem.getBoundingClientRect(),r=this.value.rawValue[0];if(r){const s=(e=this.props.get("min"))!==null&&e!==void 0?e:Math.min(...r)-1,o=(t=this.props.get("max"))!==null&&t!==void 0?t:Math.max(...r)+1,a=o-s,c=[],u=r.length-1,d=r.length>32?0:i.width/(r.length-1),h=a>50?0:i.height/a;this.element.style.backgroundSize=`${d}px ${h}px`,r.forEach((m,v)=>{if(m===void 0)return;const b=ie(v,0,u,0,i.width),f=ie(m,s,o,i.height,0);c.push([Math.floor(b),Math.floor(f)])});const p=this.svgPath(c,this.lineDrawerProvider.drawer);this.pathElem.setAttributeNS(null,"d",p)}}onValueChange_(){this.refresh()}}class I1{constructor(e,t){this.value=t.value,this.props=t.props,this.viewProps=t.viewProps,this.viewProps.handleDispose(()=>{}),this.view=new T1(e,{value:this.value,viewProps:this.viewProps,props:this.props})}}function O1(n){return"view"in n&&n.view==="waveform"}function xu(n){return typeof n=="object"?"length"in n:!1}Pe({id:"monitor-waveform",type:"monitor",accept:(n,e)=>{if(!xu(n))return null;const t=ge(e,i=>({max:i.optional.number,min:i.optional.number,style:i.optional.custom(r=>r==="linear"||r==="bezier"?r:void 0),view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>O1(n)?64:1,reader:n=>e=>xu(e)?e:[]},controller:n=>{var e,t,i;return new I1(n.document,{props:Q.fromObject({max:(e="max"in n.params?n.params.max:null)!==null&&e!==void 0?e:null,min:(t="min"in n.params?n.params.min:null)!==null&&t!==void 0?t:null,lineStyle:(i="style"in n.params?n.params.style:null)!==null&&i!==void 0?i:"linear"}),value:n.value,viewProps:n.viewProps})}});var z1=j("<!> <!> <!>",1),R1=j(" <!> <!> <!> <!> <!> <!> <!>",1),B1=j("<!> <!>",1);function N1(n,e){Ae(e,!1);const t=he(_t("pageContext"));rt();const i=ca(()=>l(t).selectedLayout?.type);g1(n,{get title(){return l(i)},children:(r,s)=>{var o=B1(),a=K(o);Cs(a,{title:"Common Properties",children:(u,d)=>{var h=ve(),p=K(h);{var m=v=>{var b=R1(),f=K(b),C=I(f);{var E=A=>{Qn(A,{label:"id",get value(){return l(t).selectedLayout.id},set value(k){le(t,l(t).selectedLayout.id=k)},$$legacy:!0})};Y(C,A=>{l(t).selectedLayout.id!=null&&A(E)})}var _=I(C),T=I(_);{var U=A=>{Bo(A,{label:"Class",placeholder:"Tailwind or DaisyUI classes",get value(){return l(t).selectedLayout.props.class},set value(k){le(t,l(t).selectedLayout.props.class=k)},$$legacy:!0})};Y(T,A=>{l(t).selectedLayout.props.class!=null&&A(U)})}var D=I(T),x=I(D);{var g=A=>{Bo(A,{label:"Background Image",placeholder:"URL to image",get value(){return l(t).selectedLayout.props.background},set value(k){le(t,l(t).selectedLayout.props.background=k)},$$legacy:!0})};Y(x,A=>{l(t).selectedLayout.props?.background!=null&&A(g)})}var w=I(x),S=I(w);{var $=A=>{fE(A,{label:"Draggable",get value(){return l(t).selectedLayout.props.draggable},set value(k){le(t,l(t).selectedLayout.props.draggable=k)},$$legacy:!0})};Y(S,A=>{l(t).selectedLayout.props.draggable!=null&&A($)})}var M=I(S,2);{var P=A=>{Qn(A,{label:"Data Source",get value(){return l(t).selectedLayout.props.dataSource},set value(k){le(t,l(t).selectedLayout.props.dataSource=k)},$$legacy:!0})};Y(M,A=>{l(t).selectedLayout.props.dataSource!=null&&A(P)})}var O=I(M),z=I(O);{var B=A=>{Qn(A,{label:"Tooltip",get value(){return l(t).selectedLayout.props.tooltip},set value(k){le(t,l(t).selectedLayout.props.tooltip=k)},$$legacy:!0})};Y(z,A=>{l(t).selectedLayout.props.tooltip!=null&&A(B)})}var ue=I(z,2);{var V=A=>{Cs(A,{title:"OnChange Action",children:(k,W)=>{var Z=z1(),ee=K(Z);Qn(ee,{label:"Action",get value(){return l(t).selectedLayout.onchange.action},set value(pe){le(t,l(t).selectedLayout.onchange.action=pe)},$$legacy:!0});var ye=I(ee,2);Qn(ye,{label:"Object Name",get value(){return l(t).selectedLayout.onchange.objectName},set value(pe){le(t,l(t).selectedLayout.onchange.objectName=pe)},$$legacy:!0});var Qe=I(ye,2);Qn(Qe,{label:"Object Name's Scale Property",get value(){return l(t).selectedLayout.onchange.options.scale},set value(pe){le(t,l(t).selectedLayout.onchange.options.scale=pe)},$$legacy:!0}),L(k,Z)},$$slots:{default:!0}})};Y(ue,A=>{l(t).selectedLayout.onchange!=null&&A(V)})}ne(()=>{Te(f,`${le(t,l(t).selectedLayout.id=l(t).selectedLayout?.id||"")??""} `),Te(_,` ${le(t,l(t).selectedLayout.props.class=l(t).selectedLayout.props.class||"")??""} `),Te(D,` ${le(t,l(t).selectedLayout.props.background=l(t).selectedLayout.props?.background||"")??""} `),Te(w,` ${le(t,l(t).selectedLayout.props.draggable=l(t).selectedLayout.props.draggable||!1)??""} `),Te(O,` ${le(t,l(t).selectedLayout.props.tooltip=l(t).selectedLayout.props.tooltip||"")??""} `)}),L(v,b)};Y(p,v=>{l(t).selectedLayout&&v(m)})}L(u,h)},$$slots:{default:!0}});var c=I(a,2);Cs(c,{title:"Custom Properties",children:(u,d)=>{var h=ve(),p=K(h);{var m=v=>{var b=ve(),f=K(b);Tt(f,1,()=>Object.keys(l(t).selectedLayout.props),C=>C,(C,E)=>{var _=ve(),T=K(_);{var U=x=>{Bo(x,{get label(){return l(E)},get value(){return l(t).selectedLayout.props[l(E)]},set value(g){le(t,l(t).selectedLayout.props[l(E)]=g)},$$legacy:!0})},D=x=>{Qn(x,{get label(){return l(E)},get value(){return l(t).selectedLayout.props[l(E)]},set value(g){le(t,l(t).selectedLayout.props[l(E)]=g)},$$legacy:!0})};Y(T,x=>{l(t).selectedLayout.props[l(E)].length>30?x(U):x(D,!1)})}L(C,_)}),L(v,b)};Y(p,v=>{l(t).selectedLayout?.props&&v(m)})}L(u,h)},$$slots:{default:!0}}),L(r,o)},$$slots:{default:!0}}),Me()}const j1={type:"container",props:{class:"bg-neutral-content rounded-xl pt-1 pb-1"},children:[{type:"repeater",props:{dataSource:"componentLibrary"},children:[{type:"container",props:{class:"flex flex-row p-2 mt-1 ml-2 mr-2 mb-1 bg-white rounded-md items-center cursor-move",draggable:!0,dragData:"{data.DefinitionAsString}"},children:[{type:"icon",props:{icon:"{data.IconifyIcon}",size:"1.5em"}},{type:"text",props:{class:"text-base-content ml-1 text-sm",value:"{data.Name}"}}]}]}]},up=[{Name:"Remote",IconifyIcon:"mdi:gear",Definition:{type:"remote",props:{class:"flex"}}},{Name:"3D Object",IconifyIcon:"gis:cube-3d",Definition:{type:"3D",props:{assetURL:"https://corsproxy.io/?url=https://www.hulbertfamily.com/gltf/MaterialsVariantsShoe.glb",scale:30}}},{Name:"Button",IconifyIcon:"teenyicons:button-outline",Definition:{type:"button",props:{class:"btn btn-sm btn-primary",tooltip:"Show this when user hovers",label:"Button"},actions:{onclick:{type:"clientScript",script:"alert('button clicked')"}}}},{Name:"Calendar",IconifyIcon:"lucide:calendar-days",Definition:{type:"calendar",props:{startTimeField:"startDateTime",endTimeField:"endDateTime",titleField:"Title",idField:"UniqueID"}}},{Name:"Chart",IconifyIcon:"lucide:chart-no-axes-combined",Definition:{type:"chart",props:{dataSource:"chartData",title:"This is an ApexChart",color:"#009999",yColumn:"y",type:"treemap",xColumn:"x"}}},{Name:"Choice",IconifyIcon:"lucide:list",Definition:{type:"choice",props:{optionValueField:"name",optionTitleField:"name",value:"Mary Ann",class:"border border-gray-300 rounded",dataSource:"names"},actions:{onchange:{type:"clientScript",script:'alert("choice changed {self.props.value}")'}}}},{Name:"Container - Horizontal",IconifyIcon:"clarity:container-line",Definition:{type:"container",props:{class:"flex flex-wrap"},children:[]}},{Name:"Container - Vertical",IconifyIcon:"carbon:container-image",Definition:{type:"container",props:{class:""},children:[]}},{Name:"Icon",IconifyIcon:"lucide:image",Definition:{type:"icon",props:{size:"1.5em",color:"black",icon:"lucide:image"}}},{Name:"iFrame",IconifyIcon:"tdesign:component-layout",Definition:{type:"iframe",props:{class:"w-full",url:"https://nc-photo.org"}}},{Name:"Image",IconifyIcon:"lucide:image",Definition:{type:"image",props:{src:"https://fastly.picsum.photos/id/456/200/200.jpg?hmac=Nu8ETZuaEwOyl13MjrpOo92an166yAu4I2emrU09uxg"}}},{Name:"Input",IconifyIcon:"mdi:form-textbox",Definition:{type:"input",props:{class:"input input-bordered mb-2",value:"Sample plain text",placeholder:""}}},{Name:"Kanban",IconifyIcon:"material-symbols:view-kanban-outline",Definition:{type:"kanban",props:{dataSource:"Calendar_offline",idField:"",titleField:"",columnField:"Type",priorityField:"",descriptionField:""}}},{Name:"Map",IconifyIcon:"uiw:map",Definition:{type:"map",props:{dataSource:"mapMarkers",zoom:2,rasterLayer:"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",tileLayer:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[-117.165975,33.088782],markerIcon:"mdi:location",popup:'{"componentType":"text","type":"component","id":"","props":{"content":"{lngLat}: {label}"},"class":"text-base-content"}',baseMap:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json"}}},{Name:"Phone",IconifyIcon:"material-symbols:smartphone",Definition:{type:"container",props:{class:"mockup-phone scale-90"},children:[{type:"container",props:{class:"camera"}},{type:"container",props:{class:"display w-[440px] h-[844px] bg-white"},children:[{type:"text",props:{class:"pt-2 pl-3 text-gray-100",value:"safe area"}},{type:"container",props:{class:"flex flex-wrap"},children:[]}]}]}},{Name:"Repeater",IconifyIcon:"lucide:repeat",Definition:{type:"repeater",props:{class:"flex flex-wrap",dataSource:"names"},children:[{type:"text",props:{value:"Sample <b>rich</b> text"}}]}},{Name:"Rich Text",IconifyIcon:"f7:doc-richtext",Definition:{type:"richtext",props:{value:""}}},{Name:"Script",IconifyIcon:"fluent:script-32-regular",Definition:{type:"script",props:{script:"// This is a syntax-aware Javascript editor"}}},{Name:"Slider",IconifyIcon:"radix-icons:slider",Definition:{type:"slider",props:{class:"range",min:1,max:100,value:50,step:1}}},{Name:"Table",IconifyIcon:"lucide:table",Definition:{type:"table",props:{dataSource:"calendarEvents",editable:!0}}},{Name:"Text",IconifyIcon:"lucide:type",Definition:{type:"text",props:{class:"text-base-content",value:"Sample <b>rich</b> text"}}},{Name:"Timeline",IconifyIcon:"mingcute:timeline-fill",Definition:{type:"timeline",props:{dataSource:"calendarEvents",class:"timeline timeline-snap-icon timeline-vertical max-md:timeline-compact h-96 overflow-y-auto",nodeWidth:64,itemLayout:'{"type":"button","class":"btn btn-xs","props":{"label":"{data.shortdescription:hideEmpty}"}}',icon:"mdi:{data.icon}",iconColor:"blue"}}},{Name:"Upload Image",IconifyIcon:"material-symbols:cloud-upload",Definition:{type:"imageupload",props:{class:"btn btn-sm btn-primary",label:"Upload to Cloudinary",cloudinaryFolder:"test",cloudinaryPreset:"Bleth_preset"}}}];up.forEach(n=>{n.DefinitionAsString=JSON.stringify(n.Definition)});function F1(n,e){Ae(e,!0);const i={..._t("pageContext"),editMode:e.editMode};ri("pageContext",i);var r=ve(),s=K(r);Su(s,()=>e.children),L(n,r),Me()}var U1=j('<div class="error"></div>'),q1=j("<div></div>");function H1(n,e){Ae(e,!0);const t=_t("pageContext");function i(){return e.layoutStructure}function r(){return[]}function s(){return[]}const o=oe(()=>El(e.layoutStructure.props?.class,t,e.dataValues,!1)+(e.layoutStructure.props?.background?` bg-[url(${e.layoutStructure.props?.background})] bg-no-repeat bg-cover bg-center`:""));let a,c=null;On(async()=>{const m=async(v=3,b=1e3)=>{try{const f=await wp(()=>import("../chunks/2aiywt-_.js").then(C=>C.h),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]),import.meta.url);new f.default({target:a})}catch(f){if(v>0)return await new Promise(C=>setTimeout(C,b)),m(v-1,b);c=`Failed to load remote module: ${f.message}`,console.error(f)}};return await m(),()=>{a.innerHTML=""}});var u=ve(),d=K(u);{var h=m=>{var v=U1();v.textContent=c,L(m,v)},p=m=>{var v=q1();let b;Is(v,(f,C)=>ua?.(f,C),()=>({content:El(e.layoutStructure.props?.tooltip,e.dataValues,!1)})),kt(v,f=>a=f,()=>a),ne(f=>b=Ts(v,b,{...f,class:l(o)}),[()=>Tp(e.layoutStructure.actions,{page:t,data:e.dataValues,self:e.myself},e.dataValues)]),L(m,v)};Y(d,m=>{c?m(h):m(p,!1)})}return L(n,u),Me({getLayout:i,getEvents:r,getProps:s})}var K1=j('<div class="h-screen overflow-y-auto"><!></div>'),G1=j('<div class="bg-brand z-10 flex h-7 w-3 items-center justify-center rounded-sm border"><!></div>'),W1=j('<div class="h-screen overflow-y-auto">One of each component type:<!></div>'),Y1=j('<div class="bg-brand z-10 flex h-7 w-3 items-center justify-center rounded-sm border"><!></div>'),X1=j('<div class="h-screen overflow-y-auto"><!></div>'),Z1=j("<!> <!> <!> <!> <!>",1),J1=j('<div><!> <label><input type="checkbox"> Edit Mode</label> <label class="ml-2"><input type="checkbox"> Floating Property Panel</label> <hr> <!></div>');function QS(n,e){Ae(e,!0),We("named",jp),We("3D",Fp),We("button",Up),We("calendar",qp),We("chart",Hp),We("choice",Kp),We("container",Gp),We("icon",Wp),We("iframe",Yp),We("image",Xp),We("imageupload",Zp),We("input",Jp),We("map",Qp),We("pdf",em),We("repeater",tm),We("richtext",nm),We("script",im),We("slider",rm),We("table",sm),We("text",om),We("timeline",am),We("remote",H1);let t=Se({editMode:!1,floatingPanel:!1,selectedLayout:null,selectedComponent:{},namedPageObjects:{},data:{endpoint1:"/blog",endpoint2:"/tutorial/svelte/welcome-to-svelte",exampleIcon:{color:"red",shape:"mdi:gear",size:32},exampleButton:{label:"B-label",color:"btn-warning"},exampleImage:{src:"https://media.formula1.com/image/upload/f_auto,c_limit,w_112,q_auto/nwp-navigation/f1-tv-logo"},exampleInput:{placeholder:"type here"},exampleText:{content:"text"},exampleSlider:{min:0,max:10},exampleNestedJSON:{photo:{inner:"https://media.formula1.com/d_team_car_fallback_image.png/content/dam/fom-website/teams/2025/ferrari.png"}},primaryColorClass:"primary",primaryColorHex:"11aaff",f1Driver1:`Eugene's "F1"`,chartData:[{x:"hello",y:12},{x:"there",y:34}],recipes:[],calendarEvents:[{start:"2025-04-20 19:00:00",end:"2025-04-20 20:00:00",shortdescription:"NCPS Peregrine Falcon Photography Workshop",description:"Zoom meeting for the NCPS Peregrine Falcon Photography Workshop with Sandy Zelasko and Dave Clark. You must be a current member and must register to receive the Zoom link. Register by emailing workshops@nc-photo.org. Join the meeting to learn about our local peregrine falcon population, how to photograph them and where and when to go. Find more information in the April Lens Paper.",speaker:"Sandy Zelasko",type:"clubactivity",location:"Register at workshops@nc-photo.org to receive the Zoom meeting link",id:421,icon:"bike"},{start:"2025-04-23 18:30:00",end:"2025-04-23 21:00:00",shortdescription:"Lake Hodges",description:"For over 30 years I've been a resident of Del Dios on the banks of Lake Hodge and have been involved in the Lake since my arrival, first as the concessionaire and now as a photography guide with my company Lake Hodges Photo Tours. My presentation will highlight the Grebe population situation, the new dam construction, Kayaking for the Birds program, the water levels and the future, and how this relates to photography.",speaker:"Brian Caldwell",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:284,icon:"car"},{start:"2025-05-28 18:30:00",end:"2025-05-28 21:00:00",shortdescription:"A Day at the Beach",description:"",speaker:"Mark Drawbridge",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:283,icon:"bus"},{start:"2025-06-25 00:00:00",end:"2025-06-25 21:00:00",shortdescription:"",description:"",speaker:"William Bay",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:281,icon:"train"},{start:"2025-07-23 18:30:00",end:"2025-07-23 21:00:00",shortdescription:"",description:"",speaker:"",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:285},{start:"2025-08-27 00:00:00",end:"2025-08-27 21:00:00",shortdescription:"Birds",description:"",speaker:"Barbara Swanson",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:282},{start:"2025-09-24 18:30:00",end:"2025-09-24 21:00:00",shortdescription:"",description:"",speaker:"",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:286},{start:"2025-10-22 18:30:00",end:"2025-10-22 21:00:00",shortdescription:"",description:"",speaker:"",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:287},{start:"2025-11-19 18:30:00",end:"2025-11-19 21:00:00",shortdescription:"",description:"",speaker:"",location:"Carlsbad Senior Center at 799 Pine Ave, Carlsbad, CA 92008",type:"monthlymeeting",id:288}],componentLibrary:up,mapMarkers:[{lngLat:[-122.2993,47.4464],name:"Seattle",label:"SEA"},{lngLat:[-159.3438,21.9788],name:"Lihue",label:"LIH"},{lngLat:[2.5479,49.0097],name:"Paris Charles de Gaulle",label:"CDG"},{lngLat:[-58.5348,-34.82],name:"Ministro Pistarini",label:"EZE"},{lngLat:[18.6021,-33.9715],name:"Cape Town",label:"CPT"},{lngLat:[121.0165,14.5123],name:"Ninoy Aquino",label:"MNL"}],names:[{name:"Gilligan",color:"btn-error"},{name:"Professor",color:"btn-error",navigate:"/blog"},{name:"Mary Ann",color:"btn-accent",navigate:"/tutorial/svelte/welcome-to-svelte"},{name:"Ginger",color:"btn-warning"}],addresses:[{name:"221B Baker Street"},{name:"124 Conch Street"}],ncpsEvents:[],examples:[{iconColor:"red",iconShape:"mdi:gear",iconSize:32,buttonLabel:"B-label",exampleImage:"https://media.formula1.com/image/upload/f_auto,c_limit,w_112,q_auto/nwp-navigation/f1-tv-logo",hint:"type here",text:"text"}]}});ri("pageContext",t);let i=!1;function r(b){b.key==="Alt"?(i=!(b.metaKey||b.ctrlKey||b.shiftKey),b.preventDefault()):i=!1}function s(b){b.key==="Alt"&&i&&(b.metaKey||b.ctrlKey||b.shiftKey||(t.editMode=!t.editMode)),b.key==="Alt"&&(i=!1)}Se(Ip),Se(Op),Se(zp),Se(Rp);let o=Se(Bp);Se(Np);var a=J1();je("keydown",Zt,r),je("keyup",Zt,s);var c=H(a);{var u=b=>{N1(b,{})};Y(c,b=>{t.floatingPanel&&b(u)})}var d=I(c,2),h=H(d);Ke(h),Mn(),q(d),Is(d,(b,f)=>ua?.(b,f),()=>({content:"Press Option or Alt key to toggle"}));var p=I(d,2),m=H(p);Ke(m),Mn(),q(p);var v=I(p,4);Rm(v,{direction:"horizontal",class:"w-full",autoSaveId:"mainLayout",children:(b,f)=>{var C=Z1(),E=K(C);so(E,{defaultSize:10,class:"mt-2 ml-2",children:(x,g)=>{var w=K1(),S=H(w);F1(S,{editMode:!1,children:($,M)=>{kl($,{layoutStructure:j1})},$$slots:{default:!0}}),q(w),L(x,w)},$$slots:{default:!0}});var _=I(E,2);Il(_,{class:"bg-background relative flex w-2 items-center justify-center",children:(x,g)=>{var w=G1(),S=H(w);Sl(S,{icon:"mdi-light:dots-vertical",width:30,height:30}),q(w),L(x,w)},$$slots:{default:!0}});var T=I(_,2);so(T,{defaultSize:50,children:(x,g)=>{var w=W1(),S=I(H(w));kl(S,{get layoutStructure(){return o}}),q(w),L(x,w)},$$slots:{default:!0}});var U=I(T,2);Il(U,{class:"bg-background relative flex w-2 items-center justify-center",children:(x,g)=>{var w=Y1(),S=H(w);Sl(S,{icon:"mdi-light:dots-vertical",height:"30"}),q(w),L(x,w)},$$slots:{default:!0}});var D=I(U,2);so(D,{defaultSize:10,children:(x,g)=>{var w=X1(),S=H(w);hf(S,{}),q(w),L(x,w)},$$slots:{default:!0}}),L(b,C)},$$slots:{default:!0}}),q(a),Fi(h,()=>t.editMode,b=>t.editMode=b),Fi(m,()=>t.floatingPanel,b=>t.floatingPanel=b),L(n,a),Me()}export{QS as component};
